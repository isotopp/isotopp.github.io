<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Die wunderbare Welt von Isotopp</title>
    <link>https://blog.koehntopp.info/posts.html</link>
    <description>Recent content in Posts on Die wunderbare Welt von Isotopp</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 03 Mar 2024 13:40:51 +0000</lastBuildDate><atom:link href="https://blog.koehntopp.info/posts/feed.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Python: Slots</title>
      <link>https://blog.koehntopp.info/2024/02/19/python-slots.html</link>
      <pubDate>Tue, 20 Feb 2024 05:06:07 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2024/02/19/python-slots.html</guid>
      <description>&lt;p&gt;I am playing a bit with &lt;code&gt;__slots__&lt;/code&gt; in Python, and I am trying to understand if I am holding them wrongly.&lt;/p&gt;
&lt;p&gt;I am defining a small test program with two classes, both having 20 instance variables with long names,
holding a bit of string data.
I make one million instances and put them into a list.
Then I am trying to measure the size of this in memory.&lt;/p&gt;
&lt;p&gt;Supposedly using &lt;code&gt;__slots__&lt;/code&gt; the instances should save me a lot of memory,
and for a single instance they seem to do that.
For a large list, they save a bit of memory, but not a lot.&lt;/p&gt;
&lt;h1 id=&#34;the-code&#34;&gt;
    &lt;a href=&#34;#the-code&#34;&gt;
	The Code
    &lt;/a&gt;
&lt;/h1&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;ch&#34;&gt;#! /usr/bin/env python&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;random&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;sys&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pympler&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;asizeof&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;SlotTest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;vm&#34;&gt;__slots__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_00&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_01&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_02&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_03&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_04&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_05&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_06&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_07&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_08&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_09&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_10&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_11&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_12&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_13&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_14&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_15&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_16&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_17&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_18&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_19&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;choices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ascii_lowercase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;setattr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;DictTest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;choices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ascii_lowercase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;setattr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1_000_000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DictTest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;as_d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;asizeof&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;asizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SlotTest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;as_s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;asizeof&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;asizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;delta_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;as_d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;as_s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Size of list: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sys&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getsizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Size of instance: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sys&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getsizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Deep size of instance: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;asizeof&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;asizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Total size (with deep size of objects): &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;as_d&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Size of list: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sys&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getsizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Size of instance: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sys&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getsizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Deep size of instance: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;asizeof&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;asizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Total size (with deep size of objects): &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;as_s&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Delta Size: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delta_size&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;the-result&#34;&gt;
    &lt;a href=&#34;#the-result&#34;&gt;
	The Result
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;This prints&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Size of list: 8448728 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Size of instance: 56 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Deep size of instance: 3328 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Total size (with deep size of objects): 1736450328 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Size of list: 8448728 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Size of instance: 192 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Deep size of instance: 1632 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Total size (with deep size of objects): 1640448728 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Delta Size: 96001600 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We find:
The &lt;code&gt;DictTest&lt;/code&gt; instance is 3328 bytes in size, the &lt;code&gt;SlotTest&lt;/code&gt; instance only 1632 bytes, according to pympler.
Using &lt;code&gt;sys.getsizeof()&lt;/code&gt;, we severely underestimate the actual memory usage.&lt;/p&gt;
&lt;p&gt;We also find &lt;code&gt;(1640448728*100)/1736450328 = 94.5&lt;/code&gt;, so the Slots version is still 94.5% the size of the Dict version,
while &lt;code&gt;(1632*100)/3328 = 49.0&lt;/code&gt;, so the individual Slots instance is less than half of the Dict instance.
What happens here?&lt;/p&gt;
&lt;p&gt;The string &amp;ldquo;a_key_with_a_very_long_name_xx&amp;rdquo; has 30 characters, and we have 20 of them.
Each string associated with a key has 20 characters.
In the end we store &lt;code&gt;(20+30) * 20 = 1000&lt;/code&gt; characters per object.&lt;/p&gt;
&lt;p&gt;Out of these, 600 characters are identical in every instance (the key names),
and 400 characters are different in every instance (the randomly generated values).&lt;/p&gt;
&lt;p&gt;Clearly, I don&amp;rsquo;t yet fully understand what goes on here.&lt;/p&gt;
&lt;h1 id=&#34;the-math&#34;&gt;
    &lt;a href=&#34;#the-math&#34;&gt;
	The Math
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;One million Slots objects should be &lt;code&gt;1000000 * 1632 = 1632000000&lt;/code&gt; bytes.
The report says 1640448728 bytes, and the list itself indeed occupies around 8 MB when you measure.
This checks out.&lt;/p&gt;
&lt;p&gt;One million Dict objects should be &lt;code&gt;1000000 * 3328 = 3328000000&lt;/code&gt; bytes.
The report says 1736450328 bytes, which is around half the expected size.
This is almost as efficient as the Slots version, and something seems to be optimizing here,
but I don&amp;rsquo;t understand what goes on.&lt;/p&gt;
&lt;p&gt;The documentation praises Slots as a lot smaller, a lot faster and more typesafe than Dicts,
but while Slots are somewhat smaller, they are not a lot smaller.&lt;/p&gt;
&lt;p&gt;I do get why you&amp;rsquo;d want an exception for &lt;code&gt;self.doesntexist = 1&lt;/code&gt; in many cases, so there&amp;rsquo;s that.&lt;/p&gt;
&lt;h1 id=&#34;trying-perl&#34;&gt;
    &lt;a href=&#34;#trying-perl&#34;&gt;
	Trying perl
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Ok, knowing how Perl optimizes things internally, I am trying to compare:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;ch&#34;&gt;#!/usr/bin/env perl&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;use&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;strict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;use&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;warnings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;use&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;Devel::Size&lt;/span&gt; &lt;span class=&#34;sx&#34;&gt;qw(total_size)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;sub&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;random_string&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;shift&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;join&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;map&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;z&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;rand&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;26&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;DictTest&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;sub&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$class&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;shift&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$self&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;bless&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;19&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nv&#34;&gt;$self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;a_key_with_a_very_long_name_$i&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;main::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;random_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1_000_000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;@d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;map&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;DictTest&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$as_d&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;total_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;@d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Total size for DictTest: $as_d bytes\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I get an object size of around 1904 bytes.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; perl probe.pl
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Total size for DictTest: 1904001334 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Suddenly, Python does not look so bad by comparison.&lt;/p&gt;
&lt;h1 id=&#34;trying-php-naively&#34;&gt;
    &lt;a href=&#34;#trying-php-naively&#34;&gt;
	Trying PHP naively
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Using PHP 8.3.2, we can try the same using PHP&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#! /usr/bin/env php
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;php&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;DictTest&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__construct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;a_key_with_a_very_long_name_&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;randomString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;randomString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nv&#34;&gt;$abc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;abcdefghijklmnopqrstuvwxyz&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nv&#34;&gt;$l&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$abc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nv&#34;&gt;$res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$abc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$l&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$objects&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Measure memory before creating objects
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$memoryBefore&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memory_get_usage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nv&#34;&gt;$objects&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DictTest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Measure memory after creating objects
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$memoryAfter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memory_get_usage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Calculate the difference
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$memoryUsed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$memoryAfter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$memoryBefore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Approximate total size for DictTest: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$memoryUsed&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In order for this to work, we have to silence the warning in the dynamic instance variable assignment
(or very verbosely define the 20 instance variables like we had to do in the Python Slots version).
We also had to raise the memory limit of PHP to 4096 MB.&lt;/p&gt;
&lt;p&gt;We get&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; php probe.php
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Approximate total size for DictTest: 3481174608 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So in PHP, we get around 3481 bytes (or 3.4 KB) per object.&lt;/p&gt;
&lt;h1 id=&#34;smarter-php&#34;&gt;
    &lt;a href=&#34;#smarter-php&#34;&gt;
	Smarter PHP
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;I have been told that the warning I silenced with the &lt;code&gt;@&lt;/code&gt; is there for a reason and not just cosmetic.
When I declare properties statically, I am writing a lot of very verbose and ugly code,
but PHP will internally much more efficient structures.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#! /usr/bin/env php
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;php&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;DictTest&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$a_key_with_a_very_long_name_00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;omitted&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;brevity&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$a_key_with_a_very_long_name_19&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__construct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;nv&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;a_key_with_a_very_long_name_00&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;randomString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;omitted&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;brevity&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;nv&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;a_key_with_a_very_long_name_19&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;randomString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;randomString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nv&#34;&gt;$abc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;abcdefghijklmnopqrstuvwxyz&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nv&#34;&gt;$l&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$abc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nv&#34;&gt;$res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$abc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$l&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$objects&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Measure memory before creating objects
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$memoryBefore&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memory_get_usage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nv&#34;&gt;$objects&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DictTest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Measure memory after creating objects
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$memoryAfter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memory_get_usage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Calculate the difference
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$memoryUsed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$memoryAfter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$memoryBefore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Approximate total size for DictTest: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$memoryUsed&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; bytes&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;resulting in a total memory usage of&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; php probe.php
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Approximate total size for DictTest: 1369174120 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This indeed brings us down to 1369 bytes per object.&lt;/p&gt;
&lt;h1 id=&#34;an-overview&#34;&gt;
    &lt;a href=&#34;#an-overview&#34;&gt;
	An Overview
    &lt;/a&gt;
&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Version&lt;/th&gt;
&lt;th&gt;Size per Object&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Python Slots&lt;/td&gt;
&lt;td&gt;1632&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Python Dicts&lt;/td&gt;
&lt;td&gt;1736 effective&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Perl Dicts&lt;/td&gt;
&lt;td&gt;1904&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PHP Dicts&lt;/td&gt;
&lt;td&gt;3481&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PHP declared&lt;/td&gt;
&lt;td&gt;1369&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;I do know that Perl compresses hash keys with a lookup table.
When you have an Array of Hashes with one million hashes,
it does not store one million copies of the same identical 20 hash keys.
It instead has a secret internal hash that translates the key into an integer,
and then transparently creates hashes keyed by these integers.&lt;/p&gt;
&lt;p&gt;This is also what I thought &lt;code&gt;__slots__&lt;/code&gt; would do in Python, and indeed the resulting object size is comparable.&lt;/p&gt;
&lt;p&gt;The single object sizes of PHP (which does not do such hash key compression)
and Python &lt;code&gt;__dict__&lt;/code&gt; based objects are also comparable, around 3.4 KB per object.
PHP with statically declared instance variables does apply a number of optimizations,
and comes in at 1.6 KB per object, up there with Python and Perl.&lt;/p&gt;
&lt;p&gt;The Python &amp;ldquo;list of objects&amp;rdquo; is much smaller than expected, though,
so there seems to be an optimization that does some slot-ification
or hash key compression in Python for large numbers of identical objects.&lt;/p&gt;
&lt;h1 id=&#34;countertesting-with-pure-dicts&#34;&gt;
    &lt;a href=&#34;#countertesting-with-pure-dicts&#34;&gt;
	Countertesting with pure Dicts
    &lt;/a&gt;
&lt;/h1&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hash_test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;a_key_with_a_very_long_name_&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;random_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;h&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This results in the following values for sizing:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Sizing hash_test
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Size of list: 8448728 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Size of instance: 464 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Deep size of instance: 3504 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Total size (with deep size of objects): 3512448728 bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We can see that the optimization is not happening for normal dictionaries.
Here we get circa 3.5 KB dict size.
This is comparable to what PHP with dynamic instance variables reports,
and also consistent with the size of a single hash.&lt;/p&gt;
&lt;h1 id=&#34;some-possible-explanations&#34;&gt;
    &lt;a href=&#34;#some-possible-explanations&#34;&gt;
	Some possible explanations
    &lt;/a&gt;
&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Florian Laws pointed me to the Medium-Article
&lt;a href=&#34;https://medium.com/@bdov_/https-medium-com-bdov-python-objects-part-iii-string-interning-625d3c7319de&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Python Objects Part III: String Interning&lt;/a&gt;

.&lt;/li&gt;
&lt;li&gt;Nico Erfurth pointed me to the Youtube-Video
&lt;a href=&#34;https://www.youtube.com/watch?v=xKk7IXm0XO0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;How we are making Python 3.11 faster - presented by Mark Shannon&lt;/a&gt;

&lt;/li&gt;
&lt;li&gt;Raymond Hettinger: &amp;ldquo;Modern Python Dictionaries: A confluence of a dozen great ideas&amp;rdquo;, PyCon 2017](&lt;a href=&#34;https://www.youtube.com/watch?v=npw4s1QTmPg&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://www.youtube.com/watch?v=npw4s1QTmPg&lt;/a&gt;

)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://peps.python.org/pep-0412/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;PEP 412  Key-Sharing Dictionary&lt;/a&gt;

 by Mark Shannon, 2012&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>The Matrix Trashfire</title>
      <link>https://blog.koehntopp.info/2024/02/13/the-matrix-trashfire.html</link>
      <pubDate>Tue, 05 Dec 2023 05:06:07 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2024/02/13/the-matrix-trashfire.html</guid>
      <description>&lt;p&gt;For reasons, I tried to evaluate the distributed Matrix chat and their clients.
That did not work out very well.&lt;/p&gt;
&lt;h1 id=&#34;onboarding-experience&#34;&gt;
    &lt;a href=&#34;#onboarding-experience&#34;&gt;
	Onboarding experience
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;I was told that the default Matrix chat client is called Elements, so I looked it up on the iOS App store.
Unfortunately, there are two, &amp;ldquo;Element&amp;rdquo; and &amp;ldquo;Element X.&amp;rdquo;
No explanation is given, and no preference is stated.
&amp;ldquo;Element&amp;rdquo; is categorized business, &amp;ldquo;Element X&amp;rdquo; is in &amp;ldquo;Social Networking.&amp;rdquo;
Are they not the same?
They seem to be from the same company, though.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-01.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Element and Element X in the app store. Which one to use?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Ok, let&amp;rsquo;s open the descriptions.
They are identical, except for one sentence at the start:
&amp;ldquo;Element X is the future Element.&amp;rdquo;
So it&amp;rsquo;s a beta?
Why is it not labeled as a Beta?&lt;/p&gt;
&lt;p&gt;On the desktop, going to &lt;a href=&#34;https://matrix.org&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Matrix.org&lt;/a&gt;

 plus two additional clicks take you to
&lt;a href=&#34;https://matrix.org/ecosystem/clients/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;the client page&lt;/a&gt;

, which offers&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-02.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The client page offers you, among others, both clients and also states which is available on what platform.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;So apparently &amp;ldquo;Element X&amp;rdquo; is beta and not yet available on all platforms. I open the macOS App Store and&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-03.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;macOS does not offer Element, only Element X.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Apparently matrix.org lied to me.
Element X is available on iOS and macOS, Element is not.&lt;/p&gt;
&lt;p&gt;Ok, let&amp;rsquo;s install Element X and try:&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-04.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Element X wants me to sign in to matrix.org. There is no &amp;lsquo;sign up&amp;rsquo; Button. There is no sign-up menu.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;The client wants me to log in to matrix.org. There is no button to make an account. There is no menu to make an account.
There is zero onboarding for new users.&lt;/p&gt;
&lt;p&gt;Ok, let&amp;rsquo;s go to matrix.org again, and see.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-05.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The matrix.org Website is not very helpful. But when you notice the burger menu, there is actually a &amp;ldquo;Try Matrix&amp;rdquo; button.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;The matrix.org website is a very empty clean screen that is not very helpful. There is a burger menu, though,
and if you open it, you get a &amp;ldquo;Try Matrix&amp;rdquo; button.
This leads to another screen that tells you to use your organizations server instance (What organization? I&amp;rsquo;m alone!),
or install a server,
or choose a public server.
If you opt for Public Servers, you land here:&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-06.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;matrix.org server instances, alphabetically sorted, with little additional information.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Matrix.org is conspicuously absent from this list.
The rest I do not know anything about.&lt;/p&gt;
&lt;p&gt;I can now research what server instance I want to join.
Unfortunately, I do not get information about what their country is.
I can&amp;rsquo;t see if they are subject to GDPR rules.
I don&amp;rsquo;t know if they are owned by a company or run by a single private person.
There is no indication how many users they have.&lt;/p&gt;
&lt;p&gt;I can dig through their privacy policies and rules, except that some don&amp;rsquo;t provide any.&lt;/p&gt;
&lt;p&gt;Scrolling down, I end up with the option to onboard to this:&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-07.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Servers marked as vulnerable, unavailable and with profanity in their name.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Why in heaven or earth would anybody put unavailable or vulnerable servers into an onboarding listing?
Isn&amp;rsquo;t this supposed a &amp;ldquo;secure&amp;rdquo; messenger?&lt;/p&gt;
&lt;h1 id=&#34;trying-to-use-it-nontheless&#34;&gt;
    &lt;a href=&#34;#trying-to-use-it-nontheless&#34;&gt;
	Trying to use it, nontheless
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;I made an &amp;ldquo;isotopp&amp;rdquo; account at &lt;a href=&#34;https://chat.tchncs.de/#/login&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;tchncs.de&lt;/a&gt;

.
The password is generated and stored in Bitwarden.
A validation mail is sent to a unique address at koehntopp.de and arrives.&lt;/p&gt;
&lt;p&gt;I try to login not being validated, using Bitwarden.
The login is rejected.&lt;/p&gt;
&lt;p&gt;I validate the email.
The server says I am validated.&lt;/p&gt;
&lt;p&gt;I try to login, using Bitwarden.
The login is rejected.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-09.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;I am trying to recover the password for the account which I just validated, using the email from the verification mail.
The account is unknown.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I click on &amp;ldquo;forgotten password&amp;rdquo;, and supply the mail adress the validation mail was sent to.
&amp;ldquo;This email address was not found.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;Okay, since my account does not exist, I create it again:&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-10.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;I recreate my account, using the same mail address. As you can see, the first registration mail still is in the account.
I take the validation URL, which is longer than 80 characters, and use it to successfully validate, again.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I create the account again, using the same parameters.
The account validation mail is sent to my address.
The old account validation mail is also still in the account.
I take the new URL, which is longer than 80 characters, and use it to successfully validate my account, again.&lt;/p&gt;
&lt;p&gt;This time I accidentally left the &amp;ldquo;create account&amp;rdquo; window open.
This window is now suddenly logged in.
Turns out, you MUST NOT, UNDER ANY CIRCUMSTANCES, close the &amp;ldquo;create account&amp;rdquo; window until the account is validated,
or it is simply not created.
This is not stated anywhere.&lt;/p&gt;
&lt;p&gt;To confirm the account works and the password in Bitwarden is stored successfully,
I log out and log in again.&lt;/p&gt;
&lt;p&gt;I get this:&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-11.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Unable to verify this device&lt;/strong&gt;
It looks like you don&amp;rsquo;t have a Security Key or any other devices you can verify against.
This device will not be able to access old encrypted messages.
In order to verify your identity on this device, you&amp;rsquo;ll need to reset your verification keys.*&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;What does that even mean?&lt;/p&gt;
&lt;h1 id=&#34;trying-element-x-with-my-account&#34;&gt;
    &lt;a href=&#34;#trying-element-x-with-my-account&#34;&gt;
	Trying Element X with my account
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Starting Element X, it tries to onboard me to Matrix.org.
I select &amp;ldquo;Change Server&amp;rdquo;, and get a form field where it says &amp;ldquo;matrix.org&amp;rdquo;.
I am overwriting it with &amp;ldquo;chat.tchncs.de&amp;rdquo;, which supposedly is my server.
At least that is what it says in the web client.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-12.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;That is not accepted.&lt;/p&gt;
&lt;p&gt;I take the URL from the browser and paste that instead.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-13.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;That is also not accepted, but I can learn more.
I click.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-14.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;The what?&lt;/p&gt;
&lt;p&gt;Turns out, while the Chat is running on &amp;ldquo;chat.tchncs.de&amp;rdquo;, this is not the &amp;ldquo;Identity Provider.&amp;rdquo;
That one is called &amp;ldquo;tchncs.de&amp;rdquo;.
You only learn this when you open your config menu in the web chat and look at Identifer shown there.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-15.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;Once you enter this, Element X and the web chat get hectic.
There is a new client, and both clients want to authenticate that the new device is legit.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-16.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;For that purpose, they display a set of Emojis, which look differently in the web client and the application,
and ask me if they are the same.
Helpful Emoji names are shown under the Emoji, and they are identical.
I simply click yes.&lt;/p&gt;
&lt;p&gt;After that, both clients can see my Chat, but the Element X Client still has no access to any chat history.
That is, because the client is unverified (so is the web client).&lt;/p&gt;
&lt;p&gt;When I close any client, I have to re-login, re-compare the Emojis, and all chat history is gone.&lt;/p&gt;
&lt;h1 id=&#34;after-onboarding&#34;&gt;
    &lt;a href=&#34;#after-onboarding&#34;&gt;
	After onboarding
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Why have I been trying this?&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-08.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;A friend was trying to use a Matrix messenger on their phone, and waited 9 hours for this to complete.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;A friend of mine was trying to re-install a Matrix messenger on their phone, and landed on the screen above.
This hung for 9 hours without any message or failure indication.
The application cannot detect if somebody is using the wrong recovery key for a different account.&lt;/p&gt;
&lt;p&gt;The friend tried to use an Android application, but the application was complaining about the account not being verified.
That is, the mail address in use was not confirmed, and for that reason the client would not be showing any chats.
At the same time, these chats were being sent to the unconfirmed mail address,
unencrypted,
as a reminder that he was missing out.&lt;/p&gt;
&lt;p&gt;According to him, you can&amp;rsquo;t delete a half-made unconfirmed account.
You also can&amp;rsquo;t rename an account.&lt;/p&gt;
&lt;p&gt;Apparently, you cannot create invite links for private chat rooms,
only invite people.
To do that, vector.im uses the very same dark patterns that LinkedIn uses to convince you to share your address book.&lt;/p&gt;
&lt;p&gt;With the unique mail-address used to sign up to Matrix, I am unfindable because only Matrix uses this specific mail address.&lt;/p&gt;
&lt;p&gt;Outside of Element, there are very few clients, most of them very old and not being updated within the last few years.&lt;/p&gt;
&lt;p&gt;All in all, this is a mess, and my recommendation is to avoid Matrix for at least two years.
It is not secure, it is actively user-hostile, and looks not well managed.&lt;/p&gt;
&lt;p&gt;This is a project in severe need of management changes, a thorough UX evaluation.
The design needs changes that make onboarding and usage smoother, encourage secure workflows,
keep accounts available, and encourage secure practice.
It also needs careful curation of servers and clients.
At the moment it is a trash fire.&lt;/p&gt;
&lt;h1 id=&#34;matrix-responds&#34;&gt;
    &lt;a href=&#34;#matrix-responds&#34;&gt;
	Matrix responds
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Added on 14-Feb-2024:
People at Matrix.org and Matrix developers have picked this up and responded in a very constructive way.
They cannot address all things because they are not in the realm of Matrix, but part of Element.
So far, no responses from Element.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://mastodon.matrix.org/@matrix/111924190165706931&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Matrix writes&lt;/a&gt;

:&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-17.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;well, this is a trashfire indeed.
Thanks for writing this up.
You&amp;rsquo;ve caught Element in the middle of their migration to Element X, and there&amp;rsquo;s a lot of legit feedback here:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Both E &amp;amp; EX should be in the macOS app store.&lt;/li&gt;
&lt;li&gt;EX should clearly be labelled WIP in appstores.
-It&amp;rsquo;s a mistake that matrix.org hurls people to servers.joinmatrix.org (which is not run by us);
until recently it defaulted to matrix.org for convenience.&lt;/li&gt;
&lt;li&gt;Keeping the &amp;ldquo;create account&amp;rdquo; window open is a pure bug.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://mastodon.matrix.org/@matrix/111924227099676114&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;The continue&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-18.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Verification UX in Element is a disaster, and being reworked in EX:
&lt;a href=&#34;https://github.com/element-hq/element-meta/blob/develop/docs/FTUE.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github link&lt;/a&gt;

&lt;/li&gt;
&lt;li&gt;Element Android failing to compute a recovery key is clearly a bug too.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Your other complaints about Element UX (e.g. user discovery by email;
specifying the server URL) are also very familiar.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s not true to say vector.im uses &amp;ldquo;the very same dark patterns as LinkedIn&amp;rdquo; for contact discovery though;
&lt;a href=&#34;https://github.com/matrix-org/matrix-spec-proposals/blob/hs/hash-identity/proposals/2134-identity-hash-lookup.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github link&lt;/a&gt;


explains how it works (and is strictly opt-in).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Matrix Director of Program Development &lt;a href=&#34;https://mamot.fr/@thibaultamartin/111924256997285624&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Thibault A. Martin responds&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/element-19.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Hej @isotopp I&amp;rsquo;m one of the maintainers of the matrix.org website.&lt;/p&gt;
&lt;p&gt;Your post provides a very valuable perspective.
I gathered the following gripes that we can address on the website itself in this issue:
&lt;a href=&#34;https://github.com/matrix-org/matrix.org/issues/2178&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Matrix.Org Issue 2178&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;If you have the time to let me know if I got things right,
that would be very useful!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Thanks for picking this up, people!
I very much hope that Matrix and Element eventually turn into something useful.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Snake Oil</title>
      <link>https://blog.koehntopp.info/2024/02/10/snake-oil.html</link>
      <pubDate>Sat, 10 Feb 2024 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2024/02/10/snake-oil.html</guid>
      <description>&lt;p&gt;Dieser Text ist auch in
&lt;a href=&#34;https://blog.koehntopp.info/2024/02/09/schlangenoel.html&#34;&gt;deutscher Sprache&lt;/a&gt;

 vorhanden.&lt;/p&gt;
&lt;p&gt;This week was &amp;ldquo;Broken Security Software Advertising Week.&amp;rdquo;&lt;/p&gt;
&lt;h1 id=&#34;fortigate-and-ivanti&#34;&gt;
    &lt;a href=&#34;#fortigate-and-ivanti&#34;&gt;
	Fortigate and Ivanti
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;First off, &lt;strong&gt;today&lt;/strong&gt; was Fortigate patch day:&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/schlangenoel-01.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;CVE-2024-23113, CVSSV3 Score 9.8, Unauthorized Code Execution, &amp;ldquo;Format String Bug&amp;rdquo;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&amp;ldquo;A use of &lt;a href=&#34;https://cwe.mitre.org/data/definitions/134.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;externally-controlled format string&lt;/a&gt;

 vulnerability
in FortiOS &lt;code&gt;fgfmd&lt;/code&gt; daemon may allow a remote unauthenticated attacker to execute arbitrary code or
commands via specially crafted requests.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;This is a case where a C function accepts a format string like &lt;code&gt;&amp;quot;Blah %s Nonsense&amp;quot;&lt;/code&gt;,
to assemble a log message or a command for a &lt;code&gt;system()&lt;/code&gt; call.
However, the developer did not statically set the format parameter of the command to a format string
(&lt;code&gt;snprintf(buffer, length, &amp;quot;Blah %s Nonsense&amp;quot;, user_input)&lt;/code&gt;),
but instead took the user input as the format
(&lt;code&gt;snprintf(buffer, length, user_input))&lt;/code&gt;.
The user input can thus be used to do all sorts of things.&lt;/p&gt;
&lt;p&gt;This is a mistake automatically detected by the usual source code scanners.
If you try to commit or merge something like this in a modern development environment,
the scanner will thoroughly humiliate you,
the commit will be rejected, and you will be assigned a security training.&lt;/p&gt;
&lt;p&gt;This means this type of error does not occur in a contemporary development environment anymore.&lt;/p&gt;
&lt;p&gt;Also, &lt;strong&gt;yesterday&lt;/strong&gt; was Fortigate patch day:&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/schlangenoel-02.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;CVE-2024-21762, CVSSV3 Score 9.6, Unauthorized Code Execution, &amp;ldquo;Out of Bounds Write&amp;rdquo;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&amp;ldquo;A &lt;a href=&#34;https://cwe.mitre.org/data/definitions/787.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;out-of-bounds write&lt;/a&gt;

 vulnerability
in FortiOS may allow a remote unauthenticated attacker to execute arbitrary code or command via specially crafted HTTP requests.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;This is a mistake easily made in C or other languages without index checking when accessing arrays.
In C, for example, one can access memory before the array using negative indices,
and if an error code is -1, but the error code is not checked after a function call, then everything goes up in flames.&lt;/p&gt;
&lt;p&gt;This type of error is not always found by source code scanners with a static analyzer,
but most cases should be flagged by the scanner as a code smell.&lt;/p&gt;
&lt;p&gt;Well, unfortunately, &lt;strong&gt;the day before yesterday&lt;/strong&gt; was also a Fortigate patch day.
&lt;a href=&#34;https://www.bleepingcomputer.com/news/security/fortinet-warns-of-new-fortisiem-rce-bugs-in-confusing-disclosure/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;BleepingComputer reports&lt;/a&gt;

:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In this instance, due to an issue with the API which we are currently investigating,
rather than an edit, this resulted in two new CVEs being created, duplicates of the original CVE-2023-34992,
FortiNet told BleepingComputer.&lt;/p&gt;
&lt;p&gt;However, it turns out that CVE-2024-23108 and CVE-2024-23109 are actually patch bypasses for the CVE-2023-34992
flaw discovered by Horizon3 vulnerability expert Zach Hanley.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So, this was a patch for a patch because the mitigation didn&amp;rsquo;t work,
and Fortinet got confused with the CVE numbers due to the sheer volume of them currently open.&lt;/p&gt;
&lt;p&gt;Meanwhile, the US CISA (Cybersecurity and Infrastructure Security Agency)
is demanding all US institutions to shut down Ivanti VPN (formerly Juniper Pulse Secure):&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/schlangenoel-03.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&amp;ldquo;CISA is requiring all Federal agencies to disconnect Ivanti products by Friday at midnight
(Ivanti Connect Secure &amp;amp; Ivanti Policy Secure).
This is roughly 48-hours notice, to not patch, but rip it out!
Ivanti is an American company.
This is unprecedented.&amp;rdquo;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;While the
&lt;a href=&#34;https://www.cisa.gov/news-events/directives/supplemental-direction-v1-ed-24-01-mitigate-ivanti-connect-secure-and-ivanti-policy-secure&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;original directive&lt;/a&gt;


could initially be interpreted as an update, re-installation, and reconfiguration, this hope has now been dashed.&lt;/p&gt;
&lt;p&gt;The patches mentioned are not suitable for fixing the error.
&lt;a href=&#34;https://infosec.exchange/@briankrebs/111863433959430768&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Brian Krebs has summarized this issue&lt;/a&gt;

:&lt;/p&gt;
&lt;p&gt;Meanwhile, someone opened up the Ivanti image and took a look inside.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/schlangenoel-04.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Versions of software that have been routinely outdated for more than a decade in the current image.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;As curl developer Stefan Eissing phrases it, these are &amp;ldquo;corpse parts and zombie software.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;And, as expected, a few days after the CISA-mandated patch frenzy,
&lt;a href=&#34;https://www.bleepingcomputer.com/news/security/ivanti-patch-new-connect-secure-auth-bypass-bug-immediately/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;BleepingComputer headlines again&lt;/a&gt;

:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Ivanti: Patch new Connect Secure auth bypass bug immediately&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The flaw (CVE-2024-22024) is due to an XXE
(&lt;a href=&#34;https://cwe.mitre.org/data/definitions/611.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;XML eXternal Entities&lt;/a&gt;

) weakness in the gateways&amp;rsquo; SAML component
that lets remote attackers gain access to restricted resources on unpatched appliances in low-complexity
attacks without requiring user interaction or authentication.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;SAML, Security Assertion Markup Language, is an XML notation for access rights in Single Sign-On systems.
Because it&amp;rsquo;s an XML notation, it can have these &lt;code&gt;&amp;amp;blablub;&lt;/code&gt; things  Entities  that are replaced by other text.
With External Entities, the replacement text is not locally fixed but is downloaded from the net.&lt;/p&gt;
&lt;p&gt;What does this mean in the context of SAML?
It means that the access rights in the document are not necessarily fixed;
an attacker can load Entity definitions from the net.
Depending on where the Entity is used, it can partially or completely rewrite the SAML file and grant different rights.&lt;/p&gt;
&lt;p&gt;XML parsers are well understood,
and XXE is something that can be reliably scanned for automatically with a source code scanner.
This type of error is easily avoidable in modern development environments.&lt;/p&gt;
&lt;h1 id=&#34;antivirus-and-endpoint-security&#34;&gt;
    &lt;a href=&#34;#antivirus-and-endpoint-security&#34;&gt;
	Antivirus and Endpoint Security
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;This is not an exception and is not limited to VPN gateways,
but rather manufacturers of security software happily rely on
&amp;ldquo;security-relevant software with privileges, and programming methods from the 90s of the last millennium.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;Examples from this blog:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.koehntopp.info/2017/10/20/aslr.html&#34;&gt;ASLR&lt;/a&gt;

: macOS Trend Micro Binary without ASLR, every exploit (yes, there are some)
automatically stable across the entire fleet.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.koehntopp.info/2018/06/18/websense-dlp-gives-instant-root.html&#34;&gt;Websense DLP gives instant root&lt;/a&gt;

:
WebSense DLP ships outdated software versions and an exploitable kernel module, probably missing QA and defective shipping process.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is so widespread in endpoint security that, for example,
&lt;a href=&#34;https://mastodon.social/@joxean&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@joxean&lt;/a&gt;


has written an entire book about it:
&lt;a href=&#34;https://www.amazon.de/Antivirus-Hackers-Handbook-English-ebook/dp/B014MJ6AKS&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;The Antivirus Hacker&amp;rsquo;s Handbook&lt;/a&gt;

.
It describes how to find vulnerabilities of this kind in every  literally every  AV software.&lt;/p&gt;
&lt;p&gt;This is systematic: It is due to the way this software is designed and developed, and it cannot be fixed with patches.&lt;/p&gt;
&lt;p&gt;I know this because I played this game for a few years with a company Mac:
I used the so-called &amp;ldquo;security tools&amp;rdquo; that Corp installed on my Mac to gain privileges on my Mac.&lt;/p&gt;
&lt;p&gt;The whole process is reliably repeatable, and I never had to invest more than a slow Friday afternoon in any case.
And I am not even a &amp;ldquo;security researcher,&amp;rdquo; just an amateur with reverse engineering experience from the C64 era.&lt;/p&gt;
&lt;p&gt;It is this software, which is supposed to protect, ending up making the computer vulnerable.
When someone like Fefe talks about &lt;a href=&#34;https://blog.fefe.de/?q=Schlangen&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;snake oil&lt;/a&gt;

, it is to be taken literally.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/schlangenoel-05.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Snake_oil&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Snake-Oil&lt;/a&gt;

 is a term used to describe deceptive marketing,
health care fraud, or a scam.
Similarly, snake oil salesman is a common label used to describe someone who sells, promotes,
or is a general proponent of some valueless or fraudulent cure, remedy, or solution.&lt;/em&gt;&lt;/p&gt;
&lt;h1 id=&#34;a-list-of-problems-and-outdated-processes&#34;&gt;
    &lt;a href=&#34;#a-list-of-problems-and-outdated-processes&#34;&gt;
	A List of Problems and Outdated Processes
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;We are talking about critically security-relevant software here,
which is supposed to prevent the intrusion of malware and attackers on computers,
or is supposed to detect such attacks, or has authentication or some other form of security-relevant function.&lt;/p&gt;
&lt;p&gt;It runs at critical points, often with privileges, and when it fails, it is not just one machine,
but often an entire company that is critically exposed.&lt;/p&gt;
&lt;p&gt;Such software should be developed with tools and methods that are state-of-the-art
and undergo critical inspection with regard to correctness, freedom from errors, and currency of dependencies.&lt;/p&gt;
&lt;p&gt;However, we see errors that suggest deficiencies in the development process at all points.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We are seeing critical errors that would not have to have major problematic impact
if the software had been written with minimal rights from the outset.
But running parsers for complex, unknown data formats that may contain potentially malicious payloads with privileges?
And then turning off elementary security mechanisms such as ASLR?
That means setting up for maximum damage.
It is not a winnable position.&lt;/li&gt;
&lt;li&gt;Doing all this in 2024 in C, when Go or Rust could have been used? Not particularly smart either.&lt;/li&gt;
&lt;li&gt;Packing your deliverables with software that, in the case of Ivanti, has been without patches for up to two decades?
Correct would be to have an automated release process that assembles a new release from the latest versions of everything
and tests it automatically.
What Ivanti delivers is not just &amp;ldquo;not state-of-the-art,&amp;rdquo; it is grossly negligent.&lt;/li&gt;
&lt;li&gt;Delivering all this in an encrypted image, instead of with a &amp;ldquo;SBOM of Shame&amp;rdquo;
is soon to be a federal crime in the USA, and the EU is on the same path. Good.
(An SBOM is a Software Bill Of Materials, a list of the dependencies used and their versions.)&lt;/li&gt;
&lt;li&gt;A &amp;ldquo;Format String Bug&amp;rdquo; or an &amp;ldquo;XML External Entities Vulnerability&amp;rdquo; are trivial errors that source code scanners can detect.
Such source scanners are being advertised by these security firms themselves or even developed in-house.
But these tools are not in use internally, because otherwise, such code could never have made it into a product.
This does not require AI; in part, these are better regular expressions, sometimes a bit of static analysis.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As external observers, based on the demonstrated error patterns,
we are witnessing a failure along the entire software development chain:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;At the architecture level (not minimizing rights),&lt;/li&gt;
&lt;li&gt;at the tool level (no scanners for trivial errors, outdated dependencies, no automation in build and release),&lt;/li&gt;
&lt;li&gt;at the packaging level (the defective permissions in Websense, for example),&lt;/li&gt;
&lt;li&gt;and at every other point where one can infer the process from the errors observed from the outside.
&lt;ul&gt;
&lt;li&gt;For example, &amp;ldquo;no functioning code review and audit&amp;rdquo;
(&amp;ldquo;statically compiled-in backdoor passwords,&amp;rdquo; as are a persistent problem at Cisco, fall under this).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These are thus management errors in the leadership of software companies that produce security-critical software.
It is the responsibility of management to establish and control processes that ensure a minimum level of quality.&lt;/p&gt;
&lt;p&gt;The notion &amp;ldquo;software errors, nothing can be done about it&amp;rdquo; is incorrect 
there are entire classes of errors that can be definitively avoided through architecture,
automatic scanning,
education,
review,
and testing.
It is the responsibility of management to establish and control such processes.&lt;/p&gt;
&lt;p&gt;All in all, one can only conclude that irresponsible hack shops without fundamental software development processes
are masquerading as &amp;ldquo;security&amp;rdquo; companies.
They are packaging radioactive toxic waste in glossy packages,
thereby building a highway for nation-state actors into the heart of critical infrastructures.&lt;/p&gt;
&lt;p&gt;In some cases, the nature of the error borders on deliberate sabotage, or,
to put it another way, it could hardly be worse with deliberate sabotage.&lt;/p&gt;
&lt;h1 id=&#34;1010-no-notes&#34;&gt;
    &lt;a href=&#34;#1010-no-notes&#34;&gt;
	10/10, no notes
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;On IRC, my friends joke:
&amp;ldquo;Are you a 10/10 company?&amp;rdquo;&lt;/p&gt;
&lt;p&gt;Security vulnerabilities are not only assigned a unique number, the CVE number,
but they also receive a severity grade,
the &lt;a href=&#34;https://en.wikipedia.org/wiki/Common_Vulnerability_Scoring_System&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CVSS-Score&lt;/a&gt;

.
A 10/10 is the maximum grade, but basically, anything above 8 is considered
&lt;a href=&#34;https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;a total loss and complete process failure&lt;/a&gt;

.&lt;/p&gt;
&lt;p&gt;There is now a historical CVE database that can be
&lt;a href=&#34;https://www.cvedetails.com/vulnerability-list/cvssscoremin-9/cvssscoremax-10/vulnerabilities.html?page=1&amp;amp;cvssscoremin=9&amp;amp;cvssscoremax=10&amp;amp;order=3&amp;amp;trc=40515&amp;amp;sha=2721cbf47ba1e57d8b65ae1c3cf8883295fd04d7&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;sorted by CVSS score&lt;/a&gt;

,
and also narrowed down to companies like
&lt;a href=&#34;https://www.cvedetails.com/vulnerability-list/vendor_id-3080/Fortinet.html?page=1&amp;amp;cvssscoremin=9&amp;amp;order=3&amp;amp;trc=103&amp;amp;sha=0ba96ce0b5ea0195196988ef1d381bdd33622c49&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fortinet&lt;/a&gt;

.&lt;/p&gt;
&lt;p&gt;We then see for Fortinet a series of 12 errors with a 10/10 rating,
specifically 2x in 2024, 1x in 2021, 1x in 2019, 3x in 2017, 4x in 2016, and once in 2005.
This can also be summarized as &amp;ldquo;no improvement is observable.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&amp;ldquo;Security is a process,&amp;rdquo; it is often said.
For Business Continuity Management, I once wrote down what that means:
&lt;a href=&#34;https://blog.koehntopp.info/2023/02/18/this-is-not-a-drill.html&#34;&gt;This is not a Drill. This is just Tuesday&lt;/a&gt;

.&lt;/p&gt;
&lt;p&gt;Similar considerations can be made for secure software development processes,
and there are even ready-made process blueprints available for this purpose.
Furthermore, as I have shown, the patterns of errors can reveal the weaknesses in the internal development process
with regard to security best practices.
The numbers of CVEs and CVSS scores can indicate whether a company has improved its posture.&lt;/p&gt;
&lt;p&gt;If it is apparent that this has not been the case over the years, how can a purchasing decision be made positively?
Something to think about.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/meerschweinchen-anne.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Some things can only be made bearable with cute guinea pig photos.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Schlangenl</title>
      <link>https://blog.koehntopp.info/2024/02/09/schlangenoel.html</link>
      <pubDate>Fri, 09 Feb 2024 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2024/02/09/schlangenoel.html</guid>
      <description>&lt;p&gt;This text also has a version in
&lt;a href=&#34;https://blog.koehntopp.info/2024/02/10/snake-oil.html&#34;&gt;english language&lt;/a&gt;

.&lt;/p&gt;
&lt;p&gt;Diese Woche war &amp;ldquo;Kaputte Security Software Werbewoche&amp;rdquo;.&lt;/p&gt;
&lt;h1 id=&#34;fortigate-und-ivanti&#34;&gt;
    &lt;a href=&#34;#fortigate-und-ivanti&#34;&gt;
	Fortigate und Ivanti
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Zunchst einmal war &lt;strong&gt;heute&lt;/strong&gt; Fortigate Patchday:&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/schlangenoel-01.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;CVE-2024-23113, CVSSV3 Score 9.8, Unauthorized Code Execution, &amp;ldquo;Format String Bug&amp;rdquo;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&amp;ldquo;A use of &lt;a href=&#34;https://cwe.mitre.org/data/definitions/134.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;externally-controlled format string&lt;/a&gt;

 vulnerability
in FortiOS &lt;code&gt;fgfmd&lt;/code&gt; daemon may allow a remote unauthenticated attacker to execute arbitrary code or
commands via specially crafted requests.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;Das ist ein Fall, wo eine C-Funktion einen Formatstring mit &lt;code&gt;&amp;quot;Bla %s Fasel&amp;quot;&lt;/code&gt; annimmt,
um etwa eine Log-Nachricht oder ein Kommando fr einen &lt;code&gt;system()&lt;/code&gt; Aufruf zusammenzubauen.
Der Entwickler hat jedoch den Format-Parameter des Kommandos nicht statisch auf einen Formatstring gesetzt
(&lt;code&gt;snprintf(buffer, length, &amp;quot;Bla %s Fasel&amp;quot;, benutzereingabe)&lt;/code&gt;),
sondern stattdessen die Benutzereingabe als Format genommen
(&lt;code&gt;snprintf(buffer, length, benutzereingabe)&lt;/code&gt;).
Die Benutzereingabe kann so verwendet werden, um alles Mgliche zu tun.&lt;/p&gt;
&lt;p&gt;Das ist ein Fehler, der von den blichen Sourcecodescannern automatisch erkannt wird,
und wenn man in einer modernen Entwicklungsumgebung versucht, so etwas zu comitten oder zu mergen,
dann wird man vom Scanner ganz furchtbar erniedrigt, der Commit zurckgewiesen und man bekommt ein Security-Training zugewiesen.&lt;/p&gt;
&lt;p&gt;Will sagen, dieser Fehler tritt in einer zeitgemen Development-Umgebung nicht mehr auf.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Auch gestern&lt;/strong&gt; war Fortigate Patchday:&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/schlangenoel-02.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;CVE-2024-21762, CVSSV3 Score 9.6, Unauthorized Code Execution, &amp;ldquo;Out of Bounds Write&amp;rdquo;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&amp;ldquo;A &lt;a href=&#34;https://cwe.mitre.org/data/definitions/787.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;out-of-bounds write&lt;/a&gt;

 vulnerability
in FortiOS may allow a remote unauthenticated attacker to execute arbitrary code or command via specially crafted HTTP requests.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;Das ist ein Fehler, der in C oder anderen Sprachen ohne Indexprfung beim Zugriff auf Arrays gerne gemacht wird.
In C kann man zum Beispiel mit negativen Indices auf Speicher vor dem Array zugreifen, und
wenn ein Error-Code &lt;code&gt;-1&lt;/code&gt; ist, aber nach einem Funktionsaufruf der Error-Code nicht geprft wird,
dann brennt alles nieder.&lt;/p&gt;
&lt;p&gt;Diese Sorte Fehler wird von Source Code Scannern mit statischem Analyzer nicht immer gefunden,
aber meistens und alle Flle, wo das nicht passiert, sollten von dem Ding eigentlich als Code Smell angemerkt werden.&lt;/p&gt;
&lt;p&gt;Nun. Leider war &lt;strong&gt;auch vorgestern&lt;/strong&gt; Fortigate Patchday.
&lt;a href=&#34;https://www.bleepingcomputer.com/news/security/fortinet-warns-of-new-fortisiem-rce-bugs-in-confusing-disclosure/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;BleepingComputer schreibt&lt;/a&gt;

:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In this instance, due to an issue with the API which we are currently investigating,
rather than an edit, this resulted in two new CVEs being created, duplicates of the original CVE-2023-34992,
FortiNet told BleepingComputer.&lt;/p&gt;
&lt;p&gt;However, it turns out that CVE-2024-23108 and CVE-2024-23109 are actually patch bypasses for the CVE-2023-34992
flaw discovered by Horizon3 vulnerability expert Zach Hanley.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Das war also ein Patch fr einen Patch, weil die Mitigation nicht funktioniert hat und
Fortinet kam mit den CVE-Nummern durcheinander, weil gerade so viele davon offen sind.&lt;/p&gt;
&lt;p&gt;Unterdessen fordert die US CISA (Cybersecurity and Infrastructure Security Agency) von allen US-Institutionen das
Abschalten von Ivanti VPN (vormals Juniper Pulse Secure):&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/schlangenoel-03.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&amp;ldquo;CISA is requiring all Federal agencies to disconnect Ivanti products by Friday at midnight
(Ivanti Connect Secure &amp;amp; Ivanti Policy Secure).
This is roughly 48-hours notice, to not patch, but rip it out!
Ivanti is an American company.
This is unprecedented.&amp;rdquo;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Whrend man
&lt;a href=&#34;https://www.cisa.gov/news-events/directives/supplemental-direction-v1-ed-24-01-mitigate-ivanti-connect-secure-and-ivanti-policy-secure&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;die Originaldirektive&lt;/a&gt;


ursprnglich noch als Update und Reinstallation sowie Neukonfiguration lesen konnte
hat sich diese Hoffnung mittlerweile zerschlagen.&lt;/p&gt;
&lt;p&gt;Die Patches, von denen dort die Rede ist, sind nicht geeignet, den Fehler zu beheben.
&lt;a href=&#34;https://infosec.exchange/@briankrebs/111863433959430768&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Brian Krebs hat das zusammengefasst&lt;/a&gt;

.&lt;/p&gt;
&lt;p&gt;Unterdessen hat jemand das Ivanti Image mal aufgemacht und reingesehen.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/schlangenoel-04.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Versionen von Software, die routinemig seit mehr als einer Dekade veraltet sind in einem aktuellen Image.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Das sind, wie curl-Entwickler Stefan Eissing formuliert &amp;ldquo;Leichenteile und Zombie Software&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Und, es kommt, wie es kommen muss:
Einige Tage nach der von CISA vorgeschriebenen Patchorgie
&lt;a href=&#34;https://www.bleepingcomputer.com/news/security/ivanti-patch-new-connect-secure-auth-bypass-bug-immediately/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;titelt BleepingComputer erneut&lt;/a&gt;

:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Ivanti: Patch new Connect Secure auth bypass bug immediately&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The flaw (CVE-2024-22024) is due to an XXE
(&lt;a href=&#34;https://cwe.mitre.org/data/definitions/611.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;XML eXternal Entities&lt;/a&gt;

) weakness in the gateways&amp;rsquo; SAML component
that lets remote attackers gain access to restricted resources on unpatched appliances in low-complexity
attacks without requiring user interaction or authentication.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;SAML, Security Assertion Markup Language, ist eine XML-Notation fr Zugriffsrechte in Single-Sign-On Systemen.
Weil es eine XML-Notation ist, kann es dort diese &lt;code&gt;&amp;amp;blablub;&lt;/code&gt;-Dinger geben  Entities  die durch anderen Text ersetzt werden.
Bei External Entities liegt der Ersetzungstext nicht lokal fest, sondern wird aus dem Netz nachgeladen.&lt;/p&gt;
&lt;p&gt;Was heit das im Kontext von SAML? Es bedeutet, die Zugriffsrechte sind im Dokument also nicht zwingend festgenagelt,
sondern ein Angreifer kann Entity Definitionen aus dem Netz nachladen.
Je nachdem, wo die Entity verwendet wird, kann man damit die SAML-Datei in Teilen oder ganz umschreiben und sich andere Rechte geben.&lt;/p&gt;
&lt;p&gt;XML-Parser sind gut verstanden und XEE sind ein Ding, auf das man mit einem Sourcecode-Scanner zuverlssig automatisch scannen kann.
Diese Sorte Fehler ist in modernen Entwicklungsumgebungen gut auszuschlieen.&lt;/p&gt;
&lt;h1 id=&#34;antivirus-und-endpoint-security&#34;&gt;
    &lt;a href=&#34;#antivirus-und-endpoint-security&#34;&gt;
	Antivirus und Endpoint Security
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Das ist alles keine Ausnahme und auch nicht auf VPN-Gateways beschrnkt,
sondern Hersteller von Security Software setzen frhlich auf
&amp;ldquo;Security-Relevante Software mit Privilegien, und Programmiermethoden aus den 90er Jahren des letzten Jahrtausends&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Beispiele aus diesem Blog:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.koehntopp.info/2017/10/20/aslr.html&#34;&gt;ASLR&lt;/a&gt;

: MacOS Trend Micro Binary mit ohne ASLR, jeder Exploit
(ja, es gibt welche) ist automatisch stabil ber die ganze Flotte.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.koehntopp.info/2018/06/18/websense-dlp-gives-instant-root.html&#34;&gt;Websense DLP gives instant root&lt;/a&gt;

:
WebSense DLP veraltete Softwareversionen und exploitbares Kernelmodul, vermutlich fehlende QA und defekter Shipping Prozess.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Das ist bei Endpoint Security so verbreitet, da zum Beispiel
&lt;a href=&#34;https://mastodon.social/@joxean&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@joxean&lt;/a&gt;

 ein ganzes Buch darber geschrieben hat:
&lt;a href=&#34;https://www.amazon.de/Antivirus-Hackers-Handbook-English-ebook/dp/B014MJ6AKS&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;The Antivirus Hacker&amp;rsquo;s Handbook&lt;/a&gt;

.
beschreibt, wie man Sicherheitslcken dieser Art in jeder, wirklich jeder AV Software findet.&lt;/p&gt;
&lt;p&gt;Das ist systematisch:
Es liegt an der der Art und Weise, wie diese Software designt und entwickelt wird,
und es ist auch mit Patchs nicht zu beheben.&lt;/p&gt;
&lt;p&gt;Ich wei das, weil ich dieses Spiel einige Jahre mit einem Firmen-Mac gespielt habe:
Ich habe die sogenannten &amp;ldquo;Security Tools&amp;rdquo; verwendet, die Corp auf meinem Mac installiert, um auf meinem Mac Privilegien zu bekommen.&lt;/p&gt;
&lt;p&gt;Der ganze Prozess ist zuverlssig wiederholbar,
und ich habe in keinem Fall mehr als einen langsamen Freitagnachmittag dafr investieren mssen.
Dabei bin ich noch nicht einmal &amp;ldquo;Security-Researcher&amp;rdquo;,
sondern nur ein Amateur mit Reverse-Engineering Erfahrung aus dem C64-Zeitalter.&lt;/p&gt;
&lt;p&gt;Es ist diese Software, die angeblich schtzen soll, die am Ende dazu fhrt, da der Rechner angreifbar wird.
Wenn jemand wie Fefe von &lt;a href=&#34;https://blog.fefe.de/?q=Schlangen&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Schlangenl&lt;/a&gt;

 redet, dann ist das wortwrtlich zu verstehen.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/schlangenoel-05.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;


&lt;em&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Snake_oil&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Snake-Oil&lt;/a&gt;

 is a term used to describe deceptive marketing,
health care fraud, or a scam.
Similarly, snake oil salesman is a common label used to describe someone who sells, promotes,
or is a general proponent of some valueless or fraudulent cure, remedy, or solution.&lt;/em&gt;&lt;/p&gt;
&lt;h1 id=&#34;eine-problemliste-und-veraltete-prozesse&#34;&gt;
    &lt;a href=&#34;#eine-problemliste-und-veraltete-prozesse&#34;&gt;
	Eine Problemliste und veraltete Prozesse
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Wir reden hier von kritisch security-relevanter Software,
die das Eindringen von Schadsoftware und Angreifern auf Rechnern verhindern soll,
oder die solche Angriffe erkennen soll,
oder die Authentisierung oder sonst eine Form von sicherheitsrelevanter Funktion hat.&lt;/p&gt;
&lt;p&gt;Sie luft an kritischer Stelle, oft mit Privilegien und wenn sie versagt, ist meist nicht nur eine Maschine,
sondern eine ganze Firma kritisch exponiert.&lt;/p&gt;
&lt;p&gt;Solche Software sollte eigentlich mit Werkzeugen und Methoden, die Stand der Technik sind, entwickelt werden
und besonderer Beobachtung hinsichtlich Korrektheit, Fehlerfreiheit und Aktualitt von Dependencies unterliegen.&lt;/p&gt;
&lt;p&gt;Wir sehen jedoch Fehler, die auf Defizite im Entwicklungsproze an allen Stellen schlieen lassen.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Wir sehen kritische Fehler, die keine gro problematischen Auswirkungen haben mten,
wenn die Software von vorher herein rechteminimal geschrieben worden wre.
Aber Parser fr komplexe, unbekannte Datenformate, die potenziell bsartige Payloads enthalten,
mit Privilegien laufen zu lassen?
Und dann noch elementare Sicherheitsmechanismen des Betriebssystems abschalten?
Das bedeutet, sich fr Maximalschaden aufzustellen.
Es ist keine gewinnbare Position.&lt;/li&gt;
&lt;li&gt;Das alles in 2024 in C zu tun, wenn man Go oder Rust zur Verfgung htte?
Auch nicht sonderlich schlau.&lt;/li&gt;
&lt;li&gt;Seine Deliverables mit Software vollzupacken, die im Fall von Ivanti bis zu zwei Dekaden
ohne Patches auf dem Buckel hat, anstatt einen automatisierten Release-Prozess zu haben, der ein neues
Release aus den neusten Versionen von allem zusammenschraubt und automatisch testet?
Das ist nicht nur &amp;ldquo;nicht Stand der Technik&amp;rdquo;, sondern es ist grob fahrlssig.&lt;/li&gt;
&lt;li&gt;Das alles dann in einem verschlsselten Image auszuliefern, statt mit einer &amp;ldquo;SBOM of Shame&amp;rdquo;
(Software Bill Of Materials, eine Liste der verwendeten Dependencies und ihrer Versionen)
ist bald schon ein Federal Crime in den USA, und auch die EU ist auf diesem Weg.
Gut so.&lt;/li&gt;
&lt;li&gt;Ein &amp;ldquo;Format String Bug&amp;rdquo; oder eine &amp;ldquo;XML External Entities Vulnerability&amp;rdquo; sind triviale Fehler,
die Source Code Scanner erkennen knnen, wie sie von diesen Securityfirmen selbst beworben
oder gar im eigenen Haus entwickelt werden.
Aber offensichtlich sind diese Werkzeuge im Hause nicht im Einsatz, denn sonst htte solcher Code niemals in
ein Produkt gelangen knnen.
Dazu braucht es keine KI, teilweise sind das bessere Regular Expressions, manchmal ein bisschen statische Analyse.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Wir beobachten hier als Auenstehende auf der Grundlage der gezeigten Fehlerbilder ein
Versagen entlang der gesamten Software Development Chain:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Auf der Architektur-Ebene (nicht rechteminimal),&lt;/li&gt;
&lt;li&gt;auf der Tool-Ebene (keine Scanner fr triviale Fehler, veraltete Dependencies, keine Automation beim Build und Release)&lt;/li&gt;
&lt;li&gt;auf der Packaging-Ebene (die defekten Permissions bei Websense zum Beispiel)&lt;/li&gt;
&lt;li&gt;und an jeder anderen Stelle, bei der man von auen durch die Fehler auf den Prozess rckschlieen kann.
&lt;ul&gt;
&lt;li&gt;Zum Beispiel &amp;ldquo;kein funktionierender Code-Review und Audit&amp;rdquo;
(&amp;ldquo;statisch einkompilierte Backdoor-Passworte&amp;rdquo;, wie sie bei Cisco das Dauer-Fehlerbild sind, fallen darunter).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Es sind mithin Managementfehler bei der Fhrung von Software-Husern, die sicherheitskritische Software herstellen.
Es ist Aufgabe des Managements Prozesse einzurichten und zu steuern, die ein Mindestma an Qualitt sicherstellen.&lt;/p&gt;
&lt;p&gt;&amp;ldquo;Softwarefehler, kann man nichts machen&amp;rdquo; stimmt so nicht  es gibt ganze Klassen von Fehlern,
die man durch Architektur,
durch automatisches Scannen,
durch Ausbildung,
durch Review,
und durch Testen sicher ausschlieen kann,
und es ist die Aufgabe des Managements, solche Prozesse einzurichten und zu steuern.&lt;/p&gt;
&lt;p&gt;Alles in allem kann man nur zu dem Ergebnis kommen,
da hier verantwortungslose Hackerbuden ohne elementare Software-Entwicklungsprozesse als &amp;ldquo;Security&amp;rdquo;-Firmen auftreten
und radioaktiven Giftmll in Hochglanzpackungen abfllen,
um so eine Autobahn fr Nation State Actors ins Herz von kritischen Infrastrukturen zu bauen.&lt;/p&gt;
&lt;p&gt;Teilweise grenzt die Art der Fehler an mutwillige Sabotage,
beziehungsweise knnte man es auch mit mutwilliger Sabotage kaum schlimmer machen.&lt;/p&gt;
&lt;h1 id=&#34;1010-no-notes&#34;&gt;
    &lt;a href=&#34;#1010-no-notes&#34;&gt;
	10/10, no notes
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Im Chat witzeln Freunde von mir:
&amp;ldquo;Are you a 10/10 company?&amp;rdquo;&lt;/p&gt;
&lt;p&gt;Security-Lcken wird nicht nur eine eindeutige Nummer zugewiesen, die CVE-Nummer, sondern
sie bekommen auch einen Schweregrad, den &lt;a href=&#34;https://en.wikipedia.org/wiki/Common_Vulnerability_Scoring_System&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CVSS-Score&lt;/a&gt;

.
Eine 10/10 ist der Maximalgrad, aber im Grunde ist alles ber 8
ein &lt;a href=&#34;https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Totalschaden und komplettes Prozessversagen&lt;/a&gt;

.&lt;/p&gt;
&lt;p&gt;Es gibt nun eine historische CVE-Datenbank, die man
&lt;a href=&#34;https://www.cvedetails.com/vulnerability-list/cvssscoremin-9/cvssscoremax-10/vulnerabilities.html?page=1&amp;amp;cvssscoremin=9&amp;amp;cvssscoremax=10&amp;amp;order=3&amp;amp;trc=40515&amp;amp;sha=2721cbf47ba1e57d8b65ae1c3cf8883295fd04d7&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;nach CVSS sortieren kann&lt;/a&gt;

,
und auch auf Firmen wie
&lt;a href=&#34;https://www.cvedetails.com/vulnerability-list/vendor_id-3080/Fortinet.html?page=1&amp;amp;cvssscoremin=9&amp;amp;order=3&amp;amp;trc=103&amp;amp;sha=0ba96ce0b5ea0195196988ef1d381bdd33622c49&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fortinet einschrnken&lt;/a&gt;

.&lt;/p&gt;
&lt;p&gt;Wir sehen dann fr Fortinet eine Reihe von 12 Fehlern mit 10/10, und zwar
2x in 2024, 1x in 2021, 1x in 2019, 3x in 2017, 4x in 2016 und einmal in 2005.
Das kann man auch mit &amp;ldquo;Besserung ist nicht erkennbar&amp;rdquo; zusammenfassen.&lt;/p&gt;
&lt;p&gt;&amp;ldquo;Security ist ein Prozess&amp;rdquo; heit es.
Fr Business Continuity Management habe ich einmal aufgeschrieben, was das bedeutet:
&lt;a href=&#34;https://blog.koehntopp.info/2023/02/18/this-is-not-a-drill.html&#34;&gt;This is not a Drill. This is just Tuesday&lt;/a&gt;

.&lt;/p&gt;
&lt;p&gt;Analoge berlegungen kann man auch fr sichere Software-Entwicklungsprozesse anstellen,
und es gibt sogar fertige Prozess-Blueprints dafr.
Weiterhin kann man, wie ich gezeigt habe, an den Fehlerbildern erkennen, welche Schwchen der interne Entwicklungsprozess
hinsichtlich Security Best-Practices hat,
und an den CVE-Anzahlen und CVSS-Scores erkennen, ob eine Firma ihre Posture verbessert hat.&lt;/p&gt;
&lt;p&gt;Wenn das erkennbar ber Jahre nicht der Fall ist, wie kann dann eine Kaufentscheidung positiv beschieden werden?
Denkt mal darber nach.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/meerschweinchen-anne.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Manche Dinge sind nur durch niedliche Meerschweinchenfotos ertrglich zu machen.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Wie ChatGPT funktioniert</title>
      <link>https://blog.koehntopp.info/2024/02/06/wie-chatgpt-funktioniert.html</link>
      <pubDate>Tue, 06 Feb 2024 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2024/02/06/wie-chatgpt-funktioniert.html</guid>
      <description>&lt;p&gt;Es gibt einen wunderbaren Artikel von Stephen Wolfram,
&lt;a href=&#34;https://writings.stephenwolfram.com/2023/02/what-is-chatgpt-doing-and-why-does-it-work/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;What Is ChatGPT Doing  and Why Does It Work?&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;Dies ist ein etwa ein Jahr alter und langer Text, und man muss dran bleiben, wenn man ihn verstehen mchte.
Er erklrt wie ChatGPT intern funktioniert, warum das so viel Ressourcen kostet,
und er erklrt auch, da wir keine Ahnung haben, wieso das &amp;ldquo;funktioniert&amp;rdquo;.
Er zeigt aber auch, was ChatGPT alles prinzipbedingt niemals erreichen kann, und auch nicht lernen wird.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://writings.stephenwolfram.com/2023/02/what-is-chatgpt-doing-and-why-does-it-work/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-01.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&#34;https://writings.stephenwolfram.com/2023/02/what-is-chatgpt-doing-and-why-does-it-work/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;What is ChatGPT doing&lt;/a&gt;


von Stephen Wolfram vom 14. Februar 2023.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Stephen Wolfram ist ein Informatiker und Physiker,
der einen recht guten Prolog-Interpreter mit Regeln zur Termumformung und Fakten gefttert hat,
und dies unter dem Namen Mathematica vertreibt.&lt;/p&gt;
&lt;p&gt;Prolog ist eine deklarative Sprache, die vor 30 Jahren die Grundlage regelbasierter knstlicher Intelligenz-Forschung war.
Deklarative Sprachen wie SQL oder Prolog schreiben keine Programme, die dem Computer sagen, was zu tun ist,
sondern sie beschreiben das gewnschte Ergebnis.
Ein Programmgenerator, der Planer, versucht dann einen Ausfhrungspfad zu finden,
der das beschriebene Ergebnis auf eine effiziente Weise findet.&lt;/p&gt;
&lt;p&gt;Die Idee hinter diesem Ansatz in der KI-Forschung war, da man die Welt regelbasiert beschreiben knnte,
ein Welt-Wissensmodell bauen und da so &amp;ldquo;Intelligenz&amp;rdquo; entsteht.
Das war ein Fehlschlag, aber Mathematica ist eines der beeindruckendsten Arbeitssysteme fr Mathematik,
Physik-Visualisierung und Modellierung und alle verwandten Arbeiten.
Eine private Lizenz ist teuer, aber ich gnne mir die,
weil es so einen Heidenspa macht mit dem Ding zu arbeiten und Sachen auszuprobieren.
Rein optisch und von der Arbeitsweise ist Jupyter ein gnadenloser Mathematica-Clone,
aber in Mathematica steckt eine komplett andere Sprache (etwas, das mal ein Prolog war) und eine viel, viel grere Bibliothek.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-02.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Ein Mathematica Arbeitsblatt, das die Approximation von Rechteckwellen durch Fouriersynthese zeigt,
indem es eine Formelschar generiert und plotted.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-03.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Wir generieren daraus Audio, stellen das Audio dar, und spielen es ab.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Wolfram geht in seinem Text auf einen der simpelsten Textgeneratoren ein (und zeigt, wie man ihn in Mathematica realisiert) 
ein Zeichenfrequenz-Zhler, der Wikipedia-Seiten konsumiert und zeigt,
wie oft (normiert, also in %) jeder Buchstabe in der Seite auftaucht.&lt;/p&gt;
&lt;p&gt;Er vergleicht die Seiten von &amp;ldquo;Cat&amp;rdquo; und &amp;ldquo;Dog&amp;rdquo; und zeigt, da in der &amp;ldquo;Dog&amp;rdquo;-Seite natrlich die o-Wahrscheinlichkeit hher ist,
aber da beide fr Englisch charakteristische Buchstabenhufigkeiten haben.
Er greift sich dann die Hufigkeiten von Buchstabenpaaren (Bi-Grammen) und zeigt an der Spalte fr den Buchstaben &amp;ldquo;q&amp;rdquo;,
da &amp;ldquo;q&amp;rdquo; quasi immer von &amp;ldquo;u&amp;rdquo; gefolgt wird, und man kann das sehen.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-04.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Entlang der X-Achse die ersten Buchstaben von Paaren,
entlang der Y-Achse die zweiten Buchstaben.
Je roter und dunkler das Feld, umso hufiger die Kombination.
Die Spalte &amp;ldquo;q&amp;rdquo; ist ganz wei, mit Ausnahme der &amp;ldquo;qu&amp;rdquo;-Kombination.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Nimmt man mehr Kontext, also statt Paaren Dreiergruppen (Tri-Gramme) oder noch lngere Gruppen,
dann bekommt man irgendwann fast aussprechbare oder reale englische Worte.
Schon 4-Gramme produzieren gute Worte.
Englisch hat also einen Buchstabenkontext von circa 4-5.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-05.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Eine Reihe von Worten, die aus Nachfolgewahrscheinlichkeiten von Bi-, Tri- und n-Grammen erzeugt worden ist.
Ab einer Lnge von etwa 4 entstehen oft gltige Worte der englischen Sprache.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Wrde man das mit chinesischen Schriftzeichen machen,
bekme man aus einem Grundwortschatz von einigen tausend Worten auf diese Weise Stze.
Viele chinesische Begriffe haben ein Schriftzeichen, manche zur Klrung der Bedeutung zwei.
ChatGPT macht das genau so.&lt;/p&gt;
&lt;p&gt;Dort sind es keine Schriftzeichen, sondern Token.
Aber ein Token entspricht ziemlich genau der Funktion, die ein Schriftzeichen in Chinesisch hat.
Und es sind fast genau so viele  in der Grenordnung von Zehntausenden.
Davon sind viele Begriffe Ein-Token und einige Mehr-Token.&lt;/p&gt;
&lt;p&gt;Bigramme auf Token produzieren Dinge wie dies hier: Wortsalat.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-06.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Eine Reihe von Wortfolgen, die alle zufllig generiert wurden, auf der Basis von Wortfolgewahrscheinlichkeiten,
die ber Bi-Grammen, also Wortpaaren, errechnet worden sind.
Alle Beispiel starten mit dem Wort &amp;ldquo;cat&amp;rdquo;.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Stellt man mehr Kontext, arbeitet man also mit n-Grammen fr n=3, 4, ,
dann bekommt man eher Dinge, die wie korrekte Stze aussehen.&lt;/p&gt;
&lt;p&gt;Man bekommt auch eine kombinatorische Explosion:
Statt 26, 26*26, 26*26*26, &amp;hellip; Wahrscheinlichkeiten zum Abspeichern hat man jetzt zum Beispiel 40.000 als Basis.
Und bei einem groen Kontext  statt 4 oder 5 eher was bei 100  hat man dann mit 40.000 hoch 100 zu tun.&lt;/p&gt;
&lt;p&gt;Also, nicht  weil man das so nicht verarbeiten kann,
und ein wenig Arbeit in die Speicherung von dnn besetzten Matrizen und groe Datenmengen stecken muss.
Aber das ist ein lsbares Problem, auch wenn es Aufwand erfordert, der auf der Mathematik nicht sichtbar ist.&lt;/p&gt;
&lt;p&gt;Wolfram erklrt dann &amp;ldquo;Modellierung durch Interpolation&amp;rdquo;.
Er hat Messwerte, die den Weg eines geworfenen Balls durch den Raum beschreiben,
und will dann nacheinander eine Gerade, eine Parabel oder &amp;ldquo;was Kompliziertes&amp;rdquo; da hindurchlegen.&lt;/p&gt;
&lt;p&gt;Er nutzt dieses Beispiel, um viele Dinge um den Modellbegriff zu erklren:
Einmal gibt es verschiedene Wege, um den Fehler zu messen,
also die Abweichung der interpolierten Linie von den Messwerten zu beschreiben.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-07.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Die Messwerte eines Ballwurfes, und die verschiedenen hindurch interpolierten Kurven.
Eine Gerade, eine Parabel und &amp;ldquo;was Kompliziertes&amp;rdquo;.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Dann setzt die &amp;ldquo;Beweglichkeit&amp;rdquo; der Funktion, die zur Interpolation genutzt wird, dem Modell Grenzen.
Egal, welche Koeffizienten man findet  die &amp;ldquo;komplizierte&amp;rdquo; Funktion aus dem letzten Beispiel hat immer groe Fehler.
Sie kann keinen Fit ergeben.&lt;/p&gt;
&lt;p&gt;Die zweite Funktion, die Parabel, ist immer ein guter Fit.
Das ist so, weil das real-weltliche Phnomen sich aus Grnden tatschlich parabolisch verhlt,
bis es durch Luftwiderstand gestrt wird.
In jedem Modell stecken Annahmen  und die knnen, wenn sie falsch sind,  das Modell unmglich machen.&lt;/p&gt;
&lt;p&gt;Er geht dann zu neuronalen Netzen ber und diskutiert, wie diese aufgebaut sind,
und welche Mathematik da drin steckt und wofr man sie einsetzen kann.
Es sind Geradengleichungen, mx+b, und Summen, aber sehr, sehr viele.
Sein Beispiel ist die Schrifterkennung.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-08.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Ein Datentyp in Mathematica sind zweidimensionale Bitmaps  Bilder.
Hier sind es handgeschriebene Ziffern.
Man kann diese in eine Menge (einen weiteren Datentyp) tun, und dann einem NetModel (dem Datentyp fr ein Neurales Netz) vorwerfen.
Dieses spezielle NetModel gibt dann als Ausgabe die erkannten Ziffern.
Dies ist eine Anwendung eines NN als Classifier, also als ein Ding, das erkennen und gruppieren kann.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-09.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Auf ein Bitmuster einer gut lesbaren 2 wird sukzessive ein immer strkerer Gaussian Blur angewendet.
Die resultierende Eingabemenge wird in das NetModel-Objekt verfttert und man bekommt &amp;ldquo;2, 2, 2, 1, 1, 1, 1, 1, 1&amp;rdquo; als Ausgabe.
Das Modell bricht bei schlechten Daten irgendwann zusammen.
Als Mensch erkennt man mehr Ziffern korrekt als 2, aber am Ende wird es wirklich sehr unlesbar.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Wolfram macht dann weiter und diskutiert das Konzept der Nhe oder hnlichkeit, indem er mit Voronoi-Maps herumexperimentiert.
Er stellt sich jetzt die Aufgabe, eine bestimmte Funktion mit zwei Parametern x und y, die die Werte -1, 0 und +1 liefert,
zu &amp;ldquo;lernen&amp;rdquo; und durch ein neuronales Netz zu produzieren.
Er benutzt das, um zu zeigen, wie man Koeffizienten einer Nherungsfunktion findet,
indem man simple Geradengleichungsrechner (Neuronen) verknpft.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-10.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Von einem NN erkannte handgeschriebene Ziffern nach hnlichkeit sortiert und angeordnet.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-11.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Eine Reihe von zufllig auf einer Ebene verteilte Punkte und die von ihnen &amp;ldquo;beherrschten&amp;rdquo; Gebiete:
Jeder Punkt der Ebene wird dem orangen Punkt zugeordnet, der ihm nach irgendeiner Distanzmetrik am nchsten ist.
Es entsteht eine Partition, eine Aufteilung, der Karte in Zonen um die Punkte.
Es sieht aus wie Seifenblasen, die aneinander kleben und gerade Schnittflchen bilden.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-12.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Die Aufgabe: Ein simples Voronoi, das drei Punkte mit den Werten +1, 0 und -1 auf einer Ebene verteilt.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-13.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Die 3D-Darstellung desselben Diagramms.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Er nimmt dann die vorherigen Gedanken zur Interpolation wieder auf.
Dazu erfindet er ohne weitere Erluterung eine Aneinanderreihung von &amp;ldquo;Neuronen&amp;rdquo;, schreibt Koeffizienten dran,
und diskutiert verschiedene mgliche Abstandsberechnungsfunktionen (Fehler-Mefunktionen).
Wenn man die Mathematik und den Prozess der Suche nach den passenden Koeffizienten mal weglt,
kommt man am Ende bei einer Nherung des Wunsch-Graphen an, die so aussieht.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-14.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Das von Wolfram gewhlte neuronale Netz.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-16.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Das Resultat weicht vom Wunschergebnis ab, ist aber eine gute Nherung.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Er diskutiert und demonstriert dann durch Simulation, da man bestimmte Dinge nicht darstellen kann,
wenn man nicht gengend Neuronen hat.
Das zu modellierende Subjekt ist zu kompliziert, soda der mgliche Parameterraum nicht gro genug ist:
Eine Gerade kann keine Parabel annhern.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-16.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Verschiedene NN und die resultierenden Nherungen.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Es geht dann in einen lngeren Exkurs, in dem er die Anatomie der Netze zu erklren, die da verwendet werden.
Man erkennt, da die Modelle Schichten haben und da sie keine Rckflsse haben:
Daten flieen immer von der oberen Schicht in die unmittelbar darunter liegende  es gibt keine Rckflsse und auch kein berspringen.&lt;/p&gt;
&lt;p&gt;Man erkennt auch, da generell grere Modelle bessere Ergebnisse liefern.
Wolfram gibt zu, da wir nicht wissen, wie gro ein NN fr ein bestimmtes Problem sein muss.
Wir wissen auch nicht, wie die konkrete Verschaltung der Schichten aussehen sollte,
oder muss, um gute Ergebnisse zu liefern.&lt;/p&gt;
&lt;p&gt;Er versucht immerhin, die Inhalte der Schichten zu verstehen und ihnen Bedeutung zuzuweisen,
aber auch das ist nicht wirklich Wissenschaft und teilweise Kaffeesatzlesen.
Fast alles am Bau von NN ist &amp;ldquo;Erfahrung&amp;rdquo; und &amp;ldquo;Empirik&amp;rdquo; ohne viel Theorie dahinter.&lt;/p&gt;
&lt;p&gt;Wir knnen Daten aus Schichten von NN herausziehen und sie nach einer Abstandsfunktion sortieren lassen,
und die Anordnung ergibt fr unsere menschlichen Hirne irgendwie Sinn.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-18.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Hunde und Katzenbilder nach einer Abstandsfunktion eines NN sortiert.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Wir knnen auch die Neuronen einiger Schichten nehmen, die Koeffizienten in einer Bildmatrix anordnen,
und bekommen vereinfachte Bilder von den Dingen, die da gespeichert oder erkannt werden sollen.&lt;/p&gt;
&lt;p&gt;Aber wir haben keine Funktionstheorie oder Mathematik von NN und Kognition.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-19.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Aus einer Schicht aus dem NN eines Katzen-Hunde-Sortierers herausgezogene Daten ergeben Katzenbilder.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Wolfram beschftigt sich weiter mit dem Training von NN, der Datenbeschaffung und der Auszeichnung von Daten.
Das Korpus von Trainingsdaten muss gro und zuverlssig ausgezeichnet sein.
Wir brauchen also viele Katzenbilder (Dafr gibt es das Internet!) und Hundebilder,
und diese mssen von Menschen korrekt mit Tags versehen worden sein, damit ein NN das lernen kann.&lt;/p&gt;
&lt;p&gt;Er zeigt dann Verbesserungen der Koeffizienten und der Resultate ber Iterationen des Lernprozesses.
&amp;ldquo;Lernen&amp;rdquo; bedeutet fr ein NN, die Koeffizienten der verschiedenen Neuronen zu verndern.
Dazu nimmt man die Eingabe-Koeffizienten als &amp;ldquo;Ebene&amp;rdquo; und den Fehler als &amp;ldquo;Hhe&amp;rdquo;
und wandert dann in der so entstehenden Fehlerlandschaft auf einem zuflligen Pfad in die Tler.&lt;/p&gt;
&lt;p&gt;Das findet lokale Minima und man hofft, aus &amp;ldquo;lokalen Lchern&amp;rdquo; zu entkommen, indem man zufllige Schritte zuflliger Gren macht.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-20.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Die Berg- und Tallandschaft des Fehlergraphen und der Weg des Modells zum lokalen Minimum.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Wieder diskutiert Wolfram mgliche Layouts von NN 
nicht immer kann man jedes Neuron mit allen Neuronen der nchsten Lage verschalten und in der Tat ist das bei groen NN nie machbar.
Bestimmte Formen haben sich als besser lernfhig erwiesen:
Ein schmaler Layer der zwischen zwei breite Layers eingefgt wird scheint Ergebnisse stark zu verbessern.
Niemand wei, warum das so ist oder hat ein Modell, das dies erklrt.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-21.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Verschiedene Formen von NN und die Ergebnisse, die sie produzieren.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Etwa in der Mitte des Textes wendet sich Wolfram generativen Modellen und LLMs zu.
Training von LLMs ist sehr, sehr einfach, weil sie einfach Text essen:
Man nimmt beliebigen Text, lsst das Modell das folgende Wort generieren und vergleicht es mit dem Wort, das htte kommen mssen.
Daraus kann man Trainingsfeedback erzeugen.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-22.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Eine Karte, auf der englische Worte nach hnlichkeit angeordnet sind.
Sugetiere sind links oben, links unten sind &amp;ldquo;alligator&amp;rdquo; und &amp;ldquo;crocodile&amp;rdquo; dicht beieinander, &amp;ldquo;ant&amp;rdquo; und &amp;ldquo;bee&amp;rdquo; sind es auch.
Rechts unten Frchte.
Tiere und Frchte sind klar durch einen Graben getrennt.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Es entsteht dadurch sogar so etwas wie eine Wissens-Karte nach hnlichkeits-Metriken.
Das ist nicht so, weil das LLM ein Weltmodell hat.
Sondern es ist so, weil Menschen ein Weltmodell haben und wenn sie Worte gebrauchen,
bestimmte Worte &amp;ldquo;nach beieinander&amp;rdquo; in Stzen angeordnet sind.
Ein Weltverstndnis entsteht so nicht, ein gewisses Sprachverstndnis wohl schon.&lt;/p&gt;
&lt;p&gt;Wieder und wieder und wieder versucht Wolfram zu einem Verstndnis der Koeffizienten von LLMs oder NNs zu kommen,
oder zu irgendeiner Theorie, die die Funktionsweise von LLMs und NNs planbar und vorhersagbar macht und sich ber pure Empirik erhebt.
Er macht dies mit verschiedenen Visualisierungen von Koeffizienten auf die unterschiedlichsten Weisen,
aber er findet nur qulende Muster, die wie Inhalt wirken und nichts enthllen.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2024/02/chatgpt-23.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Eine Vergrberung einer ChatGPT Koeffizientenmatrix und Einfrbung nach bestimmten Werten erzeugt eine interessante Teal-and-Orange Batik,
die nichts bedeutet.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Am Ende geht es dann darum,
wie man mit solchen riesigen Koeffizienten-Matrizen und einem austrainierten Modell generativ arbeitet und &amp;ldquo;interessante&amp;rdquo; Texte erzeugt.
Dabei geht es auch um den Parameter der &amp;ldquo;Temperatur&amp;rdquo; und den &amp;ldquo;Seed&amp;rdquo;:&lt;/p&gt;
&lt;p&gt;Wrde man ein generatives LLM mit einer Null-Temperatur laufen lassen,
wrde es immer dasselbe, wahrscheinlichste Folgetoken whlen, um einen Satz zu komplettieren.
Indem man die Wahrscheinlichkeiten der Folgetoken sortiert,
und dann zufllig ein anderes wahrscheinliches Token whlt, bekommt man immer noch &amp;ldquo;gltige&amp;rdquo; Fortsetzungen, die aber variabel sind.&lt;/p&gt;
&lt;p&gt;Das Seed ist dabei der Startwert des Pseudo-Zufallszahlen-Generators,
die Temperatur die &amp;ldquo;Sprungweite&amp;rdquo; vom wahrscheinlichsten Wert weg.
Auch hierzu gibt es keine Theorie, wir wissen nur, da &amp;ldquo;0.8 ein guter Wert ist&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Wolfram schliet:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;So  What Is ChatGPT Doing, and Why Does It Work?&lt;/p&gt;
&lt;p&gt;The basic concept of ChatGPT is at some level rather simple.
Start from a huge sample of human-created text from the web, books, etc.
Then train a neural net to generate text thats like this.
And in particular, make it able to start from a prompt and then continue with text thats like what its been trained with.&lt;/p&gt;
&lt;p&gt;As weve seen, the actual neural net in ChatGPT is made up of very simple elements  though billions of them.
And the basic operation of the neural net is also very simple, consisting essentially
of passing input derived from the text its generated so far once through its elements (without any loops, etc.)
for every new word (or part of a word) that it generates.&lt;/p&gt;
&lt;p&gt;But the remarkableand unexpectedthing is that this process can produce text thats successfully like whats out there on the web,
in books, etc.
And not only is it coherent human language, it also says things that follow its prompt making use of content its read.
It doesn&amp;rsquo;t always say things that globally make sense
(or correspond to correct computations because its just saying things that sound right based on what things sounded like in its training material).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Das ist der Stochastische Papagei, von dem bei LLMs gerne mal die Rede ist.
Er ist wortwrtlich gemeint.&lt;/p&gt;
&lt;p&gt;Ein LLM reproduziert Versatzstcke aus Texten, die es verarbeitet hat,
auf der Basis von Auftretenswahrscheinlichkeiten von &amp;ldquo;groes n&amp;rdquo;-Grammen von chinesischen Schriftzeichen (&amp;ldquo;Token&amp;rdquo;).
n ist dabei gerne gro zweistellig.&lt;/p&gt;
&lt;p&gt;Ein Konzept von Korrektheit gibt es nicht.
Wir wissen auch nicht, wie es das geben kann, denn es gibt keine Theorie.&lt;/p&gt;
&lt;p&gt;Die Idee, da ein LLM in &amp;ldquo;full autopilot&amp;rdquo; Mode irgendwas Funktionales in irgendeiner Gesellschaft leisten kann  Arbeiten kann  ist lcherlich.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Es reproduziert und wrfelt.&lt;/li&gt;
&lt;li&gt;Es hat kein Weltmodell.&lt;/li&gt;
&lt;li&gt;Es kennt keine Grenzen in den Termen von Ethik, Moral, Physik oder Logik.&lt;/li&gt;
&lt;li&gt;Es reiht nur Token aneinander.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ein LLM kann Menschen Arbeit abnehmen, indem es bestimmte Standardfunktionen erleichtert,
und es ist wahrscheinlich ein ausgezeichneter Sprachbersetzer,
und sicher ein wunderbarer Imitator, denn das ist, als was es konstruiert ist.&lt;/p&gt;
&lt;p&gt;Aber Imitation schafft nicht.&lt;/p&gt;
&lt;p&gt;Die Redewendung des &amp;ldquo;Blurry JPEG of the Internet&amp;rdquo; ist wieder exakt zutreffend,
denn das ist, was der Konstruktionsproze eines LLM produziert  eine verlustbehaftete Kompression von Wort-Folge-Wahrscheinlichkeiten.&lt;/p&gt;
&lt;p&gt;In meiner beruflichen Karriere habe ich um mich herum eine Reihe von KI-Projekten in kommerzieller Anwendung gelingen und scheitern sehen.
Das Muster, da sich dabei ergeben hat, besttigt sich auch bei LLMs:&lt;/p&gt;
&lt;p&gt;Wann immer meine Arbeitgeber KI eingesetzt haben, um Menschen full-auto zu ersetzen ist das Projekt ein unmitigiertes Desaster gewesen,
das der Firma geschadet und den Kunden Leid zugefgt hat.&lt;/p&gt;
&lt;p&gt;Wann immer meine Arbeitgeber KI eingesetzt haben um Menschen zu augmentieren war das Projekt eine Effizienzsteigerung
um eine halbe Grenordnung (den Faktor 3-5), die durch Feedback menschlicher Entscheidungen in den Trainingskorpus noch verbessert werden konnte.
Dabei war oft entscheidend, Confidence-Werte (aus der Modell-Fehler-Metrik abgeleitete Werte) herauszufhren und fr Menschen sichtbar zu machen.&lt;/p&gt;
&lt;p&gt;Die Grundidee dahinter ist, da wir eine Maschine bauen, die wir zwingen eine Entscheidung zu treffen, egal wie gro die Fehlermetrik ist.
Wenn die Maschine sich sicher ist, da ein Standardfall in einer oder ander Weise vorliegt, ist das wahrscheinlich gut.
Wenn die Maschine aber eine hohe Fehlermetrik anzeigt, dann erzwingen wir eine Entscheidung, die wahrscheinlich zufllig ist.&lt;/p&gt;
&lt;p&gt;Hier ist es gut, den Fall herauszunehmen und Menschen vorzulegen.
Anders als die KI haben diese ein Weltmodell, und insbesondere ein Modell der ganzen Welt inklusive all der Informationsquellen,
Kontexte und Eskalationsstufen, die dem KI-Modell nicht zugnglich sind.
Menschen knnen Dinge auf Weisen kontextualisieren und umordnen, die einem Reproduktions-Papagei nicht mglich sind.
Und diese Menschen sind glcklicher, schneller und effektiver, wenn sie mit den Standardfllen nichts zu tun haben.&lt;/p&gt;
&lt;p&gt;Wir knnen KI erfolgreich einsetzen, wenn wir es nach diesem Modell tun.&lt;/p&gt;
&lt;p&gt;Wir knnen die Hlle auf Erden erschaffen, indem wir Menschen einer unkontrollierten Papagei-KI aussetzen,
die nach zufllig aufgerufenen Reproduktionen vorheriger Flle entscheidet, ohne Ausweg.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>JusProg ist nur der Anfang</title>
      <link>https://blog.koehntopp.info/2024/01/16/jusprog-ist-nur-der-anfang.html</link>
      <pubDate>Tue, 16 Jan 2024 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2024/01/16/jusprog-ist-nur-der-anfang.html</guid>
      <description>&lt;p&gt;Es ist also dies hier passiert:
&lt;a href=&#34;https://lilithwittmann.medium.com/wen-sch%C3%BCtzen-eigentlich-jugendschutzprogramme-7f13fb8ebc51&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Wen schtzen eigentlich Jugendschutzprogramme?&lt;/a&gt;


Lilith Wittmann nimmt den Filter von JusProg e.V. auseinander und es ist eine einzige Eskalation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Die Filterkriterien sind nicht nachvollziehbar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Gefilterte Websites wissen nichts von ihrer Einstufung.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Die Einstufungen sind systematisch falsch, und man kann eine politische Richtung erkennen.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Das ist JusProg e.V. aber eigentlich egal, denn es sind ja auch viele Websites nicht geblockt worden.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Die Website fr den Download ist ein kompromittiertes Wordpress.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eventuell hat das Wordpress Malware verteilt, aber JusProg e.V. kann das nicht ausschlieen und auch nicht nachvollziehen, weil sie die Software nicht im Griff hat.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Die Infektion mit Malware war JusProg e.V. bekannt, und sie haben versucht, daran herumzudoktern, aber erfolglos. Das besorgt sie aber nicht besonders.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Was passiert hier, und warum zerfetzt Lilith Wittmann ausgerechnet JusProg?
Dazu mssen wir ein wenig ausholen und fast 30 Jahre zurckschauen.&lt;/p&gt;
&lt;h1 id=&#34;warum-jugendschutz&#34;&gt;
    &lt;a href=&#34;#warum-jugendschutz&#34;&gt;
	Warum Jugendschutz?
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Der Jugendschutz im Allgemeinen ist eine im Grundgesetz verankerte staatliche Aufgabe.
Er ist nicht einfach etwas, das der Staat nicht machen kann.&lt;/p&gt;
&lt;p&gt;Ausnahmen vom Jugendschutz sind klar geregelt und sind im Wesentlichen das &amp;ldquo;Elternprivileg&amp;rdquo;.
Erziehungsberechtigte, und nur diese, drfen fr Ihr Kind  im Rahmen bestimmter Grenzen  frei entscheiden,
was ihr Kind wann darf oder nicht darf.
Darum darf Deine Mutter Dich mit drei Jahren an ihrem Bier probieren lassen,
wenn Du interessiert wissen willst, was sie da trinkt.
Und darum darf Dein Vater Dich mit 6 Jahren Harry Potter Teil 4 und Folgende sehen lassen,
wenn Du unbedingt sehen mchtest wie es weiter geht.&lt;/p&gt;
&lt;p&gt;Lehrer an Schulen drfen das nicht.
Das Elternprivileg gilt nicht fr sie.
Sie mssen also, wenn Schler Medien in irgendeiner Form zu sich nehmen wollen,
dies im Rahmen des grundgesetzlich vorgeschriebenen und gesetzlich ausgestalteten Jugendschutzes tun,
wenn sie sich von Klagen durch besorgte Brger frei stellen wollen.&lt;/p&gt;
&lt;p&gt;Internet an Schulen ist fr die Schule auf viele Weisen ein Risiko,
und Haftung auf der Basis von Verletzungen des Jugendschutzes ist eines davon.&lt;/p&gt;
&lt;p&gt;Schlimmer noch, auch Anbieter von Medien jeder Art unterliegen den Regelungen des Jugendschutzes.
Niemand kann Filme, Hrspiele, Bcher, aber auch keine Webseiten oder Computerspiele anbieten,
ohne dabei den Jugendschutz zu bercksichtigen.
Alle diese Dinge brauchen eine Einordnung und eine wirksame Zugriffsbeschrnkung,
sonst Klage und, schlimmer, schlechte Presse.&lt;/p&gt;
&lt;h1 id=&#34;pre-internet-jugendschutz&#34;&gt;
    &lt;a href=&#34;#pre-internet-jugendschutz&#34;&gt;
	Pre-Internet Jugendschutz
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Das hat in der Vergangenheit bis in die spten 90er Jahre wunderbar funktioniert.
Hauptschlich deswegen, weil es keine kostenlosen und damit unfinanzierten Verffentlichungen gab.
Und weil deswegen Verffentlichung stark ge-gateway-ed war 
man konnte kein Buch, kein Spiel und schon gar kein Hrspiel oder keinen Film machen und dann verbreiten,
ohne durch einen Mediator zu gehen.
Also einen Verlag, eine Rundfunkanstalt oder einen anderen Vertriebs- und Verbreitungspartner,
der dabei dann auch massenhaft redaktionelle Bearbeitung betrieben hat,
und natrlich dabei auch die Formalien wie Anmeldungen bei Verwertungsgesellschaften oder Bewertung durch den Jugendschutz vorgenommen hat.&lt;/p&gt;
&lt;p&gt;Weil Inhalte grundstzlich nie kostenlos waren, hat das nicht nur die Verfgbarkeit von Inhalten eingeschrnkt,
sondern auch diese Formalien mit finanziert.
Auch wichtig: Es hat die Anzahl der Stellen reduziert, mit denen die staatlichen Stellen und ihre Organe zu tun hatten,
und durch die Pflicht zur kommerziellen Viabilitt wurde auch eine Vorauswahl getroffen.&lt;/p&gt;
&lt;p&gt;Seit den spten 90er Jahren haben wir mediatorfreie Kommunikation.
Jeder Mensch kann mit genau gar keinem Aufwand Medien produzieren und publizieren.
Das kann durch Editieren eines existierenden Wikis passieren  das hat Brockhaus das Genick gebrochen.&lt;/p&gt;
&lt;p&gt;Es kann auch durch das Betreiben und Verffentlichen eines Blogs, durch das Schreiben von Posts und Threads in Social Media,
durch das Aufnehmen und Verbreiten von Podcasts ber diese Blogs,
oder halt durch das Produzieren von Filmen mit massiv verbilligten Produktionsmitteln geschehen.
Das letztere hat zum Beispiel zu &amp;ldquo;In the Pirkinning&amp;rdquo; und zu &amp;ldquo;Prelude to Axanar&amp;rdquo; gefhrt hat,
und dann zu entsprechenden rechtlichen Reaktionen von Rechte-Inhabern.&lt;/p&gt;
&lt;h1 id=&#34;drei-grnde-fr-das-zusammenbrechen-des-jugendschutzes-im-internet&#34;&gt;
    &lt;a href=&#34;#drei-gr%c3%bcnde-f%c3%bcr-das-zusammenbrechen-des-jugendschutzes-im-internet&#34;&gt;
	Drei Grnde fr das Zusammenbrechen des Jugendschutzes im Internet
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Es fhrt auch zu einem Zusammenbruch der deutschen Idee von Jugendschutz.
Das deutsche Jugendschutz-Konstrukt ist berhaupt nicht darauf eingerichtet,
mit mediatorfreier, massenhafter und weltweiter Generierung von Content klarzukommen.
Das sind drei unabhngige Probleme, die alle auch einzeln zum Zusammenbruch fhren.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mediatorfrei&lt;/strong&gt; heit, da kein Verlag oder Aggregator zwingend involviert ist.
Ich habe einen Inhalt, ich stelle den irgendwo hin und Du kannst den finden, herunterladen und konsumieren.
Die Idee von JusProg und anderen Filterprogrammen ist immer das Konzept eines installierbaren Zwangs-Mediators,
dem Filter, der den direkten Zugriff auf bestimmte Inhalte verhindert.
Das setzt bestimmte Dinge voraus, wir werden da gleich noch drauf eingehen.&lt;/p&gt;
&lt;p&gt;Und &lt;strong&gt;massenhaft&lt;/strong&gt; heit, da es keine Vorauswahl gibt.
Nicht durch einen Mediator, etwa einen Verlag mit einem Editor, der das gut finden muss, was Du publizieren willst.
Aber auch nicht finanziell  die Grundkosten sind so niedrig, da effektiv jede Person alles publizieren kann,
was diese Person publizieren mchte.
Und auch nicht durch eine Lizenz  man muss im Internet nicht wie beim deutschen BTX der spten 80er Jahre
als Anbieter statt Nutzer registrieren lassen, damit man Dinge schreiben darf und mehr tun kann als konsumieren.&lt;/p&gt;
&lt;p&gt;Massenhaft hat zur Folge, dass die Anzahl und Menge der produzieren Medien die Bewertungskapazitt der zur Verfgung stehenden qualifizierten Bewerter massiv bersteigt.
Damit ist nicht nur keine Diskussion ber individuelle Bewertungen mehr mglich,
sondern Bewertungen mssen schematisch nach Syntax, nicht Semantik erfolgen.
Sie knnen nicht einmal mehr stichprobenhaft auf Korrektheit kontrolliert werden.&lt;/p&gt;
&lt;p&gt;Und &lt;strong&gt;weltweit&lt;/strong&gt; heit, da sowohl Inhalte als auch ihre Klassifizierung die Grenzen eines homogenen Kulturraumes weit berschreiten.
Eine sinnvolle Einigung ber Klassifikationen ist nicht mehr mglich.
Teilweise ist nicht einmal eine Unterhaltung ber Dimensionen und Skalen einer Klassifikation mglich.&lt;/p&gt;
&lt;p&gt;Schon innerhalb Deutschlands sind die Mastbe der Inhaltsbewertung traditionell massiv uneinheitlich.
Der bayrische Rundfunk hat zum Beispiel die Ausstrahlung bestimmter Folgen &amp;ldquo;Scheibenwischer&amp;rdquo; verweigert,
und sich aus dem Netz der ARD verabschiedet.
Auch die inzwischen eingestellte Sendung &amp;ldquo;Sesamstrae&amp;rdquo; war in Bayern nicht verfgbar.&lt;/p&gt;
&lt;p&gt;Wenn es um Inhalte im Internet geht, ist aber republikweit entlang bestimmter politischer Bruchlinien schon lange massiv keine sinnvolle Einigung mglich.
Weltweit noch viel weniger.
Man stelle sich ein Inhaltsbewertungssystem vor, das sowohl fr Schweden, Spanien, Saudi-Arabien, die USA und Thailand funktioniert.&lt;/p&gt;
&lt;p&gt;Jede Form von inhaltlicher Bewertung kann sich also nur an objektiven Kriterien orientieren:
&amp;ldquo;Nippel sichtbar&amp;rdquo;, &amp;ldquo;Messer, Gewalt, Blut sichtbar&amp;rdquo;, oder halt der berhmte &amp;ldquo;krperbezogene Penisneigungswinkel&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;In einem solchen System ist das Foto eines durchschnittlichen Gummifetischisten dann halt unkritisch, weil
keine Haut sichtbar ist (keine Nacktheit), die Pose nicht sexuell suggestiv ist (kein Sex),
keine Gewalt zu sehen ist (keine Gewalt) und auch keine unangemessene Sprache verwendet wird (keine Flche oder verbotene Worte).
Zugleich werden ein Haufen Stakeholder protestieren und dieses Bild irgendwie klassifiziert sehen wollen.&lt;/p&gt;
&lt;h1 id=&#34;jugendschutz-ist-nicht-systematisch-objektivierbar-und-automatisierbar&#34;&gt;
    &lt;a href=&#34;#jugendschutz-ist-nicht-systematisch-objektivierbar-und-automatisierbar&#34;&gt;
	Jugendschutz ist nicht systematisch objektivierbar und automatisierbar
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Es geht darum, welche Inhalte unserem Nachwuchs wie und mit welcher Bewertung prsentiert werden,
denn das ist, was Erziehung ist  die Vermittlung von Werten.
Daher ist jede Bewertung, die sich an Syntax (objektiv sichtbaren Merkmalen) orientiert zum Scheitern verurteilt.&lt;/p&gt;
&lt;p&gt;Und in dem Moment, wo Jugendschutz automatisierbar ist, haben wir eine Maschine gebaut,
die erfolgreich eine bestimmte moralische Bewertung in irgendeinem bestimmten moralischen System vornehmen kann,
also unseren Nachfolger als Menschheit geschaffen.
Wir knnen von der Bhne des Universums abtreten und denen die Realitt berlassen.&lt;/p&gt;
&lt;p&gt;Mgen sie erfolgreicher und anpassungsfhiger sein als wir.&lt;/p&gt;
&lt;p&gt;Das ist natrlich keine Einsicht oder Position, die ein Politiker in einem ffentlichen Diskurs einnehmen kann,
also sehen wir seit wortwrtlich 30 Jahren denselben dysfunktionalen Kram ohne einen Millimeter Fortschritt in irgendeiner Richtung.&lt;/p&gt;
&lt;h1 id=&#34;der-default-ist-ab-18&#34;&gt;
    &lt;a href=&#34;#der-default-ist-ab-18&#34;&gt;
	Der Default ist &amp;ldquo;ab 18&amp;rdquo;
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Wie dem auch sei  rein rechtlich ist es so, da jeder Inhalt in jedem Medium, das fr Deutsche erreichbar ist,
eine Bewertung haben muss oder eine Ausnahmeregelung greifen muss (etwa fr Nachrichten).
Das fhrt nicht nur zu Youtube-Kanlen, in denen Damen mit freiem Oberkrper Nachrichten verlesen,
sondern auch dazu, da mir eine DVD mit einer Aufnahme der Zauberflte nur gegen Vorlage des Personalausweises ausgehndigt wurde,
weil sie bei Amazon ohne Jugendschutz-Klassifikation hinterlegt war  der Default fr alle Inhalte ist immer &amp;ldquo;ab 18&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Inhalte brauchen also zwingend eine Klassifikation,
damit sie fr Jugendliche hinter einem echten oder hypothetisch installierten Filter berhaupt sichtbar werden.
Diese Klassifikation kann durch den Anbieter selbst erfolgen  das ist diese &amp;ldquo;age.xml&amp;rdquo;-Datei, von der Lilith Wittmann redet.
Oder halt durch Dritte, und da kaum jemand eine solche &amp;ldquo;age.xml&amp;rdquo;-Datei mit Selbstbewertung erzeugt,
generiert JusProg als Dritter diese Bewertung.&lt;/p&gt;
&lt;p&gt;Das machte vor dem Internet total Sinn:
Da alle Inhalte kommerziell waren, waren Anbieter von Inhalten und ihre Mediatoren daran interessiert, Inhalte bewertet zu sehen
und dabei die Bewertung auch so niedrig wie mglich anzusetzen, damit die Inhalte so vielen Menschen als mglich zugnglich werden.&lt;/p&gt;
&lt;p&gt;Im Internet ist das nicht so:
Ich habe gar kein Interesse daran, da meine kostenlosen Inhalte so vielen Menschen wie mglich zugnglich werden,
sondern sie sollen &lt;em&gt;den richtigen&lt;/em&gt; Menschen zugnglich sein.
Mein Markt und meine Reichweite sind so gro, da alles andere sogar ein Problem wre
und fr mich selbst zu Skalierbarkeitsproblemen fhren wrde.
Ich wrde in fr meine Mission nicht relevanten Interaktionen mit unwichtigen Menschen ertrinken.&lt;/p&gt;
&lt;p&gt;Damit ist die Motivationsgrundlage entfallen, die das deutsche Jugendschutzsystem vor dem Internet am Laufen gehalten hat.&lt;/p&gt;
&lt;h1 id=&#34;aber-wir-brauchen-bewertungen--fr-unsere-sites&#34;&gt;
    &lt;a href=&#34;#aber-wir-brauchen-bewertungen--f%c3%bcr-unsere-sites&#34;&gt;
	Aber wir brauchen Bewertungen  fr unsere Sites
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Die Mitglieder von JusProg e.V. sind traditionelle Medienanbieter.
Lilith Wittmann nennt Mitglieder und stellt die Motivation klar:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[JusProg eV] wurde mit dem Ziel gegrndet, eine solche Software bereitzustellen.
Seine Mitglieder sind groe deutsche Digitalunternehmen wie z.B. Vodafone oder RTL.
Die finanzieren das gerne.
Denn solange es ein anerkanntes Jugendschutzprogramm gibt, knnen sie eben auf viele andere Jugendschutzmanahmen verzichten.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Die Mission ist also, die Inhalte der Mitglieder kostengnstig aus dem Schufeld des Jugendschutzgesetzes herauszuholen,
nicht effektiven Jugendschutz zu leisten.
Das wre auch, wie oben gezeigt, systematisch sehr schwierig, wenn nicht unmglich.&lt;/p&gt;
&lt;p&gt;Damit das eine glaubhafte Wirksamkeitsfiktion erzeugt, mssen nicht nur die Webseiten der Mitglieder eine Bewertung erhalten.
Sondern alle.
Das erfolgt&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;geheim&lt;/strong&gt;, die Liste der Bewertungen ist nicht ffentlich, und die Kriterien sind es auch nicht.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ohne Benachrichtigung&lt;/strong&gt; der Bewerteten.
Deine Website ist durch JusProg bewertet, aber Du weit es nicht.
Fr eine solche Benachrichtigung mte man Ansprechpartner und Kommunikationswege identifizieren knnen,
das ist aber nicht einheitlich automatisierbar.
Und wre es das, dann hat man die Benachrichtigten am Hacken, die mit einem ber die Bewertung diskutieren wollen,
was Zeit und Geld kostet und nicht skalierbar ist.&lt;/li&gt;
&lt;li&gt;und damit systematisch folgefalsch mit den beobachteten Problemen,
auf der Grundlage intransparenter syntaktischer Kriterien, und eventuell auch mit einer nicht offengelegten politischen Agenda.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Das ist natrlich nicht nur kein Jugendschutz, sondern auch Demokratiegift,
weil nun auf die gesamte Bevlkerung ein Zwangsmediator ausgerollt wird,
dem man sich nicht entziehen kann (darf),
weil man ja ein Jugendlicher sein knnte.
Und weil es Inhalte gibt, die nach JSchG nicht einmal Erwachsenen zugnglich gemacht werden drfen.&lt;/p&gt;
&lt;p&gt;Daher wre es im Grunde ideal, die zwar grundgesetzlich vorgeschriebene Idee des Jugendschutzes im Internet als zu Recht gescheitert anzusehen.
JusProg wre dann ein Feigenblatt,
mit dem kommerzielle Medienanbieter sich durch Generierung und Installation einer &amp;ldquo;age.xml&amp;rdquo;-Datei haftungsrechtlich freikaufen knnen,
und dann installiert einfach niemand JusProg.&lt;/p&gt;
&lt;p&gt;So ist es aber nicht.
Dieser Status Quo ist einmal durch Installation von JusProg in ffentlichen Netzen eingerissen worden,
wie Lilith Wittmann korrekt anmerkt.&lt;/p&gt;
&lt;p&gt;Zum anderen ist da der feuchte Traum, jeden Internetbenutzer mit einem elektronischen Ausweisdokument jederzeit identifizieren zu knnen,
der gerade in der EU in eIDAS, Verimi und vielen anderen Dingen wieder auflebt.
Dabei kommen die Interessen
von &amp;ldquo;Bedarfstrgern&amp;rdquo;,
die Interessen von Leuten mit politischem Filterwillen,
der &amp;ldquo;Jugendschutz&amp;rdquo; als Legitimierungsfeigenblatt,
und die kommerziellen Interessen der Werbeindustrie zusammen, die Identitt als staatlich zwangsverordneten Supercookie mitnutzen will.&lt;/p&gt;
&lt;p&gt;Das darf so nicht passieren.
Daher muss nicht nur JusProg sterben.
Aber es ist nur ein Baustein in einer Entwicklung, die fraktal falsch ist.&lt;/p&gt;
&lt;p&gt;Das ist der Grund, warum Lilith da berall drauf haut.
Und darum sollten wir ihr alle auf jede denkbare Art Beistand leisten.
Gerade jetzt, wo um uns herum eine politische Ideologie auflebt, die nur darauf wartet, solche Mechanismen auf tdliche Weise zu missbrauchen.&lt;/p&gt;
&lt;h1 id=&#34;siehe-auch&#34;&gt;
    &lt;a href=&#34;#siehe-auch&#34;&gt;
	Siehe auch
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Seit 27 Jahren kein Fortschritt im Diskurs:
&lt;a href=&#34;https://blog.koehntopp.info/1997/05/14/sperrungen-im-internet.html&#34;&gt;Sperrungen im Internet&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;Seit 15 Jahren kein Fortschritt im Diskurs:
&lt;a href=&#34;https://blog.koehntopp.info/2009/08/06/jugendschutzfilter-saugen-und-daf-r-gibt-es-einen-grund.html&#34;&gt;Jugendschutzfilter saugen und dafr gibt es einen Grund&lt;/a&gt;

 
Warum wir nicht einfach alles &amp;ldquo;ab 18&amp;rdquo; machen knnen und warum damit ein Haufen Leuten mit unproblematischen Inhalten notlos Arbeit aufgebrdet wird.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Deploying websites - an escalation</title>
      <link>https://blog.koehntopp.info/2024/01/09/deploying-websites.html</link>
      <pubDate>Tue, 09 Jan 2024 05:06:07 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2024/01/09/deploying-websites.html</guid>
      <description>&lt;p&gt;We are still playing minecraft.
This time it is a highly modded Fabric server, which requires more memory than the old box had.
The new box has 12 cores, 128 GB of memory, and two nice SSD.
It is pretty nifty.&lt;/p&gt;
&lt;h1 id=&#34;a-simple-problem-easily-solved-by-ansible&#34;&gt;
    &lt;a href=&#34;#a-simple-problem-easily-solved-by-ansible&#34;&gt;
	A simple problem, easily solved by Ansible.
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;The machine also needs some kind of webserver to run websites.
An easy problem to solve, naturally.&lt;/p&gt;
&lt;p&gt;A bit of Ansible, deploy a few config files into the system and be done with it.&lt;/p&gt;
&lt;p&gt;Only, these are different types of websites, and over time additional sites are being added.
When a new website is being added, we need to collect all website names
and generate an
&lt;a href=&#34;https://httpd.apache.org/docs/2.4/mod/mod_md.html#mdomain&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;MDomain&lt;/code&gt;&lt;/a&gt;


statement in the config for Apache&amp;rsquo;s
&lt;a href=&#34;https://httpd.apache.org/docs/2.4/mod/mod_md.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;mod_md&lt;/code&gt;&lt;/a&gt;

.
This module will then automatically request the necessary certificates for the webserver&amp;rsquo;s TLS.&lt;/p&gt;
&lt;p&gt;Collecting all domain names from the configuration files can be done in Ansible, but it kind of hurts.
Ansible works best when you run it to deploy a few templated config files, and then have services doing the actual work.&lt;/p&gt;
&lt;p&gt;It is also more complicated than this, because we have different types of websites.
Initially we had only&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;static sites&lt;/code&gt; (&lt;code&gt;https://example.com&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;We also needed &lt;code&gt;redirect_sites&lt;/code&gt; (&lt;code&gt;https://www.example.com&lt;/code&gt; -&amp;gt; &lt;code&gt;https://example.com&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;We also needed reverse proxies for applications (&lt;code&gt;https://grafana.example.com&lt;/code&gt; -&amp;gt; &lt;code&gt;https://localhost:3000&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;We also need a Discord bot.&lt;/li&gt;
&lt;li&gt;Then we also needed the &lt;code&gt;wsgi_site&lt;/code&gt; deployed.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;But a &lt;code&gt;wsgi_site&lt;/code&gt; needs to be redeployed when the code has changed on GitHub.
Also, initial deployment of a &lt;code&gt;wsgi_site&lt;/code&gt; needs to create a user,
and initial checkout of the code into the users home,
and installation of the requirements.&lt;/p&gt;
&lt;p&gt;After a code update, the server needs to be restarted.&lt;/p&gt;
&lt;h1 id=&#34;this-actually-needs-a-shell-script&#34;&gt;
    &lt;a href=&#34;#this-actually-needs-a-shell-script&#34;&gt;
	This actually needs a shell script
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Okay, let&amp;rsquo;s not do this in Ansible.
Let&amp;rsquo;s write a simple and easy shell script for this.&lt;/p&gt;
&lt;p&gt;That kind of worked, initially, but quickly fell apart when the number of variants grew,
also error checking became complicated.&lt;/p&gt;
&lt;p&gt;Ultimately, it broke when we needed to collect and store per-site config parameters as a JSON, and act on it.
The moment you write shell functions with parameters, traps and other bells and whistles,
it is time to cut your losses and start over differently.
In this case, in Python.&lt;/p&gt;
&lt;h1 id=&#34;enter-deploy-a-python-cli-application&#34;&gt;
    &lt;a href=&#34;#enter-deploy-a-python-cli-application&#34;&gt;
	Enter &lt;code&gt;deploy&lt;/code&gt;, a Python CLI application
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;In the current intermediate stage, this is a Python script of 32 KB and around 1000 lines.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;root@bigbox ~&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# wc -l Source/deploy/deploy &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;951&lt;/span&gt; Source/deploy/deploy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;and&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;root@bigbox ~&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#  ls -l Source/deploy/deploy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rwxr-xr-x. &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root root &lt;span class=&#34;m&#34;&gt;31428&lt;/span&gt; Jan  &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; 18:42 Source/deploy/deploy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It understands the five types of server outlined above, and can handle a number of different operations for them.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;create&lt;/code&gt; makes a new server-config.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;delete&lt;/code&gt; throws it away.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We store them in a central directory, &lt;code&gt;/etc/projects&lt;/code&gt;, as JSON files.
For each site type, we accept a number of parameters:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--type&lt;/code&gt;, the five types above.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--username&lt;/code&gt;, a Unix User we create for the site.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--github&lt;/code&gt; The source code repository URL.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--hostname&lt;/code&gt; If necessary, this is inferred from the username and the default domain.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--projectdir&lt;/code&gt; Only necessary for anomalously structured Python code.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--to_host&lt;/code&gt; Only for redirects.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--port&lt;/code&gt; Only for proxies.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We now can do&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# deploy show projects&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- grafana
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- learn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# deploy show grafana&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;*** PROJECT /etc/projects/grafana
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- github    : None
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- hostname  : grafana.example.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- port      : &lt;span class=&#34;m&#34;&gt;3000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- project   : grafana
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;      : proxy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;deploy create --type proxy --hostname grafana.example.com --port 3000&lt;/code&gt; has created an apache configuration,
built the TLS configuration and restarted the &lt;code&gt;httpd.service&lt;/code&gt; to update things.&lt;/p&gt;
&lt;p&gt;We can also do more complicated things:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# deploy create --type wsgi_site --user learn --github ... learn&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;... creates /etc/project/learn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# deploy show learn&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;*** PROJECT /etc/projects/learn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- github    : git@github.com:.../learn.git
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- home      : /home/learn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- hostname  : learn.example.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- project   : learn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- projectdir: learn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- pubkey    : ssh-rsa AAAAB3...cfudtTQ&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; root@bigbox
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;      : wsgi_site
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- username  : learn
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This will create a Linux user, set up a checkout of the GitHub, install requirements, set up a WSGI Apache configuration,
configure TLS, and restart the server as needed.&lt;/p&gt;
&lt;p&gt;We can now &lt;code&gt;deploy update learn&lt;/code&gt; or &lt;code&gt;deploy restart learn&lt;/code&gt; to check out a new version and restart the server,
and we can also &lt;code&gt;deploy logs learn&lt;/code&gt; to tail the server logs for this site.&lt;/p&gt;
&lt;h1 id=&#34;it-is-still-ugly&#34;&gt;
    &lt;a href=&#34;#it-is-still-ugly&#34;&gt;
	It is still ugly
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Because this started out as a shell script, it still is ugly.
There are multiple levels of giant case-branches in this.
To become a proper solution, it needs a cleaner structure, in a more object-oriented fashion.&lt;/p&gt;
&lt;p&gt;But already it works better than the shell script it initially was,
has better error handling and can handle borderline cases more safely.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/isotopp/deploy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github&lt;/a&gt;

.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Restic</title>
      <link>https://blog.koehntopp.info/2023/12/30/restic.html</link>
      <pubDate>Sat, 30 Dec 2023 05:06:07 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/12/30/restic.html</guid>
      <description>&lt;p&gt;Ich hatte Grund, mich mit &lt;a href=&#34;&#34;&gt;Restic&lt;/a&gt;

 fr Backup auseinander zu setzen.&lt;/p&gt;
&lt;h1 id=&#34;warum-restic&#34;&gt;
    &lt;a href=&#34;#warum-restic&#34;&gt;
	Warum &lt;code&gt;restic&lt;/code&gt;?
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;restic&lt;/code&gt; ist eine Datensicherung in ein Repository,
das intern als ein Content-Addressable Storage aufgebaut ist.
Das heit, da innerhalb des Backups Datenstcke liegen,
die genau ihre (SHA256-) Prfsumme als Dateinamen haben.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root@server:/backup/restic/data/fc# sha256sum fcec*7a5b
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;fcec25d3e3165d159b4dac3867d1a1831707d582215c1fa30e0277cd57dc7a5b  fcec25d3e3165d159b4dac3867d1a1831707d582215c1fa30e0277cd57dc7a5b
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;Die Prfsumme einer Datei im &lt;code&gt;data&lt;/code&gt;-Verzeichnis eines &lt;code&gt;restic&lt;/code&gt;-Repos.
Sie entspricht genau dem Namen der Datei.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Dies fhrt zu einer Datenstruktur in &lt;code&gt;restic&lt;/code&gt;, die nicht ganz unhnlich der in einem
&lt;code&gt;.git&lt;/code&gt;-Repository ist, und auch zu einer starken Deduplizierung von Daten.
Dateien, die in mehr als einer Generation des Backups unverndert vorkommen,
werden automatisch erkannt und nicht mehrfach gespeichert.
Stattdessen wird nur ein Reference-Count erhht.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;restic&lt;/code&gt; verschlsselt Daten, Metadaten und Dateinamen genau wie Datei-Inhalte,
prft die Integritt des Backups ber diese Content-Prfsummen und
stellt die Sicherung ber mehrere Such- und Zugriffsmglichkeiten zur Verfgung.&lt;/p&gt;
&lt;p&gt;Man kann sich &lt;code&gt;restic&lt;/code&gt; wie Apple Time Machine vorstellen:
Stndliche Backups, die in wenigen Sekunden durchlaufen,
und die immer ein komplettes Image produzieren,
auch wenn sie nur inkrementell Platz und Zeit verbrauchen.
Anders als Time Machine (oder ZFS Snapshots) ist die Lsung jedoch
unabhngig vom verwendeten Dateisystem, und untersttzt ein breites Angebot
von Backend-Storages.&lt;/p&gt;
&lt;h1 id=&#34;situation&#34;&gt;
    &lt;a href=&#34;#situation&#34;&gt;
	Situation
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Der neue Dedi ist ein E5-1650 v3 mit 12 Threads und 128 GB RAM bei Hetzner.
Er fhrt stndlich ein &lt;code&gt;restic&lt;/code&gt; auf die Hetzner Storagebox durch,
und weiterhin einmal tglich ein &lt;code&gt;restic&lt;/code&gt; nach Hause aus.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-cronexp&#34; data-lang=&#34;cronexp&#34;&gt;10 * * * * /root/bin/run-restic
34 1 * * * /root/bin/run-restic-to-home
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;Crontab mit den Backup-Jobs.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Zu sichern ist ein LVM2 mit einem recht kleinen &lt;code&gt;/var/www&lt;/code&gt;, &lt;code&gt;/etc&lt;/code&gt; und der Kram auf &lt;code&gt;/home&lt;/code&gt;, der zum Glck noch berschaubar gro ist.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# df -t xfs -h&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Filesystem              Size  Used Avail Use% Mounted on
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/dev/mapper/vg0-root     20G  4.0G   17G  20% /
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/dev/mapper/vg0-home    200G   40G  160G  20% /home
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;Situation mit den Dateisystemen auf dem Dedi.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Real erfolgen faktisch alle nderungen am Content immer unter Usern in &lt;code&gt;/home&lt;/code&gt;,
soda vor allen Dingen die Sicherung dieser Partition dringend ist.
Speziell der Minecraft-Spieluser hat eine Menge Churn,
weil dort im Home alle Server-Instanzen liegen, auf denen gearbeitet wird.&lt;/p&gt;
&lt;p&gt;Die lokale Sicherung erfolgt mit einem sftp-Backend auf die Hetzner Storagebox,
das Backup nach Hause verwendet ebenfalls das sftp-Backend.&lt;/p&gt;
&lt;h1 id=&#34;sshconfig&#34;&gt;
    &lt;a href=&#34;#sshconfig&#34;&gt;
	.ssh/config
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Damit alles nicht so weh tut, verwenden wir einen speziellen Backup-Key,
der nur zur Datensicherung verwendet wird, und der nur die Funktion hat,
ein pawortloses Login auf den Backup-Zielen zu erlauben.&lt;/p&gt;
&lt;p&gt;Wir generieren den Key mit&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ssh-keygen -t rsa -b 4096 -N &amp;#34;&amp;#34; -f ~/.ssh/id_backup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;und konfigurieren ihn gleich in zwei &lt;code&gt;Host&lt;/code&gt;-Matchblocks rein:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# cat .ssh/config&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ServerAliveInterval &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ServerAliveCountMax &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;HashKnownHosts no
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;TCPKeepAlive yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;KeepAlive yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Host storagebox
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Hostname uxxxxxx.your-storagebox.de
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        User uxxxxxx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Port &lt;span class=&#34;m&#34;&gt;23&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        IdentityFile /root/.ssh/id_backup
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Host restic
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Hostname home.example.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        User resticuser
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Port &lt;span class=&#34;m&#34;&gt;22&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        IdentityFile /root/.ssh/id_backup
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Dadurch knnen wir die Backup-Ziele korrekt vorkonfiguriert
ber den Namen des Matchblocks ansprechen, also mit &lt;code&gt;storagebox&lt;/code&gt; und &lt;code&gt;restic&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Den Key mssen wir nun auch in der &lt;code&gt;authorized_keys&lt;/code&gt; der Ziele hinterlegen.
Das geht genauso wie von
&lt;a href=&#34;https://docs.hetzner.com/robot/storage-box/backup-space-ssh-keys/#upload&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Hetzner dokumentiert&lt;/a&gt;

.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# cat .ssh/id_backup.pub | ssh -p23 uXXXXX@uXXXXX.your-storagebox.de install-ssh-key&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;uXXXXX@uXXXXX.your-storagebox.de&lt;span class=&#34;err&#34;&gt;&amp;#39;&lt;/span&gt;s password:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Test mit &lt;code&gt;ssh -p23 -i ~/.ssh/id_backup uXXXXX@uXXXXX.your-storagebox.de&#39;s password&lt;/code&gt;.
Man landet in der restricted Shell der Storagebox,
und kann zum Beispiel mit &lt;code&gt;help&lt;/code&gt; eine Kommandoliste bekommen.&lt;/p&gt;
&lt;h1 id=&#34;restic-handhaben&#34;&gt;
    &lt;a href=&#34;#restic-handhaben&#34;&gt;
	Restic handhaben
    &lt;/a&gt;
&lt;/h1&gt;
&lt;h2 id=&#34;restic-initialisieren&#34;&gt;
    &lt;a href=&#34;#restic-initialisieren&#34;&gt;
	Restic initialisieren
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Damit &lt;code&gt;restic&lt;/code&gt; Dinge tun kann, muss man das Repository, in dem die Backups landen,
erst einmalig initialisieren.
Dabei wird auch ein Verschlsselungspawort festgelegt, das nicht verloren gehen darf.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# restic -r sftp://storagebox/restic init&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;enter password &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; new repository:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;enter password again:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;created restic repository 1c28ea9e7b at /restic
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Please note that knowledge of your password is required to access
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;the repository. Losing your password means that your data is
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;irrecoverably lost.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Dies erzeugt eine Verzeichnishierarchie in &lt;code&gt;/restic&lt;/code&gt; auf der Storagebox.&lt;/p&gt;
&lt;h2 id=&#34;restic-ausfhren&#34;&gt;
    &lt;a href=&#34;#restic-ausf%c3%bchren&#34;&gt;
	Restic ausfhren
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Das Backup-Script kann nun ausgefhrt werden.
Man kann dies zu Fu tun, wie ich hier, oder
&lt;a href=&#34;https://github.com/creativeprojects/resticprofile&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;resticprofile&lt;/a&gt;


bemhen.&lt;/p&gt;
&lt;p&gt;Ich sichere tatschlich nicht &lt;code&gt;/home&lt;/code&gt;, sondern erzeuge einen LVM2-Snapshot,
von dem die Sicherung durchgefhrt wird, bevor er released wird.&lt;/p&gt;
&lt;p&gt;Dadurch ist &lt;code&gt;/home&lt;/code&gt; unvernderlich whrend der Sicherung,
und die Konsistenz des Backups ist besser.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#!/usr/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Some basic config&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;SNAPLV&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;snap
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;SNAPMOUNT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/snapshot-of-home
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;RESTIC_REPOSITORY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;sftp://storagebox/restic
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;RESTIC_PASSWORD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;secret_password
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# only use up to 4 cpus.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;GOMAXPROCS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Make this safe to run in a crontab&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; -e
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; -o pipefail
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;PATH&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/root/.local/bin:/root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /root
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Show free space&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ssh -p &lt;span class=&#34;m&#34;&gt;23&lt;/span&gt; -i /root/.ssh/id_backup storagebox df -m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Delete old backups&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;restic forget &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --keep-daily &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --keep-monthly &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --keep-within 2d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --keep-tag keep &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --prune
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Actually perform a backup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 1. Snapshot and mount it&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;lvcreate -s -n &lt;span class=&#34;nv&#34;&gt;$SNAPLV&lt;/span&gt; -L10G /dev/vg0/home
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mount -t xfs -o nouuid /dev/vg0/&lt;span class=&#34;nv&#34;&gt;$SNAPLV&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$SNAPMOUNT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 2. Actual backup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;restic backup &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --json &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --exclude-caches &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --iexclude-file /root/bin/restic-excludes &lt;span class=&#34;se&#34;&gt;\ &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nv&#34;&gt;$SNAPMOUNT&lt;/span&gt; /var/www /etc /root &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;jq &lt;span class=&#34;s1&#34;&gt;&amp;#39;. | select(.message_type == &amp;#34;summary&amp;#34; )&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 3. Get rid of the snapshot&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;umount &lt;span class=&#34;nv&#34;&gt;$SNAPMOUNT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;lvremove -f /dev/vg0/&lt;span class=&#34;nv&#34;&gt;$SNAPLV&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Alle &lt;code&gt;restic&lt;/code&gt;-Subkommandos haben die Option &lt;code&gt;--json&lt;/code&gt; auszugeben, was man dann
mit
&lt;a href=&#34;https://github.com/tomnomnom/gron&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;gron&lt;/code&gt;&lt;/a&gt;


oder
&lt;a href=&#34;https://github.com/jqlang/jq&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;jq&lt;/code&gt;&lt;/a&gt;


konsumieren kann.&lt;/p&gt;
&lt;p&gt;In diesem Script erzeugen wir mit &lt;code&gt;lvcreate -s&lt;/code&gt; einen Snapshot der &lt;code&gt;/home&lt;/code&gt;-Partition.
Dieser wird dann in &lt;code&gt;/snapshot-of-home&lt;/code&gt; gemounted.
Weil ich xfs verwendet und das versehentliches doppeltes Mounten eines Verzeichnisses verhindert,
muss ich dies mit der Option &lt;code&gt;nouuid&lt;/code&gt; tun.&lt;/p&gt;
&lt;p&gt;Ich kann jetzt das &lt;code&gt;restic backup&lt;/code&gt;-Kommando laufen lassen.
Dies erfolgt unter anderem mit der Option &lt;code&gt;--json&lt;/code&gt; und wir fischen den &lt;code&gt;summary&lt;/code&gt;-Block am Ende raus,
ohne die Progress Reports weiter zu beachten.&lt;/p&gt;
&lt;p&gt;Die Option &lt;code&gt;--exclude-caches&lt;/code&gt; tut genau das:
&lt;a href=&#34;https://bford.info/cachedir/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CACHEDIR.TAG&lt;/a&gt;

 Verzeichnisse ignorieren.
Auerdem werden die Patterns in einer Exclude-Datei mit &lt;code&gt;--iexclude-file&lt;/code&gt; ebenfalls ignoriert.
Das Prefix &lt;code&gt;i&lt;/code&gt; steht hier fr &lt;code&gt;ignore-case&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Am Ende melden wir den Snapshot wieder ab, und schmeien ihn weg.&lt;/p&gt;
&lt;h2 id=&#34;garbage-collection&#34;&gt;
    &lt;a href=&#34;#garbage-collection&#34;&gt;
	Garbage Collection
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Am Anfang des Scripts wird einmal
&lt;code&gt;restic forget --prune&lt;/code&gt;
bemht.
Dies sind die Regeln, nach denen alte Backups verworfen werden:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Wir heben alle Backups 2 Tage auf.&lt;/li&gt;
&lt;li&gt;Wir heben alle Backups mit dem Tag &lt;code&gt;keep&lt;/code&gt; unbegrenzt auf.&lt;/li&gt;
&lt;li&gt;Wir heben 30 Tage lang das neuste Backup jeden Tages auf.&lt;/li&gt;
&lt;li&gt;Wir heben 12 Monate lang das neuste Backup jeden Monats auf.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Auf diese Weise haben wir bis zu einem Jahr Historie.
Dabei ist noch einmal in Erinnerung zu rufen, da Dinge, die sich nicht ndern,
nur einmal gespeichert werden, weil &lt;code&gt;restic&lt;/code&gt; dedupliziert.&lt;/p&gt;
&lt;p&gt;Die Deduplizierung ist sehr effektiv:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# restic stats&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;enter password &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; repository:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;repository 3d26efdc opened &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;version 2, compression level auto&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0:00&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 100.00%  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; index files loaded
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;scanning...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Stats in restore-size mode:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     Snapshots processed:  &lt;span class=&#34;m&#34;&gt;51&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Total File Count:  &lt;span class=&#34;m&#34;&gt;2431309&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              Total Size:  1.827 TiB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# df -Th /restic/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Filesystem             Type  Size  Used Avail Use% Mounted on
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/dev/mapper/vg0-restic xfs   250G   57G  194G  23% /restic
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;1.8 TB Daten werden von 57 GB Plattenplatz reprsentiert.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Das &lt;code&gt;--prune&lt;/code&gt; nach dem Forget gibt Plattenplatz wieder frei.
Dabei kann es vorkommen, da&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Der Linkcount einer Datei erniedrigt wird, sonst nichts.&lt;/li&gt;
&lt;li&gt;Daten frei markiert werden, aber als ungenutzter Datei in einem 16 MB &amp;ldquo;Pack&amp;rdquo; rumstehen.&lt;/li&gt;
&lt;li&gt;Der freie Platz im &amp;ldquo;Pack&amp;rdquo; so gro wird, da das Pack neu geschrieben wird.&lt;/li&gt;
&lt;li&gt;Das Pack komplett frei wird und gelscht werden kann.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;remove &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; snapshots:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ID        Time                 Host        Tags        Paths
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;------------------------------------------------------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dac0526f  2023-12-27 13:10:01  bigbox                  /etc
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                                       /snapshot-of-home
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                                       /var/www
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;------------------------------------------------------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; snapshots
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0:00&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 100.00%  &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; files deleted
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; snapshots have been removed, running prune
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;loading indexes...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;loading all snapshots...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;finding data that is still in use &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;51&lt;/span&gt; snapshots
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0:02&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 100.00%  &lt;span class=&#34;m&#34;&gt;51&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;51&lt;/span&gt; snapshots
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;searching used packs...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;collecting packs &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; deletion and repacking
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0:00&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 100.00%  &lt;span class=&#34;m&#34;&gt;3499&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;3499&lt;/span&gt; packs processed
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;to repack:          &lt;span class=&#34;m&#34;&gt;1517&lt;/span&gt; blobs / 466.577 MiB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;this removes:       &lt;span class=&#34;m&#34;&gt;1341&lt;/span&gt; blobs / 444.158 MiB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;to delete:           &lt;span class=&#34;m&#34;&gt;138&lt;/span&gt; blobs / 65.741 MiB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;total prune:        &lt;span class=&#34;m&#34;&gt;1479&lt;/span&gt; blobs / 509.899 MiB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;remaining:        &lt;span class=&#34;m&#34;&gt;174653&lt;/span&gt; blobs / 54.827 GiB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;unused size after prune: 2.728 GiB &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;4.98% of remaining size&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;repacking packs
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0:01&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 100.00%  &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt; packs repacked
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rebuilding index
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0:00&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 100.00%  &lt;span class=&#34;m&#34;&gt;3468&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;3468&lt;/span&gt; packs processed
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;deleting obsolete index files
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0:00&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 100.00%  &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; files deleted
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;removing &lt;span class=&#34;m&#34;&gt;34&lt;/span&gt; old packs
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0:00&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 100.00%  &lt;span class=&#34;m&#34;&gt;34&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;34&lt;/span&gt; files deleted
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Eine detaillierte Statistik zeigt an, wie viel Platz &lt;code&gt;--prune&lt;/code&gt; reclaimed hat,
und wie viel Platz noch innerhalb der Dateien ungenutzt frei ist.
Er wird bei einem spteren &lt;code&gt;--prune&lt;/code&gt; freigegeben.&lt;/p&gt;
&lt;h2 id=&#34;snapshots-anzeigen&#34;&gt;
    &lt;a href=&#34;#snapshots-anzeigen&#34;&gt;
	Snapshots anzeigen
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Snapshots anzeigen geht mit &lt;code&gt;restic snapshots&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# restic snapshots&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;enter password &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; repository:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;repository 3d26efdc opened &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;version 2, compression level auto&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ID        Time                 Host        Tags        Paths
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;------------------------------------------------------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0b981e61  2023-12-25 14:21:06  bigbox                  /etc
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                                       /snapshot-of-home
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                                       /var/www
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;e4e36825  2023-12-25 23:10:01  bigbox                  /etc
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                                       /snapshot-of-home
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                                       /var/www
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;99153462&lt;/span&gt;  2023-12-29 15:10:01  bigbox                  /etc
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                                       /snapshot-of-home
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                                       /var/www
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;------------------------------------------------------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;51&lt;/span&gt; snapshots
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Wir knnen auch mit &lt;code&gt;restic ls&lt;/code&gt; das Verzeichnis des Snapshots listen lassen,
oder mit &lt;code&gt;restic dump&lt;/code&gt; eine einzelne Datei ausgeben lassen.&lt;/p&gt;
&lt;h2 id=&#34;suche&#34;&gt;
    &lt;a href=&#34;#suche&#34;&gt;
	Suche
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Wir knnen einen Snapshot nach einzelnen Dateien durchsuchen.
Zum Beispiel wollen wir sehen, ob wir das File &lt;code&gt;/home/snackbag/snackbag/extras/snacksmp/v15-fast.zip&lt;/code&gt; im Backup haben.&lt;/p&gt;
&lt;p&gt;Gesichert worden ist es als &lt;code&gt;/snapshot-of-home/...&lt;/code&gt;.
Also&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# restic find &amp;#39;/snapshot-of-home/snackbag/snackbag/extras/snacksmp/v15-fast.zip&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Found matching entries in snapshot fbb371bd from 2023-12-29 13:10:01
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/snapshot-of-home/snackbag/snackbag/extras/snacksmp/v15-fast.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Found matching entries in snapshot 498bfd63 from 2023-12-29 14:10:02
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/snapshot-of-home/snackbag/snackbag/extras/snacksmp/v15-fast.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Found matching entries in snapshot &lt;span class=&#34;m&#34;&gt;99153462&lt;/span&gt; from 2023-12-29 15:10:01
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/snapshot-of-home/snackbag/snackbag/extras/snacksmp/v15-fast.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Found matching entries in snapshot c5d9b64a from 2023-12-29 16:10:01
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/snapshot-of-home/snackbag/snackbag/extras/snacksmp/v15-fast.zip
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Zum Restore brauchen wir die Snapshot-ID (also zum Beispiel: &lt;code&gt;c5d9b64a&lt;/code&gt;) der Version, die wir haben wollen.
Die Ausgabe ist chronologisch, also brauchen wir die letzte ID.&lt;/p&gt;
&lt;p&gt;Suche geht auch mit Wildcards:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# restic find --json &amp;#39;*/v15-fast.zip&amp;#39; | gron&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.hits &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; 1&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.atime &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2023-12-18T12:53:17+01:00&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.ctime &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2023-12-18T14:39:47.875074144+01:00&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.device_id &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; 64773&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.gid &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; 1013&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.group &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;snackbag&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.inode &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; 67328639&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.links &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; 1&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.mode &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; 420&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.mtime &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2023-12-18T12:53:17+01:00&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.path &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/snapshot-of-home/snackbag/snackbag/extras/snacksmp/v15-fast.zip&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.permissions &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-rw-r--r--&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.size &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; 53774271&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.type &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;file&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.uid &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; 1013&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.matches&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.user &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;snackbag&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;json&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;50&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.snapshot &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;c5d9b64aad4248840801f599baedc95467c49a2b8634a86d75be5bbd9d130bce&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Oder mit &lt;code&gt;jq&lt;/code&gt; statt &lt;code&gt;gron&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# restic find --json &amp;#39;*/v15-fast.zip&amp;#39; | jq &amp;#39;.[].snapshot&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;fbb371bd16a2db6c2b619d14f9c7beb8e52b7f40d212b3eafb1b1f145f731478&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;498bfd639d6ae59c926a63812aaced6dc5b541ca1302c5334913044f3b8333e6&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;9915346249d0ed02d35e43a81a46d184b75f6c00ec00133c0446a4b4a9cc8eb5&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;c5d9b64aad4248840801f599baedc95467c49a2b8634a86d75be5bbd9d130bce&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;restore&#34;&gt;
    &lt;a href=&#34;#restore&#34;&gt;
	Restore
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Restore dann:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# mkdir workspace&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# restic restore \&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;gt; --target workspace &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;&amp;gt; --include &lt;span class=&#34;s1&#34;&gt;&amp;#39;*/v15-fast.zip&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;c5d9b64aad4248840801f599baedc95467c49a2b8634a86d75be5bbd9d130bce
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;repository 3d26efdc opened &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;version 2, compression level auto&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0:00&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 100.00%  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; index files loaded
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;restoring &amp;lt;Snapshot c5d9b64a of &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;/snapshot-of-home /var/www /etc&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; at 2023-12-29 16:10:01.934599035 +0100 CET by root@bigbox&amp;gt; to workspace
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Summary: Restored &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; files/dirs &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;51.283 MiB / 51.283 MiB&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; in 0:02
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# find workspace/ -type f&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;workspace/snapshot-of-home/snackbag/snackbag/extras/snacksmp/v15-fast.zip
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;fuse-mount&#34;&gt;
    &lt;a href=&#34;#fuse-mount&#34;&gt;
	FUSE-Mount
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Das ist sehr viel schneller als ein Mount,
aber ein FUSE-Mount kann auch hilfreich sein:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# restic mount /mnt/restic&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;repository 3d26efdc opened &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;version 2, compression level auto&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0:00&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 100.00%  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; / &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; index files loaded
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Now serving the repository at /mnt/restic
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Use another terminal or tool to browse the contents of this folder.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;When finished, quit with Ctrl-c here or umount the mountpoint.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In einem 2. Fenster dann:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# cd /mnt/restic/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ls -F&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;hosts/  ids/  snapshots/  tags/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ls -F ids/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ids/:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0167ffd2/  152ea32f/  2ff8540c/  59f8f55b/  9afe61d3/  d58d50fa/  f22e171d/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;023a782d/  1561f1c8/  33e09326/  5eec2b8c/  a0020775/  d7c8e648/  f80f9e4f/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;02478085/  1b36de2d/  3f0bce8d/  61e02a5b/  a075cdd8/  d972654b/  fbb371bd/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;04216185/  1c253586/  451b146d/  6fcc9fbf/  aa916fab/  dd761561/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0b981e61/  1c64b318/  4961c739/  89aef175/  b4d945ee/  e1b58661/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0caeffbd/  2342db66/  498bfd63/  90a9861c/  be0f439a/  e4e36825/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0d7e65d4/  2566d92a/  4e2ba289/  954210a2/  c0fcfe70/  eb8ce869/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0ee4d0c9/  2cddb602/  5415cd2d/  99153462/  c5d9b64a/  ee6ad425/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# cd ids/c5d9b64a&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ls&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;etc  snapshot-of-home  var
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ls etc | head -3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;adjtime
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;aliases
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;aliases.db
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;sftp-fr-restic-aufsetzen&#34;&gt;
    &lt;a href=&#34;#sftp-f%c3%bcr-restic-aufsetzen&#34;&gt;
	&lt;code&gt;sftp&lt;/code&gt; fr &lt;code&gt;restic&lt;/code&gt; aufsetzen
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;Die Sicherung vom (als kompromittiert anzusehenden) Minecraft-Server nach Hause muss passend gesichert werden.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Wir legen einen &lt;code&gt;resticuser&lt;/code&gt; nur fr die Sicherung dieses Servers an.&lt;/li&gt;
&lt;li&gt;Er wird in der &lt;code&gt;/etc/ssh/sshd_config&lt;/code&gt; auf &lt;code&gt;sftp-internal&lt;/code&gt; constrained.&lt;/li&gt;
&lt;li&gt;Der &lt;code&gt;.ssh/authorized_keys&lt;/code&gt; dieses Users wird hinterlegt,
und als unvernderlich markiert, um Manipulationen zu erschweren.&lt;/li&gt;
&lt;li&gt;Der &lt;code&gt;sftp&lt;/code&gt;-User bekommt ein &lt;code&gt;chroot(2)&lt;/code&gt; ins Datenverzeichnis und kann nicht auf sein eigenes Home zugreifen.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# useradd -m -c &amp;#34;Restic Backup von Minecraft&amp;#34; resticuser&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# mkdir ~resticuser/.ssh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# scp .../id_backup.pub ~resticuser/.ssh/authorized_keys&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# chown -R resticuser:resticuser ~resticuser&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# chattr +i ~/.ssh/authorized_keys&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# tail -5 /etc/ssh/sshd_config&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Match User resticuser
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ChrootDirectory /backup/minecraft_backup
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ForceCommand internal-sftp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    AllowTcpForwarding no
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    X11Forwarding no
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# mkdir /backup/minecraft_backup/restic&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# chown -R resticuser:resticuser /backup/minecraft_backup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Eine modifizierte Version von &lt;code&gt;run-restic&lt;/code&gt; von oben sollte nun Daten in diesen Speicher schieben knnen.&lt;/p&gt;
&lt;h1 id=&#34;rest-server&#34;&gt;
    &lt;a href=&#34;#rest-server&#34;&gt;
	&lt;code&gt;rest-server&lt;/code&gt;
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;(via &lt;a href=&#34;https://github.com/mgumz&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Mathias Gumz&lt;/a&gt;

)&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/restic/rest-server&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;rest-server&lt;/code&gt;&lt;/a&gt;

 ist ein Unterprojekt von &lt;code&gt;restic&lt;/code&gt;,
das ein Server-Backend fr das REST-Protokoll von &lt;code&gt;restic&lt;/code&gt; implementiert.
Es hat einen &lt;code&gt;--append-only&lt;/code&gt; Modus, mit dem man Backups aus unsicheren Quellen annehmen kann,
ohne da die Backup-Quelle das Backup zerstren oder lschen kann.
Natrlich mssen &lt;code&gt;forget&lt;/code&gt; und &lt;code&gt;prune&lt;/code&gt; dann lokal auf dem Server getriggert werden und nicht durch den Backup-Prozess.&lt;/p&gt;
&lt;p&gt;Das Projekt kommt mit einer umfangreichen Installationsanleitung und mit offiziellen Docker-Images,
sodass das Aufsetzen eines Servers mit wenigen Handgriffen getan ist.&lt;/p&gt;
&lt;p&gt;Der Aufruf sieht im Wesentlichen so aus:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ lvcreate -L 100G -n testing hdd
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ mkfs -t xfs /dev/hdd/testing
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ mkdir /backup/testing
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ mount /dev/hdd/testing /backup/testing
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /backup/testing
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ htpasswd -B -c .htpasswd kris
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Password: keks
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ cp /etc/apache2/md/domains/&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;privkey,pubcert&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;.pem .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ rest-server &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --append-only &lt;span class=&#34;se&#34;&gt;\ &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  --tls &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --tls-cert pubcert.pem &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --tls-key privkey.pem &lt;span class=&#34;se&#34;&gt;\ &lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  --path /backup/testing/ &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --max-size &lt;span class=&#34;m&#34;&gt;107374182400&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --listen &lt;span class=&#34;s1&#34;&gt;&amp;#39;192.168.1.10:8000&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;Testweises Starten von &lt;code&gt;rest-server&lt;/code&gt; mit lokalen Kopien der bei &amp;ldquo;Let&amp;rsquo;s Encrypt&amp;rdquo; generierten Zertifikate und ein Test-Repository.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Der Beispielaufruf startet den &lt;code&gt;rest-server&lt;/code&gt; auf Port 8000 der Testmaschine.
Er verwendet Kopien der von &amp;ldquo;mod_md&amp;rdquo; generierten &amp;ldquo;Let&amp;rsquo;s Encrypt&amp;rdquo;-Zertifikate aus &lt;code&gt;/etc/apache/md/domains&lt;/code&gt;,
und greift auf ein &amp;ldquo;append-only&amp;rdquo;-Repository in &lt;code&gt;/backup/testing&lt;/code&gt; zu.
Die Gre des Repository ist auf 100 GB (100 * 1024^3 Bytes) limitiert.&lt;/p&gt;
&lt;p&gt;Wir knnen das Repository unter dem Namen &lt;code&gt;rest:https://home.example.com:8000&lt;/code&gt; ansprechen.
Also&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;RESTIC_REPOSITORY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;rest:https://home.example.com:8000
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$   &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;RESTIC_PASSWORD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;keks
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ restic init
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ restic backup --exclude-caches /etc 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;zum Sichern ein paar mal laufen lassen und dann &lt;code&gt;restic snapshots&lt;/code&gt; zum Ansehen der Backups.&lt;/p&gt;
&lt;p&gt;Lschen von Backups mit &lt;code&gt;forget&lt;/code&gt; und &lt;code&gt;prune&lt;/code&gt; ist durch den Client nicht mehr machbar.&lt;/p&gt;
&lt;p&gt;Stattdessen kann man das Backup lokal als &lt;code&gt;-r /backup/testing&lt;/code&gt; ansprechen und per Cron
das entsprechende &lt;code&gt;forget --prune --keep...&lt;/code&gt;-Regel laufen lassen.
Dabei mu man sicherstellen, da die Datei-Eigentmer sauber bleiben,
am Besten indem man &lt;code&gt;rest-server&lt;/code&gt; und den &lt;code&gt;forget&lt;/code&gt;-Cronjob unter demselben
Owner laufen lt.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>x86_64 binaries on M1</title>
      <link>https://blog.koehntopp.info/2023/12/05/x86_64-binaries-on-m1.html</link>
      <pubDate>Tue, 05 Dec 2023 05:06:07 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/12/05/x86_64-binaries-on-m1.html</guid>
      <description>&lt;p&gt;I installed a Python 2.7.18 with &lt;code&gt;pyenv&lt;/code&gt; on Apple Silicon,
and I needed that binary to be pure &lt;code&gt;x86_64&lt;/code&gt;.
This was necessary because I needed to load dynamic libraries that were only available in Intel format.&lt;/p&gt;
&lt;p&gt;It is not possible to load &lt;code&gt;x86_64&lt;/code&gt; libraries into an ARM binary.
If you build a multi-arch binary, you need to remember to request Intel every time you run a Python script
which tries to load the Intel-only shared library.
With an Intel-only binary, this will work every time without additional configuration.&lt;/p&gt;
&lt;h1 id=&#34;calling-the-intel-code-in-a-multi-architecture-binary&#34;&gt;
    &lt;a href=&#34;#calling-the-intel-code-in-a-multi-architecture-binary&#34;&gt;
	Calling the Intel code in a multi-architecture binary
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;file&lt;/code&gt; command will tell you if a binary is multi-architecture:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; file /bin/ls
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;/bin/ls: Mach-O universal binary with 2 architectures: [x86_64:Mach-O 64-bit executable x86_64] [arm64e:Mach-O 64-bit executable arm64e]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;/bin/ls (for architecture x86_64):	Mach-O 64-bit executable x86_64
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;/bin/ls (for architecture arm64e):	Mach-O 64-bit executable arm64e
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can manually call the Intel code:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; arch -arch x86_64 ls
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Applications		Movies		Music
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you call a binary this way, the first time this will trigger the installation of Rosetta2
(the Intel to ARM JIT compiler) on the Mac.&lt;/p&gt;
&lt;h1 id=&#34;compiling-for-intel-on-m1&#34;&gt;
    &lt;a href=&#34;#compiling-for-intel-on-m1&#34;&gt;
	Compiling for Intel on M1
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;By default, we compile for ARM (M1), and only for this architecture:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; cat hello.c
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gp&#34;&gt;#&lt;/span&gt;include &amp;lt;stdio.h&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;go&#34;&gt;int main(void) {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;	printf(&amp;#34;Hello!\n&amp;#34;);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; cc -o hello hello.c
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; file hello
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;hello: Mach-O 64-bit executable arm64
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We can call the compiler for Intel, and get an Intel-only binary:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; arch -arch x86_64 cc -o hello hello.c
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; file hello
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;hello: Mach-O 64-bit executable x86_64
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; ./hello
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Hello!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;compiling-python-for-intel-only&#34;&gt;
    &lt;a href=&#34;#compiling-python-for-intel-only&#34;&gt;
	Compiling Python for Intel only
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;pyenv&lt;/code&gt; installation process uses &lt;code&gt;python-build&lt;/code&gt;.
This, by default, uses the &lt;code&gt;readline&lt;/code&gt; and &lt;code&gt;openssl&lt;/code&gt; versions provided by Homebrew to build.
On my system, these are for ARM, so the Python will build and then fail in the linker stage.&lt;/p&gt;
&lt;p&gt;There is an option to force a build ignoring the Homebrew-provided components, &lt;code&gt;PYTHON_BUILD_SKIP_HOMEBREW&lt;/code&gt;.
This is a boolean variable: it is sufficient to set it to any value.
So:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;kk:~ kris$ PYTHON_BUILD_SKIP_HOMEBREW=1 arch -arch x86_64 pyenv install 2.7.18
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Downloading openssl-1.1.1v.tar.gz...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;-&amp;gt; https://www.openssl.org/source/openssl-1.1.1v.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Installing openssl-1.1.1v...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Installed openssl-1.1.1v to /Users/kris/.pyenv/versions/2.7.18
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Downloading readline-8.0.tar.gz...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;-&amp;gt; https://ftpmirror.gnu.org/readline/readline-8.0.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Installing readline-8.0...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Installed readline-8.0 to /Users/kris/.pyenv/versions/2.7.18
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Downloading Python-2.7.18.tar.xz...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;-&amp;gt; https://www.python.org/ftp/python/2.7.18/Python-2.7.18.tar.xz
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Installing Python-2.7.18...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;patching file configure
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;patching file configure.ac
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;patching file setup.py
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Installed Python-2.7.18 to /Users/kris/.pyenv/versions/2.7.18
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This is indeed the desired binary:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; file ~/.pyenv/versions/2.7.18/bin/python2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;/Users/kris/.pyenv/versions/2.7.18/bin/python2: Mach-O 64-bit executable x86_64
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;building-a-virtualenv-for-intel-python-2718&#34;&gt;
    &lt;a href=&#34;#building-a-virtualenv-for-intel-python-2718&#34;&gt;
	Building a &lt;code&gt;virtualenv&lt;/code&gt; for Intel Python 2.7.18
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;The virtual environment for Python 2.7 has to be built with an old version of the &lt;code&gt;virtualenv&lt;/code&gt; command,
which is compatible with the old Python:&lt;/p&gt;
&lt;p&gt;We make a &lt;code&gt;testdir&lt;/code&gt;, enter it and set the local Python version to the required version.
We then install an old version of the &lt;code&gt;virtualenv&lt;/code&gt; command, using &lt;code&gt;pip&lt;/code&gt;, globally into the old Python version.
This can then be used to create a virtual environment.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; mkdir testdir
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; testdir
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; pyenv &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt; 2.7.18
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; python --version
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Python 2.7.18
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; which python
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;/Users/kris/.pyenv/shims/python
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now the installation of &lt;code&gt;virtualenv&lt;/code&gt; into our Python 2.7.18 instance:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; pip --version
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;pip 19.2.3 from /Users/kris/.pyenv/versions/2.7.18/lib/python2.7/site-packages/pip (python 2.7)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; pip install --user virtualenv
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We now can call this version of &lt;code&gt;virtualenv&lt;/code&gt; for installation:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; archaeology
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; ~/.local/bin/virtualenv venv
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;created virtual environment CPython2.7.18.final.0-64 in 102ms
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt; venv/bin/activate
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;(venv) kk:testdir kris$ python --version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Python 2.7.18
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;(venv) kk:testdir kris$ python
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Python 2.7.18 (default, Dec  5 2023, 12:09:45)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;[GCC Apple LLVM 15.0.0 (clang-1500.0.40.1)] on darwin
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Type &amp;#34;help&amp;#34;, &amp;#34;copyright&amp;#34;, &amp;#34;credits&amp;#34; or &amp;#34;license&amp;#34; for more information.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt;&amp;gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;profit&#34;&gt;
    &lt;a href=&#34;#profit&#34;&gt;
	Profit!
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;And that gives us an ancient Python in a foreign machine language, so we can continue with our
software archaeology project.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;(venv) $ arch -arch x86_64 pip install cx_Oracle==7.3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Collecting cx_Oracle==7.3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Successfully built cx-Oracle
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Installing collected packages: cx-Oracle
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Successfully installed cx-Oracle-7.3.0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note that this will still need an &lt;code&gt;ORACLE_HOME&lt;/code&gt; pointing to your instantclient directory,
and the &lt;code&gt;dylib&lt;/code&gt; files linked from the Python libdir to the instantclient installation.&lt;/p&gt;
&lt;p&gt;So:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;ORACLE_HOME&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;~/instantclient*
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;export ORACLE_HOME=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$ORACLE_HOME&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bash_profile
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; ~/.pyenv/versions/2.7.18/lib
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; i in ~/instantclient*/*.dylib*&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt;   &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt;   ln -s &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;With the proper &lt;code&gt;~/instantclient*/network/admin/TNSNAMES.ORA&lt;/code&gt; you can now&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;(venv) $ python2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt;&amp;gt;&amp;gt; import cx_Oracle
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt;&amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; cx_Oracle.Connection&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;sys&amp;#34;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;#34;oracle&amp;#34;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;#34;ORCL&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt;&amp;gt;&amp;gt; c
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&amp;lt;cx_Oracle.Connection to sys@ORCL&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>A Revolution Devours Its Children</title>
      <link>https://blog.koehntopp.info/2023/11/11/a-revolution-devours-its-children.html</link>
      <pubDate>Sat, 11 Nov 2023 05:06:07 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/11/11/a-revolution-devours-its-children.html</guid>
      <description>&lt;p&gt;Initially published in c&amp;rsquo;t 26/23, page 70.
All my texts are made available in this blog after some time.
The version shown is the raw edit of the article text without pictures and illustrations.&lt;/p&gt;
&lt;p&gt;Hier ist das Original &lt;a href=&#34;https://blog.koehntopp.info/2023/11/11/eine-revolution-frisst-ihre-kinder.html&#34;&gt;in deutscher Sprache&lt;/a&gt;

.&lt;/p&gt;
&lt;h1 id=&#34;a-revolution-devours-its-children&#34;&gt;
    &lt;a href=&#34;#a-revolution-devours-its-children&#34;&gt;
	A Revolution Devours Its Children
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;by Kristian Khntopp&lt;/p&gt;
&lt;h2 id=&#34;departure-from-traditional-open-source-licenses&#34;&gt;
    &lt;a href=&#34;#departure-from-traditional-open-source-licenses&#34;&gt;
	Departure from Traditional Open Source Licenses
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Open source once set out to guarantee users the greatest possible freedom in the operation of software and to challenge the software titans.
Meanwhile, however, these have learned to use the documented freedoms to their advantage.&lt;/p&gt;
&lt;p&gt;There is unrest in the open-source community: In recent times,
it can be observed that established software companies with a large user base are restricting the freedoms of their users by
changing licenses of their open source projects.
The most recent example is HashiCorp, a company specialized in software for cloud infrastructure,
which has placed its core products under the BSL v1.1 (Business Source License), a formally non-open license.
The response was immediate:
the software has since been forked as OpenTofu and is now under the auspices of the Linux Foundation.&lt;/p&gt;
&lt;p&gt;HashiCorp is not the first company to do this: some time ago,
RedHat changed the positioning of CentOS as a free alternative to RedHat Enterprise Linux (RHEL)
and recently restricted the release of the RHEL source codes through an EULA (End User License Agreement),
Elastic has put ElasticSearch and Kibana under the formally non-open SSPL (Server Side Public License),
and MongoDB is also only available under the SSPL.&lt;/p&gt;
&lt;h2 id=&#34;four-freedoms-and-a-certification&#34;&gt;
    &lt;a href=&#34;#four-freedoms-and-a-certification&#34;&gt;
	Four Freedoms and a Certification
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Open Source and Free Software existed even before these terms were coined.
However, the actual &amp;ldquo;Open Source Revolution&amp;rdquo; began in the 1990s with the Linux kernel and the resulting distributions.
The term &amp;ldquo;Open Source&amp;rdquo; was coined by Bruce Perens and Eric Raymond,
formalized in the Open Source Definition and the Debian Free Software Guidelines.&lt;/p&gt;
&lt;p&gt;Both are refinements and clarifications of the original &amp;ldquo;Four Freedoms&amp;rdquo; in the mother of all open-source licenses,
the GNU General Public License (GPL), which are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Freedom 0: The freedom to run the program for any purpose.&lt;/li&gt;
&lt;li&gt;Freedom 1: The freedom to study how the program works and adapt it to your data processing needs.
This implies access to the source code.&lt;/li&gt;
&lt;li&gt;Freedom 2: The freedom to redistribute the program.
However, the GPL requires that the source code of the program, which corresponds to the redistributed program, is also offered.&lt;/li&gt;
&lt;li&gt;Freedom 3: The freedom to improve the program and distribute these improvements under the original license.
This also implies access to the source code and the right to modify it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;While the GPLv2 is the license that first codified these freedoms,
a whole range of licenses quickly developed that are all &amp;ldquo;Open Source&amp;rdquo;
according to the OSI guidelines (Open Source Initiative) or the DFSG (Debian Free Software Guidelines),
all of which are free but some are incompatible with the GPL.
This, in particular, filled many Usenet newsgroups with ongoing discussions throughout the late 90s.&lt;/p&gt;
&lt;h2 id=&#34;the-lamp-stack-a-wild-mix-of-licenses&#34;&gt;
    &lt;a href=&#34;#the-lamp-stack-a-wild-mix-of-licenses&#34;&gt;
	The LAMP Stack: A Wild Mix of Licenses
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;The well-known LAMP stack for web development is also an example of the license confusion that can occur with open source.
LAMP includes the Linux Kernel, the Apache web server, the MySQL database, and the PHP programming language.
Each of these components has different licenses.&lt;/p&gt;
&lt;p&gt;While the Linux Kernel is licensed under GPLv2, the Apache web server is under Apache License 2.
This is a permissive license,
meaning it lacks provisions that enforce changes to the original program to be distributed under the same license as the original program.&lt;/p&gt;
&lt;p&gt;MySQL has two licenses:
The database can be used under the GPL, subject to the provisions and freedoms mentioned above.
However, the copyright holder is a company (originally MySQL, then SUN, and now Oracle) that holds all rights.
Developers must assign the rights to their patches to Oracle via a Contributor License Agreement (CLA).
This allows Oracle to also offer the source code under a commercial license.&lt;/p&gt;
&lt;p&gt;And PHP has been under the PHP License since version 4.
This is also a permissive license that allows the use and distribution of PHP with or without modifications,
as source code or executable program, but contains restrictions regarding the use of the &amp;ldquo;PHP&amp;rdquo; trademark.&lt;/p&gt;
&lt;p&gt;This leads to an important question from the late 90s:
What happens when you mix software with different licenses and distribute them together in a distribution or link them together in a translation process?&lt;/p&gt;
&lt;p&gt;The GNU Project quickly clarified that the boundaries of the license are the process boundaries.
If you develop a program under another license and link it with GNU software so that the result is executed in the same process afterward,
this is legally okay only if the other license is compatible with the GPL.&lt;/p&gt;
&lt;p&gt;Although the GPL is an open-source license, not many licenses are compatible with the GPL.
This is because the GPL contains freedom-preserving restrictions:
you can&amp;rsquo;t restrict the execution of the software (&amp;ldquo;Not in nuclear missiles!&amp;rdquo;).
And a program that contains GPL components must also be offered in source code with all changes.
This means not just the GPL components, but all components in this process space.&lt;/p&gt;
&lt;h2 id=&#34;the-debate-over-the-infectious-gpl&#34;&gt;
    &lt;a href=&#34;#the-debate-over-the-infectious-gpl&#34;&gt;
	The Debate Over the &amp;ldquo;Infectious&amp;rdquo; GPL
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;The obligation to publish the source code then led to another discussion in the early 2000s.
At that time, Linux and Open Source became so prominent that they could not be ignored,
and many startups flirted with Open Source.
Although the GPL was the most widely used license at the time, it is not an attractive prospect for investors
to have to release all the company&amp;rsquo;s software sources under the GPL.&lt;/p&gt;
&lt;p&gt;It was during this time that the anti-open-source slogan of the &amp;ldquo;viral&amp;rdquo; or &amp;ldquo;contagious&amp;rdquo; GPL originated,
which is nonsense at its core:
On the one hand, the GPL is easy to contain because it ends clearly defined at process boundaries;
on the other hand, the provisions of the GPL make sense because they make direct exploitation of others&amp;rsquo; work more difficult
(&amp;ldquo;Quid pro quo: If you benefit from Open Source, then you should contribute in the same way.&amp;rdquo;).&lt;/p&gt;
&lt;h2 id=&#34;gplv3-against-software-patents&#34;&gt;
    &lt;a href=&#34;#gplv3-against-software-patents&#34;&gt;
	GPLv3 Against Software Patents
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;In response to venture capitalists who brought another threat to Open Source into play, a reaction became necessary:
software patents.
If startups have to release their software under the GPL,
they might restrict their intellectual property in other ways to later collect licensing fees.
At the time, software patents were positioned as a real threat.&lt;/p&gt;
&lt;p&gt;The justification for version 3 of the GPL directly addresses this, and GPLv3 includes provisions that,
in simplified terms, state:
&amp;ldquo;If you use patents to sue users of any GPLv3-licensed software, then your right to use any GPLv3 software is terminated.&amp;rdquo;
This clause is effective, and it has led to, among other things,
Apple avoiding any form of GPLv3-licensed software in its products
and progressively replacing any GPL software in Apple products with software licensed differently.&lt;/p&gt;
&lt;p&gt;The provision that the GPL ends at process boundaries is sometimes problematic for the GNU project as well,
and so there are variants of the GPL and exceptions.
For example, code generated by GPL-covered programs is not protected by the GPL:
This allows code generators such as gcc, bison, and flex.
And for some libraries, including glibc, there is the LGPL, also called &amp;ldquo;Lesser GPL,&amp;rdquo;
which allows the libraries to be linked against non-GPL software.&lt;/p&gt;
&lt;h2 id=&#34;gpl-instead-of-lgpl-as-a-weapon&#34;&gt;
    &lt;a href=&#34;#gpl-instead-of-lgpl-as-a-weapon&#34;&gt;
	&amp;ldquo;GPL Instead of LGPL&amp;rdquo; as a Weapon
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Conversely, some companies have used the GPL as a weapon.
For example, libraries like &amp;ldquo;libmysqlclient.so&amp;rdquo; were available under the LGPL up to MySQL 3.23,
but from version 4 onwards, they are under the GPL.
Therefore, if one links this library into their commercial program and wants to distribute it,
they must buy a commercial MySQL license under the dual-licensing program.
MySQL summarized this in the slogan, &amp;ldquo;If you are free, we are free. If you are commercial, we are commercial.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;This was a problem for a while for the programming language PHP,
which linked against this library to access the database as part of the LAMP stack but has a formally non-GPL-compatible license.
PHP countered this problem by reimplementing the protocol as &amp;ldquo;mysqlnd,&amp;rdquo;
and in parallel, MySQL solved the problem by defining a license exception for PHP (and others).&lt;/p&gt;
&lt;h2 id=&#34;less-gpl-more-mit-bsd-and-apache&#34;&gt;
    &lt;a href=&#34;#less-gpl-more-mit-bsd-and-apache&#34;&gt;
	Less GPL, More MIT, BSD, and Apache
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;All these confusions are one reason why &amp;ldquo;modern&amp;rdquo; open-source software often no longer uses the GPL
but prefers other licenses such as MIT, BSD, or Apache.
They make a number of capital-financed business models around open source simpler,
especially if you want to build a company around a product that is open source in name only.
From 2005 onwards, business models based on open source began to flourish.
This has worked well enough for 15 years to grow the number of projects significantly.&lt;/p&gt;
&lt;p&gt;Some of these projects do not rely on individual companies as sponsors:
PHP, KDE, and Postgres, for example, are stable and large-scale OSS projects
that are not backed by a single large company and its venture capital investors 
they all feature a broad and deeply rooted base of contributors.&lt;/p&gt;
&lt;p&gt;In recent years, cracks have appeared: RedHat, Elastic, MongoDB, MariaDB (a MySQL fork), HashiCorp,
and many others have changed their licenses or restructured to exclude a specific use case.
Since this constitutes a violation of Freedom 0, they are no longer open-source projects in the sense of OSI and DFSG.&lt;/p&gt;
&lt;h2 id=&#34;the-elephant-in-the-room-is-the-cloud&#34;&gt;
    &lt;a href=&#34;#the-elephant-in-the-room-is-the-cloud&#34;&gt;
	The Elephant in the Room is the Cloud
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Amazon Web Services (AWS) is a system and a company that epitomizes a business model:
It monetizes the aspect of &amp;ldquo;operations,&amp;rdquo; which is often neglected and underfunded in companies,
and aims not to develop software for third parties but primarily to operate it.&lt;/p&gt;
&lt;p&gt;Amazon has been very successful with this model:
For some time now, more new installations of MySQL (and MongoDB, Postgres, Elastic, and many other databases)
have been running in its data centers than locally with clients (&amp;ldquo;on-premise&amp;rdquo;).
This is a class of systems that are notoriously hard to operate because errors in operation can irreparably ruin data.
Of course, one can roll back a faulty database version to the previous one,
but the data destroyed by the error is still permanently lost.&lt;/p&gt;
&lt;p&gt;The systematic underestimation of the costs and effort operations require is
what makes the principle of &amp;ldquo;Software as a Service&amp;rdquo; (SaaS) successful.
SaaS providers are selling not just a service,
but primarily an operational concept for this service that allows smooth and uninterrupted operation right after commissioning.
Because the operational concept is tested and prescribed, the quality of the service can be standardized,
measured, and then stable contracts can be entered into with third parties.&lt;/p&gt;
&lt;p&gt;Customers welcome this because operating software is a problem at least as challenging as developing software.
Many customers do not want to deal with this.
Often, they accept availabilities, response times, and costs that were completely unacceptable in their own in-house teams before.
All of this just to get the complex task of &amp;ldquo;operating the databases&amp;rdquo; out of the house 
this shows how uncomfortable companies are with dealing with &amp;ldquo;operations.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;The operation of this software by AWS is not covered by a commercial agreement between the software manufacturer and Amazon,
but is based on the Freedom 0 of the GPL:
Amazon is allowed to run the software for any purpose, including as a service for others.
As a result, Amazon collects the money for the operation of these installations,
but the actual software developer, the manufacturing company or group, gets nothing from it.
This is not a sustainable financing model, but it is covered by the GPL and very advantageous for AWS,
so there is no incentive for them to change anything.&lt;/p&gt;
&lt;h2 id=&#34;business-source-license-as-an-early-reaction&#34;&gt;
    &lt;a href=&#34;#business-source-license-as-an-early-reaction&#34;&gt;
	Business Source License as an Early Reaction
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;The issue of cloud services exploiting open-source software without contributing back to the developers was recognized early on:
The &amp;ldquo;Business Source License&amp;rdquo; (BSL) was first mentioned in the blog of Monty Widenius,
a key figure behind MariaDB, as early as 2013, and MariaDB has been using it for certain components since 2016,
with slight changes after suggestions from Bruce Perens, resulting in version 1.1 in 2017.
Other products followed suit and adopted the BSL: Couchbase, Uptrace, Kurtosis, Sentry, CockroachDB,
and recently all HashiCorp core products.&lt;/p&gt;
&lt;p&gt;The idea behind the BSL is that the software remains freely usable and the source code available,
but with restrictions.
The most important restriction usually means &amp;ldquo;AWS is not allowed to use this,&amp;rdquo;
phrased as &amp;ldquo;The software may not be offered as SaaS for third parties.&amp;rdquo;
Thus, one can use the software as before.
It can also be operated on AWS itself, or it can be provided within one&amp;rsquo;s own organization for other departments.&lt;/p&gt;
&lt;p&gt;However, one will not be able to buy the operation of the software as a service from a cloud operator,
but only from the creator of the software itself (e.g., via AWS Marketplace).
This limitation is intended to ensure the financing the development of the software
by preventing AWS from completely diverting this stream of money for itself.
The BSL comes with another rule stating that code changes must be released under a recognized open-source license (usually the Apache 2.0 license or GPL).
There is a time limit for that: a maximum of four years, ensuring that older versions of the software are always true open source.&lt;/p&gt;
&lt;p&gt;Formally, BSL software is not open source in the OSI or DFSG sense because, unlike the GPL,
Freedom 0 (&amp;ldquo;run for any purpose&amp;rdquo;) is restricted.
Therefore, it is also referred to as &amp;ldquo;Source Available.&amp;rdquo;
The Server Side Public License used by MongoDB, Elastic, and Kibana follows the same idea, only differently:
the SSPL is a variant of AGPLv3 that also restricts Freedom 0 and prohibits operating the software for third parties
(&amp;ldquo;as a Service&amp;rdquo;) unless a commercial license is acquired.&lt;/p&gt;
&lt;h2 id=&#34;non-free-free-software&#34;&gt;
    &lt;a href=&#34;#non-free-free-software&#34;&gt;
	Non-Free Free Software
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;The fundamental idea behind the GPL&amp;rsquo;s freedoms is give and take:
&amp;ldquo;You can use our software, but you have to play nice in return.&amp;rdquo;
The ever-growing dominance of AWS is making it increasingly difficult for open-source creators to earn a living from their development work 
AWS offers their software as a service and integrates it with other services.
Freedom 0 of free software here turns against the creators of the software.&lt;/p&gt;
&lt;p&gt;The BSL and SSPL are reactions to this.
Formally, they are not free software, according to OSI or DFSG.
But perhaps it is time for open source to once again face changes and new threats,
adapting licenses and definitions for the new era, as has already happened with GPLv3 and AGPL.&lt;/p&gt;
&lt;p&gt;Perhaps the FSF, OSI, and Debian will not move and will insist on their definitions of &amp;ldquo;free software.&amp;rdquo;
But this does not deter developers of software under BSL and SSPL:
their software is already &amp;ldquo;almost free&amp;rdquo; and, due to their special rule,
will formally become free software according to the old definition after a few years.
There is no reason to reject BSL or SSPL, except for fundamentalism towards free software.
However, if those who care about the open-source idea do not want AWS to be the only company with a successful open-source business model,
then change is necessary.
Otherwise, users will soon find themselves back with dull, traditional commercial software,
the kind they used to get from companies like Microsoft and Oracle.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Eine Revolution frit ihre Kinder</title>
      <link>https://blog.koehntopp.info/2023/11/11/eine-revolution-frisst-ihre-kinder.html</link>
      <pubDate>Sat, 11 Nov 2023 02:03:04 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/11/11/eine-revolution-frisst-ihre-kinder.html</guid>
      <description>&lt;p&gt;Dieser Text erschien in c&amp;rsquo;t 26/23 auf Seite 70.
Wie alle meine Texte ist er nach einiger Zeit auch in meinem Blog frei verfgbar.
Die hier verffentlichte Fassung ist die Rohfassung des Artikeltexts ohne Abbildungen und Illustrationen.&lt;/p&gt;
&lt;p&gt;This text is also &lt;a href=&#34;https://blog.koehntopp.info/2023/11/11/a-revolution-devours-its-children.html&#34;&gt;available in English&lt;/a&gt;

.&lt;/p&gt;
&lt;h1 id=&#34;eine-revolution-frisst-ihre-kinder&#34;&gt;
    &lt;a href=&#34;#eine-revolution-frisst-ihre-kinder&#34;&gt;
	Eine Revolution frisst ihre Kinder
    &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;von Kristian Khntopp&lt;/p&gt;
&lt;h2 id=&#34;abkehr-von-klassischen-open-source-lizenzen&#34;&gt;
    &lt;a href=&#34;#abkehr-von-klassischen-open-source-lizenzen&#34;&gt;
	Abkehr von klassischen Open-Source-Lizenzen
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Open Source war einmal angetreten, um Nutzern die grtmgliche Freiheit im Betrieb von Software zu garantieren und Software-Titanen den Kampf anzusagen.
Inzwischen haben diese aber gelernt, die verbrieften Freiheiten zu ihrem Vorteil zu nutzen.&lt;/p&gt;
&lt;p&gt;Es brodelt in der Open-Source-Gemeinde:
In jngerer Vergangenheit lsst sich beobachten,
dass etablierte Softwareunternehmen mit groer Nutzerbasis die Freiheiten der Nutzer ihrer Open-Source-Projekte durch einen Lizenzwechsel einschrnken.
Jngstes Beispiel ist das Unternehmen HashiCorp,
das auf Software fr Cloud-Infrastruktur spezialisiert ist und seine Kernprodukte unter die BSL v1.1 (Business Source License) gestellt hat,
eine formal nicht offene Lizenz.
Die Quittung kam prompt:
Inzwischen wurde die Software als OpenTofu geforkt und steht jetzt unter der Schirmherrschaft der Linux Foundation.&lt;/p&gt;
&lt;p&gt;HashiCorp ist nicht die erste Firma, die so etwas tut:
RedHat hat vor lngerer Zeit die Positionierung von CentOS als freie Alternative zu RedHat Enterprise Linux (RHEL) gendert
und krzlich die Herausgabe der RHEL-Quelltexte durch eine EULA (End User License Agreement) eingeschrnkt,
Elastic hat ElasticSearch und Kibana unter die formal nicht offene SSPL (Server Side Public License) gestellt,
und auch MongoDB ist nur noch unter der SSPL zu haben.&lt;/p&gt;
&lt;p&gt;Noch viel frher gab es Umzge von der GPLv2 zur GPLv3,
die Einfhrung der AGPL,
und einige Firmen wie Apple haben ein striktes GPLv3-Verbot fr ihre eigenen Softwareprodukte ausgesprochen.
Apple migriert zudem alle interne Software komplett von der GPL weg.
Sind diese Entwicklungen eine Bedrohung fr Open Source?
Und was sollen diese Lizenznderungen eigentlich bezwecken?
Um die Konfliktlinien zu verstehen, lohnt sich ein Blick in die Vergangenheit.&lt;/p&gt;
&lt;h2 id=&#34;vier-freiheiten-und-eine-zertifizierung&#34;&gt;
    &lt;a href=&#34;#vier-freiheiten-und-eine-zertifizierung&#34;&gt;
	Vier Freiheiten und eine Zertifizierung
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Open Source und Free Software gab es schon, bevor diese Worte dafr existierten.
Doch die eigentliche Open-Source-Revolution begann in den 1990er Jahren mit dem Linux Kernel
und den sich daraus ergebenden Distributionen.
Der Begriff Open Source wurde von Bruce Perens und Eric Raymond geprgt und in der Open-Source-Definition und den Debian Free Software Guidelines formalisiert.&lt;/p&gt;
&lt;p&gt;Beides sind Verfeinerungen und Klarstellungen der ursprnglichen Vier Freiheiten der Mutter aller Open-Source-Lizenzen,
der GNU General Public License (GPL), die da lauten:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Freiheit 0: Die Freiheit, das Programm fr jeden Zweck auszufhren.&lt;/li&gt;
&lt;li&gt;Freiheit 1: Die Freiheit, die Funktionsweise des Programms zu untersuchen und eigenen Bedrfnissen der Datenverarbeitung anzupassen. Das impliziert Zugang zum Quelltext.&lt;/li&gt;
&lt;li&gt;Freiheit 2: Die Freiheit, das Programm weiterzugeben. Die GPL fordert aber,
dass auch der Quelltext des Programms, der dem weitergegebenen Programm
entspricht, angeboten wird.&lt;/li&gt;
&lt;li&gt;Freiheit 3: Die Freiheit, das Programm zu verbessern und diese Verbesserungen
unter der originalen Lizenz weiterzugeben. Auch dies impliziert Zugang zum Quelltext und das Recht, diesen zu ndern.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Whrend die GPLv2 die Lizenz ist, die diese Freiheiten das erste Mal kodifiziert hat,
haben sich schnell eine ganze Reihe von Lizenzen entwickelt,
die alle Open Source nach den OSI-Richtlinien (Open Source Initiative) oder den DFSG (Debian Free Software Guidelines) sind
und von denen einige zwar frei, aber inkompatibel mit der GPL sind.
Das hat insbesondere in den spten 90er Jahren viele Usenet-Newsgroups dauerhaft mit Diskussionen gefllt.&lt;/p&gt;
&lt;h2 id=&#34;der-lamp-stack-eine-wilde-mischung-von-lizenzen&#34;&gt;
    &lt;a href=&#34;#der-lamp-stack-eine-wilde-mischung-von-lizenzen&#34;&gt;
	Der LAMP-Stack: Eine wilde Mischung von Lizenzen
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Der bekannte LAMP-Stack fr die Webentwicklung ist auch ein Beispiel fr den Lizenzwirrwarr,
mit dem man es bei Open Source zu tun haben kann.
LAMP beinhaltet den Linux Kernel, den Apache Webserver,
die MySQL-Datenbank und die Programmiersprache PHP.
All diese Bausteine haben unterschiedliche Lizenzen.&lt;/p&gt;
&lt;p&gt;Whrend der Linux-Kernel GPLv2-lizenziert ist, steht der Apache Webserver unter der Apache License 2.
Diese ist freizgig (permissive), das heit, es fehlen Bestimmungen, die erzwingen,
dass Vernderungen gegenber dem Originalprogramm unter derselben Lizenz wie das Originalprogramm weitergegeben werden mssen.&lt;/p&gt;
&lt;p&gt;MySQL hat gleich zwei Lizenzen:
Die Datenbank kann unter der GPL genutzt werden und unterliegt dann den Bestimmungen und Freiheiten,
die oben genannt wurden.
Der Urheberrechtsinhaber ist jedoch eine Firma (ursprnglich MySQL, dann SUN und jetzt Oracle), die alle Rechte innehat.
Entwickler mssen die Rechte an ihren Patches per Contributor License Agreement (CLA) an Oracle abtreten.
Dadurch kann Oracle den Quelltext auch unter einer kommerziellen Lizenz anbieten.&lt;/p&gt;
&lt;p&gt;Und PHP steht seit Version 4 unter der PHP-License.
Auch das ist eine freizgige Lizenz, die Nutzung und Weitergabe von PHP mit oder ohne Modifikationen,
als Quelltext oder ausfhrbares Programm erlaubt,
jedoch Einschrnkungen hinsichtlich des Gebrauches der Wortmarke PHP enthlt.&lt;/p&gt;
&lt;p&gt;Das fhrt zu einer wichtigen Frage der spten 90er Jahre:
Was passiert, wenn man Software mit unterschiedlichen Lizenzen mischt und zusammen in einer Distribution verbreitet
oder sie in einem bersetzungsprozess zusammen linkt?&lt;/p&gt;
&lt;p&gt;Das GNU Projekt hat relativ schnell klargestellt, dass die Grenzen der Lizenz die Prozessgrenzen sind.
Wenn man also ein Programm unter einer anderen Lizenz entwickelt und mit GNU-Software zusammen linkt,
sodass das Resultat hinterher in ein- und demselben Prozess ausgefhrt wird, dann geht das legal nur dann in Ordnung,
wenn die andere Lizenz mit der GPL kompatibel ist.&lt;/p&gt;
&lt;p&gt;Obwohl die GPL eine Open-Source-Lizenz ist, sind nicht viele Lizenzen mit der GPL kompatibel.
Das liegt daran, dass die GPL die Freiheit wahrende Einschrnkungen enthlt:
Man kann die Ausfhrung der Software nicht einschrnken (Nicht in Atomraketen!)
und ein Programm, das GPL-Komponenten enthlt, muss auch im Quelltext mit allen nderungen angeboten werden.
Das bedeutet: nicht nur die GPL-Komponenten, sondern alle Komponenten in diesem Prozessraum.&lt;/p&gt;
&lt;h2 id=&#34;die-debatte-um-die-infektise-gpl&#34;&gt;
    &lt;a href=&#34;#die-debatte-um-die-infekti%c3%b6se-gpl&#34;&gt;
	Die Debatte um die infektise GPL
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Aus der Pflicht zur Verffentlichung der Quellen ergab sich dann eine weitere Diskussion in den frhen Nullerjahren.
Damals wurden Linux und Open Source so gro, dass man sie nicht ignorieren konnte,
und eine Menge Start-ups kokettierten mit Open Source.
Die GPL war damals zwar die am weitesten verbreitete Lizenz, aber wenn man ein Start-up betreibt,
das sich durch Risikokapital finanziert, dann ist es keine attraktive Aussicht fr Investoren,
alle Quellen der eigenen Software unter der GPL herausgeben zu mssen.&lt;/p&gt;
&lt;p&gt;Aus dieser Zeit stammt der Anti-Open-Source-Slogan der viralen oder ansteckenden GPL,
der im Kern jedoch Unsinn ist:
Zum einen ist die GPL leicht einzuhegen, denn sie endet ja klar definiert an Prozessgrenzen,
andererseits sind die Bestimmungen der GPL sinnvoll, weil sie eine direkte Ausbeutung der Leistung anderer erschwert
(Quid pro quo: Wenn Du von Open Source profitierst, dann sollst Du auch auf die gleiche Weise dazu beitragen.).&lt;/p&gt;
&lt;h2 id=&#34;gplv3-gegen-softwarepatente&#34;&gt;
    &lt;a href=&#34;#gplv3-gegen-softwarepatente&#34;&gt;
	GPLv3 gegen Softwarepatente
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Venture Capitalists brachten als Reaktion eine weitere Bedrohung fr Open Source in Stellung,
auf die reagiert werden musste: Softwarepatente.
Wenn Start-ups ihre Software unter der GPL herausgeben mssen,
knnen sie ihr geistiges Eigentum eventuell anders einschrnken, um spter dafr Lizenzgebhren einzutreiben.
Damals waren das Softwarepatente, die als reale Bedrohung positioniert wurden.&lt;/p&gt;
&lt;p&gt;In der Rechtfertigung fr die Version 3 der GPL wird dies auch direkt thematisiert,
und die GPLv3 enthlt Regelungen, die vereinfacht besagen:
Wenn Du Patente verwendest, um Benutzer von beliebiger GPLv3-lizenzierter Software zu verklagen,
dann erlischt Dein Recht, jegliche GPLv3 Software zu verwenden.
Diese Klausel ist wirksam und sie hat unter anderem dazu gefhrt,
dass Apple jede Form von GPLv3-lizenzierter Software in seinen Produkten vermeidet
und sukzessive jegliche GPL-Software in Apple-Produkten durch anders lizenzierte Software ersetzt.&lt;/p&gt;
&lt;p&gt;Die Bestimmung, dass die GPL an Prozessgrenzen endet, ist auch fr das GNU-Projekt manchmal problematisch,
und so gibt es Varianten der GPL und Ausnahmen.
Zum Beispiel ist generierter Code von unter der GPL stehenden Programmen nicht GPL-geschtzt:
Dies ermglicht Codegeneratoren wie gcc, bison und flex.
Und fr einige Bibliotheken, darunter die glibc, gibt es die LGPL,
auch Lesser GPL genannt, die es erlaubt, die Bibliotheken gegen Nicht-GPL-Software zu linken.&lt;/p&gt;
&lt;h2 id=&#34;gpl-statt-lgpl-als-waffe&#34;&gt;
    &lt;a href=&#34;#gpl-statt-lgpl-als-waffe&#34;&gt;
	GPL statt LGPL als Waffe
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Andersherum haben einige Firmen die GPL als Waffe eingesetzt. Zum Beispiel waren Bibliotheken wie die libmysqlclient.so bis einschlielich MySQL 3.23 unter der LGPL verfgbar, aber ab Version 4 stehen sie unter der GPL. Linkt man diese Bibliothek also in sein kommerzielles Programm und will es ausliefern, dann muss man eine kommerzielle MySQL-Lizenz unter dem Dual-Licensing Programm kaufen. MySQL hat das im Slogan If you are free, we are free. If you are commercial, we are commercial zusammengefasst.&lt;/p&gt;
&lt;p&gt;Das war eine Zeit lang ein Problem fr die Programmiersprache PHP, die ja gegen diese Bibliothek gelinkt hat, um auf die Datenbank im Rahmen des LAMP-Stacks zugreifen zu knnen, aber eine formal nicht GPL-kompatible Lizenz hat. PHP ist dem Problem mit einer Re-Implementierung des Protokolls als mysqlnd begegnet, und parallel dazu hat MySQL das Problem gelst, indem sie eine Lizenz-Ausnahme fr PHP (und andere) definiert haben.&lt;/p&gt;
&lt;h2 id=&#34;weniger-gpl-mehr-mit-bsd-und-apache&#34;&gt;
    &lt;a href=&#34;#weniger-gpl-mehr-mit-bsd-und-apache&#34;&gt;
	Weniger GPL, mehr MIT, BSD und Apache
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;All diese Wirrungen sind ein Grund, warum moderne Open-Source-Software meist nicht mehr die GPL verwendet,
sondern andere Lizenzen wie MIT, BSD oder Apache bevorzugt.
Sie machen eine Reihe von kapitalfinanzierten Geschftsmodellen um Open Source einfacher,
wenn man eine Firma um ein (oft nur dem Namen nach) Open-Source-Produkt stricken will.
Ab 2005 beginnt die Bltezeit von auf Open Source basierenden Geschftsmodellen.
Das hat 15 Jahre lang gut genug funktioniert, um eine Reihe von Projekten gro zu machen.&lt;/p&gt;
&lt;p&gt;Einige dieser Projekte sind nicht auf einzelne Firmen als Trger angewiesen:
PHP, KDE und Postgres sind zum Beispiel stabile und gro angelegte OSS-Projekte,
hinter denen nicht eine einzelne groe Firma und ihre Venture-Kapitalgeber stehen 
sie alle zeichnen sich durch eine breite und vielfach verankerte Basis von Beitragenden aus.&lt;/p&gt;
&lt;p&gt;Seit einigen Jahren zeigen sich Risse:
RedHat, Elastic, MongoDB, MariaDB (ein MySQL-Fork), HashiCorp und viele andere haben ihre Lizenzen gendert
oder sich umstrukturiert, um einen bestimmten Use-Case auszuschlieen.
Da dies eine Verletzung der Freiheit 0 darstellt,
sind es damit auch keine Open-Source-Projekte im Sinne der OSI und der DFSG mehr.&lt;/p&gt;
&lt;h2 id=&#34;der-elefant-im-raum-ist-die-cloud&#34;&gt;
    &lt;a href=&#34;#der-elefant-im-raum-ist-die-cloud&#34;&gt;
	Der Elefant im Raum ist die Cloud
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Amazon Web Services (AWS) ist ein System und eine Firma,
die stellvertretend fr ein Geschftsmodell steht:
Es monetarisiert den in Unternehmen oft vernachlssigten und unterfinanzierten Aspekt Operations
und sieht vor, Software fr Dritte nicht zu entwickeln, sondern vorrangig zu betreiben.&lt;/p&gt;
&lt;p&gt;Damit ist Amazon sehr erfolgreich:
Schon lnger laufen in dessen Rechenzentren mehr Neuinstallationen von MySQL
(und MongoDB, Postgres oder Elastic und vielen anderen Datenbanken) als lokal beim Kunden (on premise).
Dies ist eine Klasse von Systemen, die notorisch schwierig zu betreiben sind,
weil Fehler beim Betrieb Daten unwiederbringlich ruinieren knnen.
Natrlich kann man eine fehlerhafte Version einer Datenbank auf die vorhergehende Version zurckrollen,
aber die Daten, die durch den Fehler zerstrt worden sind, sind immer noch dauerhaft weg.&lt;/p&gt;
&lt;p&gt;Die systematische Unterschtzung der Kosten und des Aufwandes von Operations macht das Prinzip Software as a Service (SaaS) erfolgreich.
SaaS-Anbieter verkaufen nicht nur einen Dienst,
sondern im Grunde genommen vornehmlich ein Betriebskonzept fr diesen Dienst,
der einen reibungslosen und unterbrechungsfreien Betrieb direkt nach der Inbetriebnahme erlaubt.
Weil das Betriebskonzept erprobt und vorgeschrieben ist,
kann man die Qualitt der Dienstleistung standardisieren, messen und dann stabile Vertrge mit Dritten darber eingehen.&lt;/p&gt;
&lt;p&gt;Kunden begren das, denn Software zu betreiben ist ein Problem,
das mindestens so schwierig ist wie Software zu entwickeln.
Viele Kunden wollen sich damit nicht auseinandersetzen.
Oft werden dabei Verfgbarkeiten, Antwortzeiten und Kosten in Kauf genommen,
die genau so vorher bei den eigenen Inhouse-Teams vollkommen inakzeptabel waren,
nur um beispielsweise den Aufgabenkomplex Betrieb der Datenbanken aus dem Haus zu bekommen  das zeigt,
wie unangenehm Firmen die Auseinandersetzung mit Operations ist.&lt;/p&gt;
&lt;p&gt;Dabei ist der Betrieb dieser Software durch AWS nicht durch eine kommerzielle Vereinbarung zwischen dem Hersteller der Software und Amazon gedeckt,
sondern erfolgt auf der Grundlage der Freiheit 0 der GPL:
Amazon darf die Software zu jedem beliebigen Zweck ausfhren, auch als Service fr Dritte.
In Folge streicht Amazon das Geld fr den Betrieb dieser Installationen ein,
aber der eigentliche Softwareentwickler, die Herstellerfirma oder -gruppe bekommt davon nichts.
Das ist kein nachhaltiges Finanzierungsmodell, aber durch die GPL gedeckt und sehr vorteilhaft fr AWS,
sodass man dort auch keine Veranlassung sieht, etwas daran zu ndern.&lt;/p&gt;
&lt;h2 id=&#34;business-source-license-als-frhe-reaktion&#34;&gt;
    &lt;a href=&#34;#business-source-license-als-fr%c3%bche-reaktion&#34;&gt;
	Business Source License als frhe Reaktion
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Das ist schon recht frh als Problem erkannt worden:
Bei MariaDB findet man die erste Erwhnung der Business Source License (BSL) im Blog von Monty Widenius schon 2013,
und MariaDB setzt sie fr bestimmte Komponenten seit 2016 ein,
mit leichten Vernderungen nach Anregungen von Bruce Perens dann seit 2017 in der Version 1.1.
Andere Produkte ziehen nach und gehen ebenfalls unter die BSL:
Couchbase, Uptrace, Kurtosis, Sentry, CockroachDB und neuerdings alle HashiCorp-Kernprodukte.&lt;/p&gt;
&lt;p&gt;Die Idee hinter der BSL ist, dass die Software weiterhin frei nutzbar und der Quelltext verfgbar bleibt,
aber mit Einschrnkungen.
Die wichtigste Einschrnkung meint blicherweise AWS darf das nicht nutzen,
formuliert als Die Software darf nicht als SaaS fr Dritte angeboten werden.
Man kann die Software also weiter so verwenden wie zuvor.
Man kann sie auch in AWS selbst betreiben oder man kann sie innerhalb der eigenen Organisation fr andere Abteilungen bereitstellen.&lt;/p&gt;
&lt;p&gt;Aber man wird den Betrieb der Software nicht als Dienst von einem Cloud-Betreiber kaufen knnen,
sondern nur vom Ersteller der Software selbst (etwa via AWS Marketplace).
Diese Einschrnkung dient dazu, die Finanzierung der Entwicklung der Software sicherzustellen,
indem AWS die Mglichkeit genommen wird, diesen Geldstrom vollstndig fr sich selbst abzuzweigen.
Die BSL kommt mit einer weiteren Regel, die besagt,
dass Codenderungen sptestens nach vier Jahren unter eine anerkannte Open-Source-Lizenz fallen (meist die Apache-2.0-Lizenz oder die GPL),
sodass ltere Versionen der Software auf jeden Fall immer Open Source sind.&lt;/p&gt;
&lt;p&gt;Formal ist BSL-Software keine Open Source im Sinne der OSI oder DFSG,
weil anders als bei der GPL die Freiheit 0 (Ausfhren fr welchen Zweck auch immer) eingeschrnkt wird.
Man bezeichnet sie deshalb auch als Source Available.
Auch die von MongoDB, Elastic und Kibana verwendete Server Side Public License verfolgt dieselbe Idee,
nur anders: Die SSPL ist eine AGPLv3 Variante,
die ebenfalls die Freiheit 0 einschrnkt und verbietet, die Software fr Dritte (as a Service) zu betreiben,
es sei denn, man erwirbt eine kommerzielle Lizenz.&lt;/p&gt;
&lt;h2 id=&#34;unfreie-freie-software&#34;&gt;
    &lt;a href=&#34;#unfreie-freie-software&#34;&gt;
	Unfreie freie Software
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Die Grundidee hinter den Freiheiten der GPL ist Geben und Nehmen:
Du kannst unsere Software nutzen, musst aber selbst gutartig mitspielen.
Weil AWS seine Position im Markt immer weiter ausbaut, wird es den Erstellern von Open Source zunehmend schwerer gemacht,
ihren Unterhalt mit der Entwicklungsarbeit zu verdienen 
AWS bietet deren Software als Service an und verwebt ihn mit weiteren Dienstleistungen.
Die Freiheit 0 der freien Software wendet sich hier gegen die Ersteller der Software.&lt;/p&gt;
&lt;p&gt;Die BSL und die SSPL sind eine Reaktion darauf.
Sie sind formal gesehen keine freie Software nach OSI oder DFSG.
Aber vielleicht ist es auch fr Open Source wieder einmal an der Zeit,
den Vernderungen und den neuen Bedrohungen ins Auge zu sehen und die Lizenzen und die Definitionen der neuen Zeit anzupassen,
so wie dies mit der GPLv3 und der AGPL schon einmal geschehen ist.&lt;/p&gt;
&lt;p&gt;Vielleicht bewegen sich FSF, OSI und Debian aber auch nicht und beharren auf ihren Definitionen von freier Software.
Die Entwickler von Software unter der BSL und der SSPL ficht das nicht an:
Ihre Software ist jetzt schon fast frei
und wegen ihrer speziellen Regel nach einigen Jahren dann auch formal freie Software nach alter Definition.
Einen Grund, die BSL oder SSPL abzulehnen, gibt es nicht, ausgenommen Fundamentalismus fr freie Software.
Aber wenn diejenigen, denen etwas am Open-Source-Gedanken liegt, nicht wollen,
dass AWS die einzige Firma mit einem erfolgreichen Open-Source-Geschftsmodell ist,
muss sich etwas ndern.
Sonst landen Nutzer schon bald wieder bei langweiliger, traditioneller kommerzieller Software,
wie man es frher von Microsoft und Oracle gewohnt war.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Sitzende Ttigkeit</title>
      <link>https://blog.koehntopp.info/2023/10/10/sitzende-taetigkeit.html</link>
      <pubDate>Tue, 10 Oct 2023 02:03:04 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/10/10/sitzende-taetigkeit.html</guid>
      <description>&lt;p&gt;Ich arbeite im Sitzen, 8h am Tag beruflich, und dann noch ein wenig mehr aus Spa:
&lt;a href=&#34;https://blog.koehntopp.info/2022/02/21/spaces.html&#34;&gt;Spaces&lt;/a&gt;

.&lt;/p&gt;
&lt;p&gt;Ich habe meinen eigenen Platz daheim, immer schon gehabt.
Das habe ich von meinem Vater gelernt, der Amateurfunker war und daheim seinen hchst eigenen Bastel- und Arbeitsplatz hatte,
seinen Ort und Rckzugplatz.
Zu einem ordentlichen Arbeitsplatz gehrt auch ein Sitz.
Der Sitz ist ein Arbeitsgert und da sollte man angesichts der Anzahl der darin verbrauchten Stunden nicht kaspern, sondern klotzen.&lt;/p&gt;
&lt;p&gt;Meinen alten Stuhl habe ich 2003 in Karlsruhe gekauft, ein Dauphin Shape Comfort XT mit nahezu allen Optionen.
Der hat 20 Jahre gehalten.
Aber inzwischen wurde es Zeit fr einen Ersatz:
Nicht nur ist die Gasdruckfeder im Eimer (die habe ich schon einige Male getauscht, sicher ist sicher),
sondern intern ist die Mechanik auch abgenudelt und verschiedene Einstellmglichkeiten haben nicht mehr gut funktioniert.&lt;/p&gt;
&lt;p&gt;Andererseits: 20 Jahre.
Das Teil hat in Karlsruhe, 2 Orten in Berlin, und in Amsterdam Dienst getan.
Dann ist auch gut.
Hier ist der neue, wieder ein Dauphin Shape XT.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/10/sitz-01.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Anlieferung fertig montiert in einem sehr stabilen Monsterkarton.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/10/sitz-02.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Ausstattung, wie bestellt, via &lt;a href=&#34;https://www.objectservice.de/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://www.objectservice.de/&lt;/a&gt;

.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Da der Sitz vormontiert bestellt war, gestaltete sich das Auspacken schnell und einfach.
Dachte ich, aber es gab Luftpolsterfolie!&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/10/sitz-03.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Luftpolsterfolie!&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Der Stuhl kommt mit einem ausfhrlichen Handbuch und einer Erklrung der Grundlagen der Ergonomie.
Das braucht es auch, denn dies ist ein richtiger Brostuhl,
und kein Gamer-Stuhl oder gar, wie einige Kollegen auch im Jahr 3 der Pandemie, ein Kchenstuhl.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/10/sitz-04.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Bild des Brostuhls am Arbeitsort: Hhenverstellbarer Schreibtisch, jede Menge Strom, eine Rollmatte und ein ordentlicher Stuhl.
Tageslicht von Links.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Der Stuhl kommt mit einer Vielzahl an Einstellmglichkeiten.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/10/sitz-05.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;bersicht der Einstellmglichkeiten.&lt;/em&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Sitzhhe.&lt;/li&gt;
&lt;li&gt;Sitztiefe. Die Sitzflche gleitet nach vorn, und ich passe auf den Stuhl.&lt;/li&gt;
&lt;li&gt;Armlehnen weit ausfahren: Ein wichtiger Handgriff, damit mein breiter Hintern in den Sessel passt.&lt;/li&gt;
&lt;li&gt;Rckenlehne fixieren oder losdrehen.&lt;/li&gt;
&lt;li&gt;Wenn man 4 losmacht, kann man Einstellen, wie stark die Rckenlehne Gegendruck macht.&lt;/li&gt;
&lt;li&gt;Nicht sichtbar: Armlehnen Hhe.&lt;/li&gt;
&lt;li&gt;Lordosensttze Hhe.&lt;/li&gt;
&lt;li&gt;Die Rckenlehne ist hhenverstellbar, und das ist so auch notwendig bei mir.&lt;/li&gt;
&lt;li&gt;Rckenlehne und Sitzflche neigen sich zusammen nach vorne und hinten (&amp;ldquo;Synchromechanik&amp;rdquo;).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Es gibt noch besser ausgestattete Versionen von diesem Stuhl,
bei denen die Armlehnen auch in Neigung und Winkel verstellbar in mehreren Dimensionen sind,
aber das ist meiner Erfahrung nach nicht dringend.
Eine Version mit Nackensttze ist auch zu haben.&lt;/p&gt;
&lt;p&gt;Bezge kommen in mehreren Preiskategorien (bis &amp;ldquo;Chefsessel Leder&amp;rdquo;) und sind auf Beanspruchung ausgelegt.&lt;/p&gt;
&lt;p&gt;Zum Einstellen kann man einfach die Anleitung im Handbuch befolgen.
Die Schritte sind im Grunde bei jedem Stuhl dieselben, sofern die betreffenden Einstellmglichkeiten vorhanden sind:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Die Synchronmechanik und andere Schwingteile blockieren (z.B. die Rckenlehne aufrecht fixieren) und die Armlehnen ausfahren auf maximale Breite.
Das macht Platz im Stuhl und erzeugt eine neutrale Sitzposition. Hinsetzen.&lt;/li&gt;
&lt;li&gt;Sitzhhe einstellen. Fe platt auf den Boden, dann mssen die Oberschenkel waagrecht im 90 Grad Winkel stehen.
Manche Menschen wollen die Sitzhhe noch ein wenig hher haben.&lt;/li&gt;
&lt;li&gt;Sitztiefe einstellen, also die Sitzflche so weit ausfahren, da sie bis auf 2-3 Finger an die Kniekehlen heranreicht und die Beine untersttzt.&lt;/li&gt;
&lt;li&gt;Nun die Position der Rckenlehne einstellen: Neigung, und wenn hhenverstellbar auch Hhe, bis die Untersttzung im Kreuz angenehm ist.
Eventuell vorhandene Lordosensttze in die richtige Position (ber dem Becken ins Kreuz) bringen.&lt;/li&gt;
&lt;li&gt;Jetzt Sitzflchenneigung einstellen, also die Synchro loslsen und schaukeln, dann in einer angenehmen Position fixieren,
und danach die Rcken-Neigung noch mal nachstellen.&lt;/li&gt;
&lt;li&gt;Armlehnen einstellen - Breite, Hhe, Position.&lt;/li&gt;
&lt;li&gt;Danach Feineinstellung justieren: Synchro los, und Rckenlehnen-Gegendruck anpassen, Lordosensttze Druck einstellen
und was sonst noch an Hilfseinstellungen da ist.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Zentral sind Hhe, Sitztiefe und Stellung der fixierten Rckenlehne in Neigung und Hhe der Lordosensttze.
Der Rest ist dann drumherum zu arrangieren.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Fertig gelesen: Starter Villain</title>
      <link>https://blog.koehntopp.info/2023/10/01/fertig-gelesen-starter-villain.html</link>
      <pubDate>Sun, 01 Oct 2023 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/10/01/fertig-gelesen-starter-villain.html</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://mastodon.social/@scalzi&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;John Scalzi&amp;rsquo;s&lt;/a&gt;

 latest book is currently
&lt;a href=&#34;https://www.amazon.de/Starter-Villain-turbo-charged-supervillains-minions-ebook/dp/B0BJDXRGX8&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Starter Villain&lt;/a&gt;

.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/10/starter-villain.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;The premise is simple: Charlie&amp;rsquo;s estranged Uncle Jake died.
Charlie and his uncle are estranged because Charlie&amp;rsquo;s father and Jake had a fallout at the funeral of Charlie&amp;rsquo;s mom,
and Charlie has not had much contact at all with Jake ever since.
Now, with Jake also dead, it turns out that Charlie somehow is his only heir.&lt;/p&gt;
&lt;p&gt;Then Charlie is holding watch at Jake&amp;rsquo;s funeral, and the entire story turns quickly into a James Bond novel,
with strange brutes trying to stab the corpse of Jake, ensuring he&amp;rsquo;s really dead,
and a collection of very weirdly imprinted flower bouquets &amp;ndash; &amp;ldquo;See you in hell&amp;rdquo; being one of the nicer ones.&lt;/p&gt;
&lt;p&gt;Charlie quickly learns that his uncle was a Villain, complete with a lair on a volcano island,
laser weapons to destroy satellites, and a collection of very nice and special cats (and Dolphins, but they are special and not nice).
He also learns that &amp;ldquo;Villain&amp;rdquo; does not exactly mean what he thinks that it means.&lt;/p&gt;
&lt;p&gt;Scalzi spent his pages playing nicely with the clichs and expectations around James-Bond-like supervillains,
and turning them into a fun story with a number of expected and unexpected twists.
He wouldn&amp;rsquo;t be Scalzi if there is no stuff to think about lurking in the background.
In this case, fairly obviously the relationship between 1950&amp;rsquo;s supervillains and present day billionaires, oligarchs
and our survival as a species.&lt;/p&gt;
&lt;p&gt;A nice two-afternoon read.&lt;/p&gt;
&lt;p&gt;&amp;ldquo;&lt;a href=&#34;https://www.amazon.de/Starter-Villain-turbo-charged-supervillains-minions-ebook/dp/B0BJDXRGX8&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Starter Villain&lt;/a&gt;

&amp;rdquo;,
John Scalzi, EUR 9,99.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Fertig gelesen: A Life with Footnotes</title>
      <link>https://blog.koehntopp.info/2023/09/30/fertig-gelesen-a-life-with-footnotes.html</link>
      <pubDate>Sat, 30 Sep 2023 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/09/30/fertig-gelesen-a-life-with-footnotes.html</guid>
      <description>&lt;p&gt;Rob Wilkins was the assistant and a good friend of Terry Pratchett.
He wrote a posthumous biography, titled
&lt;a href=&#34;https://www.amazon.de/gp/product/B09R2B8J17&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;A Life With Footnotes&lt;/a&gt;

.
Wilkins is now the manager of the Pratchett literary estate.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/pratchett.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;The book does what a biography is supposed to do:
It traces the life of Terry Pratchett,
illuminating his origins and the experiences that shaped his worldview.
Filled with anecdotes and tales from his readings, from conventions, and other encounters with fans,
it sketches a portrait of a lovable, quirky personality who crafted stories in his mind and then simply penned them down.&lt;/p&gt;
&lt;p&gt;Rob Wilkins then takes on the challenging segment of the biography and guides us through the tragic phase of Terry Pratchett:
his Alzheimer&amp;rsquo;s diagnosis, the mental and physical decline, the ever-increasing loss of control, and the interplay of good and bad days,
leading up to the emotional farewell that occurred long before his physical passing.&lt;/p&gt;
&lt;p&gt;&amp;ldquo;&lt;a href=&#34;https://www.amazon.de/gp/product/B09R2B8J17&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Terry Pratchett: A Life With Footnotes&lt;/a&gt;

&amp;rdquo;, Rob Wilkins, EUR 9,49.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Fertig gelesen: Combat Ready Kitchen</title>
      <link>https://blog.koehntopp.info/2023/09/29/fertig-gelesen-combat-ready-kitchen.html</link>
      <pubDate>Fri, 29 Sep 2023 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/09/29/fertig-gelesen-combat-ready-kitchen.html</guid>
      <description>&lt;p&gt;In &lt;a href=&#34;https://www.amazon.de/gp/product/B00TY3ZOQE&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Combat Ready Kitchen&lt;/a&gt;

,
Anastacia Marx de Salcedo traces the history of food preservation from an american point of view,
and demonstrates the co-development of combat rations and modern U.S. supermarket food.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/combat-ready.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;The book takes us through the history of U.S. combat rations, from before the invention of the tin can, through canned,
better preserved, but incredibly heavy food to what soldiers have today.
It shows how these military innovations have been seeded, purposefully, into the civilian food industry,
in order to enable the military to source food from civilian companies for their purposes, in formats that suit them.
This also had influence on how the industry preserves food for civilian consumption and enabled a multitude of convenience foods.&lt;/p&gt;
&lt;p&gt;While the development of food preservation for military and civilian needs was somewhat systematic,
the book is not.
It goes through the history not chronologically, but anecdotally, roughly ordered by kind of food,
but with plenty of sidelines, side stories and other distractions.
It still is an entertaining read, but it makes it hard to put down the book and take stock of what you just learned.&lt;/p&gt;
&lt;p&gt;One thing I took away is that food preservation as we understand it today is much more recent than most people think.
It is a thing humanity only learned in the late 80ies and early 90ies, and even today fundamental progress is being made.
Also, a lot of the stuff we do is not actually bad for the food, the nutrients or the taste,
it is in fact perfectly fine.
Still, other things amount to basically breaking down the food to constituent parts, and then reassembling something
from the parts, and that&amp;rsquo;s maybe less good, given how little we actually understand what makes a meal nourishing or healthy,
even today.&lt;/p&gt;
&lt;p&gt;Entertaining and interesting, but structured in a way that makes it harder than necessary for me to pull value out of it.&lt;/p&gt;
&lt;p&gt;&amp;ldquo;&lt;a href=&#34;%28https://www.amazon.de/gp/product/B00TY3ZOQE%29&#34;&gt;Combat Ready Kitchen: How the U.S. Military Shapes The Way You Eat&lt;/a&gt;

&amp;rdquo;,
Anastacia Marx de Salcedo, EUR 5.25.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Solarenergie 2022 vs. 2023</title>
      <link>https://blog.koehntopp.info/2023/09/27/solarenergie-2022-vs-2023.html</link>
      <pubDate>Wed, 27 Sep 2023 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/09/27/solarenergie-2022-vs-2023.html</guid>
      <description>&lt;p&gt;Dieses Jahr war nicht sehr hei bei uns, und auch nicht so tdlich trocken wie letztes Jahr.
Das war notwendig und angenehm, auch wenn es den Ertrag vom Dach um 10-15% gegenber dem Vorjahr gedrckt hat.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/solar-comparison-01.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;2022 in Blau (links verschoben), 2023 in Grn (rechts).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;2022 brachte uns von April bis Jahresende 6389kWh, 2023 brachte uns vom Jahresbeginn bis jetzt 6204kWh.
Okt+Nov+Dez 2022 waren 407+170+91=668kWh.
Damit kme 2023 in total auf 6872kWh.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;3330Wp auf 53Grad Azimuth, 60Grad Declination, leichte Verschattung im Morgen und im Winter durch Bume.&lt;/li&gt;
&lt;li&gt;5920Wp auf 233Grad Azimuth, 60Grad Declination, leichte Verschattung am sehr spten Abend durch Dachgaube, Optimizer.&lt;/li&gt;
&lt;li&gt;=&amp;gt; 9250 Wp in total.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Wir hatten einen Verbrauch von 4837kWh/Jahr im letzten Jahr vor den Panels.
Jun 2022 bis 2023 war -2800kWh Netto (Verbrauch - Ertrag) und etwa 2300kWh Netzbezug.
Durch das neue Elektroauto werden wir aus Jun 2022 bis 2023 mit Glck +/- Null in Summe rauskommen.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/solar-comparison-02.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Jahresverbrauch im Vergleich.
Der Abrechnungszeitraum ist Juni bis Juni des Folgejahres.
Das Jahr 2020/2021 war das letzte Jahr ohne Solaranlage.
Im Jahr 2021/2022 kam Anfang April die Solaranlage dazu, und
im Jahr 2022/2023 war durchgehend Solarenergie vorhanden.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Die Themen &amp;ldquo;Gas weg&amp;rdquo; und &amp;ldquo;Klimaanlage rein&amp;rdquo; sind immer noch offen und noch zu bearbeitende Investitionsprojekte fr das kommende Jahr.
Zu ersetzen sind 1250m^3 = 12500kWh Primrverbrauch.
Das werden dann weitere 4160kWh bei einer angenommenen Arbeitszahl von 3.&lt;/p&gt;
&lt;p&gt;Wir liegen bei 75-80kWh pro qm und Jahr.
Das setzt uns gerade eben auf eine deutsche &lt;a href=&#34;https://www.bundestag.de/resource/blob/964446/f5d200e4905963c7b23ad390b4f1b547/WD-5-072-23-pdf-data.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Energieeffizienzklasse C&lt;/a&gt;


oder &amp;ldquo;A++&amp;rdquo; bis &amp;ldquo;A+&amp;rdquo; in der niederlndischen Skala (ebenda).&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/solar-comparison-03.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Gasverbrauch pro Jahr in m^3.
Der Abrechnungszeitraum ist wiederum Juni bis Juni.
In 2021/2022 wurden 1251m^3 verbraucht.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Die Investments waren&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ca. 11k fr das Solardach, 8k nach Frderung.&lt;/li&gt;
&lt;li&gt;ca. -2.6k fr den Ladepunkt 11kW.&lt;/li&gt;
&lt;li&gt;ca. 35k fr das Auto (das alte Auto mute sowieso ersetzt werden).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Auf der Liste stehen noch einmal ~10k fr Aircondition/Luft-Luft Wp.&lt;/p&gt;
&lt;p&gt;Weit unten auf der Liste stehen noch einmal 10k fr eine 10-15 kW Hausbatterie,
aber das hat die kleinste Prioritt.
Die Batterie wird im Nov-Feb nicht voll werden, soda wir dort Netzstrom beziehen werden.
Sie kann im Rest des Jahres 3-5kWh Nachtverbrauch puffern.
Eine 5kWh-Batterie hat nicht die Amps, die geliefert werden mssen, wenn Leistung gebraucht wird,
also sind mindestens 10kWh (ca 7k Euro) fllig.&lt;/p&gt;
&lt;p&gt;Nach Abschluss aller Umstellungen kommen wir bei einem Nettostromverbrauch von 4000kWh/Jahr raus.
Im Moment sind wir Netto balanced (-/+ Null) oder -1000kWh/Jahr, je nachdem wie viel gefahren wird.&lt;/p&gt;
&lt;p&gt;Der tatschliche Netzbezug wird deutlich hher sein, ich schtze 3000kWh mehr fr eine Gesamtsumme von 7000kWh/a.
Das luft auf 2500Euro Gesamtenergiekosten im Jahr raus, fr Haus und Auto.
Das ist ausnehmend wenig.&lt;/p&gt;
&lt;p&gt;An normalen September-Tagen speisen wir in etwa 4kWh Netto ein.
Brutto sind es 10kWh von 14.5kWh Produktion, und wir ziehen 5.7kWh aus dem Netz.
Nachts saugt das Haus 0.3 kW, tags immer ein wenig, wenn ein Herd oder eine Mikrowelle mehr Watt will als das Dach liefern kann.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/solar-comparison-04.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;


&lt;em&gt;Tage, an denen das Auto aufgeladen wird, sind in der Monatsansicht klar erkennbar.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Wen das E-Auto geladen wird, ist der Tagesverbrauch deutlich hher, denn es werden dann circa 40 kWh in 4 Stunden bezogen.
Da hilft dann auch eine Batterie nicht.
Im Monatsverlauf sind Ladetage klar erkennbar.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Fertig gelesen: Blue Machine</title>
      <link>https://blog.koehntopp.info/2023/09/26/fertig-gelesen-blue-machine.html</link>
      <pubDate>Tue, 26 Sep 2023 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/09/26/fertig-gelesen-blue-machine.html</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://fediscience.org/@helenczerski&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Helen Czerski&lt;/a&gt;

 wrote a book.
&lt;a href=&#34;https://www.amazon.de/Blue-Machine-Ocean-Shapes-English-ebook/dp/B0BCTPP3DH&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Blue Machine: How the ocean shapes our world&lt;/a&gt;


occupies the weird space between memoir, travel blog and science outreach.&lt;/p&gt;
&lt;p&gt;In the middle of this she manages to explain the biggest machine on our planet:
The collection of oceans in which the continents are embedded.
But also the deep love of science, the desire to understand how our world functions,
and the connection between all people than live on it.&lt;/p&gt;
&lt;p&gt;The book is the story of a person who literally travelled the world, from the poles to the equator,
and from the surface of the oceans to their dark cold depths.
It also is the story of a physicist with knowledge about bubbles and how they work,
and how that line of research led her around the world, and into the oceans.
It also is a gentle introduction into climate science,
showing us how the ocean can be seen as a machine that manages the thermals of the planet,
capturing and transporting heat, feeding the weather machine in the atmosphere with energy and water vapor,
and also capturing and releasing carbon dioxide.&lt;/p&gt;
&lt;p&gt;Following her travels and experiences, we learn about the vertical layering structure of the oceans,
about the ability of water to capture fantastic amounts of energy,
about currents and how they transport water, energy, nutrients and life around the world,
and how humans have been living off all this on the surface of something much greater, deeper and larger than we ever imagined.&lt;/p&gt;
&lt;p&gt;This is an amazing and entertaining book that shares a unique and personal perspective of our world,
and at the same time manages to convey how something this vast and enormous can be at the same time fragile and in need our or care and understanding.&lt;/p&gt;
&lt;p&gt;Strongly recommended read, well worth the time.&lt;/p&gt;
&lt;p&gt;&amp;ldquo;&lt;a href=&#34;https://www.amazon.de/Blue-Machine-Ocean-Shapes-English-ebook/dp/B0BCTPP3DH&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Blue Machine&lt;/a&gt;

&amp;rdquo;, Helen Czerski, EUR 15.62&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Elite</title>
      <link>https://blog.koehntopp.info/2023/09/20/elite.html</link>
      <pubDate>Wed, 20 Sep 2023 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/09/20/elite.html</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=LhTTpV5qFrs&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/elite.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=LhTTpV5qFrs&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;C64 Elite (1983) Longplay&lt;/a&gt;

&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Das ist Elite (1984).
Das Spiel wird heute 39 Jahre alt.&lt;/p&gt;
&lt;p&gt;Spiele zu jener Zeit waren nicht nur 2D,
sie waren auch Arcade.
Man spielt, und wenn man stirbt, ist das Spiel vorbei  die nchste Partie fngt man von vorne an.&lt;/p&gt;
&lt;p&gt;Elite ist das erste Spiel mit animierter 3D-Grafik, und es ist auch das erste Spiel mit Savegames und Progression.
Als solches hat es die Spieleentwicklung sehr umfassend beeinflusst.
Wing Commander, EVE und No Man&amp;rsquo;s Sky haben ihre Quellen hier.&lt;/p&gt;
&lt;p&gt;Elite war eine Idee von David Braben und Ian Bell,
beides Englnder und daher kam das Spiel zunchst fr den BBC Micro raus.
Es wurde spter auf viele andere 8-Bit Systeme portiert,
darunter auch der C64.
Es verkaufte sich rund 100.000 mal auf dem BBC Micro und weitere 600.000 mal fr den C64.
Insgesamt wurden rund 1 Million Exemplare umgesetzt.&lt;/p&gt;
&lt;p&gt;Insgesamt gab es von Elite selbst noch drei Nachfolgespiele, die aktuelle Version ist Elite: Dangerous.
Da sieht das Gameplay dann so aus:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=LPMVLk7dwfs&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/elite-dangerous.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=LPMVLk7dwfs&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Elite Dangerous&lt;/a&gt;

 Gameplay.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Mein Elite T-Shirt hat das C64 Elite Wireframe Model der Cobra und den Text &amp;ldquo;Keep Calm And Jump Onwards&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/elite-jump-retrowinder.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;T-Shirt Design &lt;a href=&#34;https://blog.koehntopp.info/uploads/2023/09/elite-jump-retrowinder.png&#34;&gt;mit schwarzem Hintergrund&lt;/a&gt;

 und &lt;a href=&#34;https://blog.koehntopp.info/uploads/2023/09/elite-jump-onwards-transparent.png&#34;&gt;in transparent&lt;/a&gt;

.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>The Gospel of Efficiency vs. Actual Growth</title>
      <link>https://blog.koehntopp.info/2023/09/19/the-gospel-of-efficiency-vs-actual-growth.html</link>
      <pubDate>Tue, 19 Sep 2023 01:02:03 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/09/19/the-gospel-of-efficiency-vs-actual-growth.html</guid>
      <description>&lt;p&gt;A decade ago, I came as a performance specialist into a rapidly growing environment.
With rapid growth, I mean anything that is larger than what Moore&amp;rsquo;s Law once delivered.
Moore&amp;rsquo;s law comes out at upwards of 45% Year-on-Year (YoY).
In my case, we experienced 80% YoY worldwide with 220% YoY in certain regions of the world for many years.
Even in 2008, when the economy stagnated, we still made 45% or more.&lt;/p&gt;
&lt;p&gt;Onboarding people into such an environment is weird.
They all have been programmed by their university education and their previous work experience to build things that last,
to consider things carefully and to be efficient, and save money at all cost.&lt;/p&gt;
&lt;p&gt;That is not how anything works in a high-growth environment, at all.
Rapid growth kills.
The tech we build, we build it for a certain expected target size.
Good tech can sustain a 10x growth (or shrinkage), but usually not much more.
At a larger change, things tend to fall apart.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;$&lt;/span&gt; bc -l
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt;&amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;scale&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt;&amp;gt;&amp;gt; l&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;10&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;/l&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;3.321
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&lt;/span&gt;&amp;gt;&amp;gt; l&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;10&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;/l&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;1.45&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;6.204
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;When you double each year, 10x is 3.3 years, approximately.&lt;/li&gt;
&lt;li&gt;When you grow at Moore&amp;rsquo;s Law rate, 10x is 6.2 years, approx.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In a high-growth an environment, when you write software,
you can expect it to last around 4 years or so until it needs to be re-architected in order to continue to produce the same deliverables as before.
You do not know how it will fail much in advance, nor do you know how the business environment will change much in advance:
As you grow, bottlenecks will show up in unexpected places.&lt;/p&gt;
&lt;p&gt;If you grow faster than Moore&amp;rsquo;s law, buying larger computers will not help you.
You need to buy more computers, and change your code to run in a distributed environment.
That changes performance fundamentally, and code needs to be changed in order to deal with the properties of distributed environments.
Running distributed systems will add complexity that you really do not want in order to maintain growth,
because it makes change harder and slower, which you really can&amp;rsquo;t use, if you grow fast.&lt;/p&gt;
&lt;p&gt;Finally, on top of the change in technology, you also need to deal with change in organiation,
and to integrate a lot of new people which you need in order to deal with added complexity.&lt;/p&gt;
&lt;p&gt;That means, several unusual things are important, others that people have been trained to take as important are not.&lt;/p&gt;
&lt;p&gt;For example, in such an environment, all software is ephemeral.
In four years time it will be largely useless.
You do not know how things will fail unless you are close to failure.
You have vision for about 12 months ahead, at most.&lt;/p&gt;
&lt;p&gt;You will need to start to change your failing software by making architectural changes.
You do not know if they will succeed in time.
Do not follow one plan, follow all plans and hope that at least one succeeds in time.&lt;/p&gt;
&lt;p&gt;Cost is relevant only in the sense that you must not pay for current expenses with future growth.
You must be cash flow positive at all times,
but actual earnings are largely irrelevant until growth flattens out below 45%.
Never paying for current expense with future growth (not even for a short time) is very important,
because you do not know if that future growth will materialize.
If you ever run into a money vaccuum, you die very suddenly.&lt;/p&gt;
&lt;p&gt;Actual earnings are much less important.
Not dying from growth is already hard enough,
the objective is to have new solutions in place &lt;em&gt;in time&lt;/em&gt;,
and speed matters more than cost.&lt;/p&gt;
&lt;p&gt;This is a rare environment and people are generally not trained for it.
It goes in fact against most of what they have been trained for.
Getting that out of people&amp;rsquo;s minds in order to prepare them for success in such an environment is hard,
much harder than what one would initially think,
because you have to break down decades of education they had.
You need to have then accept a reality that is very different from what they have learned.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Flugtaxi</title>
      <link>https://blog.koehntopp.info/2023/09/18/flugtaxi.html</link>
      <pubDate>Mon, 18 Sep 2023 02:03:04 +0000</pubDate>
      
      <guid>https://blog.koehntopp.info/2023/09/18/flugtaxi.html</guid>
      <description>&lt;p&gt;Golem schreibt: &lt;a href=&#34;https://www.golem.de/news/urban-air-mobility-ueber-200-skydrive-lufttaxis-vorbestellt-2309-177728.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ber 2000 Skydrive-Lufttaxis vorbestellt&lt;/a&gt;

.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Das eVTOL Skydrive ist 13 x 13 Meter gro und 3 Meter hoch.
Angetrieben wird es von zwlf Elektropropellern, die auf einem Gestell angebracht sind, hnlich wie bei den Volocoptern.
In dem eVTOL ist Platz fr drei Personen: zwei Passagiere und eine, die es fliegt.
Die Fluggerte, die spter ohne Pilot fliegen sollen, knnen auf einer relativ kleinen Flche senkrecht starten und landen.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;und&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Urban Air Mobility (UAM) ist eine neue Form der Luftfahrt:
Passagiere sollen mit Lufttaxis oder Taxidrohnen krzere oder mittlere Strecken in der Stadt zurcklegen.
Dadurch, dass ein Teil des Verkehrs in die Luft verlagert wird, sollen die Straen weniger belastet werden.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;lrm&#34;&gt;
    &lt;a href=&#34;#l%c3%a4rm&#34;&gt;
	Lrm
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Hier ist ein Video von einem Vorlufer dieses Modells, von 2020.
Der Soundtrack ist wichtig:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=4Yc2L5koWZY&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/flugtaxi-01.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Skydrive Piloted Flight Demo.
SkyDrive performed the first public flight demonstration of its SD-03 eVTOL on Aug. 25, 2020
(&lt;a href=&#34;https://www.youtube.com/watch?v=4Yc2L5koWZY&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Video&lt;/a&gt;

)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Beim Deutschlandfunk Nova heit es zum selben Problemkomplex:
&lt;a href=&#34;https://www.deutschlandfunknova.de/nachrichten/drohnen-wenn-die-kettensaege-kommt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Drohnen: Wenn die Kettensge kommt&lt;/a&gt;

&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Die Drohnen werden aber nicht nur Pckchen bringen, sondern vor allem Lrm.
Kommerzielle Drohnen, die Lasten transportieren, sind deutlich lauter als kleine Kameradrohnen.
Je schwerer das Pckchen, desto lauter.
Der Lrmpegel ist vergleichbar mit Laubsaugern, Rasenmhern und Kettensgen.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;und&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Videos, die die Lieferdrohnen bewerben, sind gerne mit Musik unterlegt, das Drohnengerusch ist nicht zu hren.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;downwash&#34;&gt;
    &lt;a href=&#34;#downwash&#34;&gt;
	Downwash
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Ein anderer Effekt von Rotorflglern jeder Art ist Newtons Gesetz:
Jede Kraft erzeugt eine gleiche, entgegengesetzte Gegenkraft.
Wenn ein Flugtaxi also bei Erdanziehung 1250kg Schub aufwrts erzeugt, dann mu es auch einen 1250 kg Downwash geben.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://wiki.ivao.aero/en/home/training/documentation/Ground_effect&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/flugtaxi-02.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/a&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Luftstrme am Rotorflgler, in der Luft (&amp;ldquo;out of ground effect&amp;rdquo;) und in Bodennhe (&amp;ldquo;in ground effect&amp;rdquo;).
(&lt;a href=&#34;https://wiki.ivao.aero/en/home/training/documentation/Ground_effect&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ausfhrliche Erluterungen&lt;/a&gt;

)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;In der Luft befindet sich unter einem Rotorflgler ein Abwindkorridor, dem andere Flieger fern bleiben mssen.
Nahe dem Grund knnen Sand, Schnee oder Steine aufgewirbelt werden (Brownout, Whiteout).&lt;/p&gt;
&lt;p&gt;In
&lt;a href=&#34;https://jjryan.com.au/index.php/helicopter-rotor-downwash-excessive-wind-fod-and-brownouts-what-are-the-risks/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Helicopter Rotor Downwash  Excessive wind, FOD and brownouts, what are the risks?&lt;/a&gt;


haben wir eine bildliche Darstellung von Downwash und auch eine Tabelle von Mindestabstnden.&lt;/p&gt;
&lt;p&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/flugtaxi-03.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Beispiele fr Helicopter Rotor Downwash.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Generell werden 3-5 Rotordurchmesser als sicherer Abstand zu einem landenden oder startenden Helikopter genannt.
Dies gilt fr Personen, aber auch andere am Grund parkende Fluggerte
oder andere Gegenstnde mit einer groen Angriffsflche fr Wind wie etwa belaubte Bume.&lt;/p&gt;
&lt;p&gt;Bei einem Volocopter mit einer Gre von 13x13 Metern also circa 50 x 50 Meter.
Zum Vergleich: Ein frei stehendes Einzelhaus hat eine Grundflche von 8x8 Metern, und steht auf einem Grundstck von 12x20 Metern.&lt;/p&gt;
&lt;p&gt;Hier zwei Starts:
der Hubschrauber kann relativ schnell an Hhe gewinnen, weil er nicht in seinen eigenen Downwash fliegt.
Landungen sind wesentlich gemchlicher.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=ZJD1xvVC4cA&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/flugtaxi-04.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/a&gt;


&lt;em&gt;Start von D-HBLN vom Metzplatz, Berlin vor dem Wenckebach-Krankenhaus. Die Bume sind unbelaubt.
(&lt;a href=&#34;https://www.youtube.com/watch?v=ZJD1xvVC4cA&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Video&lt;/a&gt;

)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=Ur4z1woV0ak&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/flugtaxi-05.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/a&gt;


&lt;em&gt;Start eines Rettungshubschraubers von einem Spielplatz in Vijfhuizen, NL.
Die Polizei hat das Gelnde abgesperrt, etwa 50-70m Sicherheitsabstand.
Der Downwash schttelt die belaubten Bume.
(&lt;a href=&#34;https://www.youtube.com/watch?v=Ur4z1woV0ak&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Video&lt;/a&gt;

)&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;energieverbrauch&#34;&gt;
    &lt;a href=&#34;#energieverbrauch&#34;&gt;
	Energieverbrauch
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;Schlielich ist noch der Energieverbrauch zu bercksichtigen,
denn anders als Starrflgler knnen Rotorflgler und Drohnen nicht gleiten.
Sie mssen also jederzeit in der Luft die volle Energie aufwenden, um ihr Gewicht gegen die Gravitation zu halten.&lt;/p&gt;
&lt;p&gt;Dies setzt auch der Reichweite und Flugzeit enge und absolute Grenzen als Funktion der Energiedichte des Treibstoffs.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Flugtaxis sind fr Verkehrsprobleme was Kernfusion fr Energieprobleme ist.&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;bonuscontent-downwash&#34;&gt;
    &lt;a href=&#34;#bonuscontent-downwash&#34;&gt;
	Bonuscontent: Downwash
    &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=HjeRSDsy-nE#t=2m14s&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/flugtaxi-06.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/a&gt;


&lt;em&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=HjeRSDsy-nE#t=2m14s&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Vuichard Recovery Technique - How to escape a Vortex Ring State&lt;/a&gt;

&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://youtu.be/dfY5ZQDzC5s?t=336&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;p class=&#34;md__image&#34;&gt;
  &lt;img src=&#34;https://blog.koehntopp.info/uploads/2023/09/flugtaxi-07.jpg&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;

&lt;/a&gt;


&lt;em&gt;&lt;a href=&#34;https://youtu.be/dfY5ZQDzC5s?t=336&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Planes clouds and vortices&lt;/a&gt;

&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>

