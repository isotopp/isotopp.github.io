<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>WLANs mappen | Die wunderbare Welt von Isotopp</title>
<meta name="description" content="Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">
<link rel="canonical" href="https://blog.koehntopp.info/2010/05/17/wlans-mappen.html">

<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">


<meta name="generator" content="Hugo 0.145.0">
<meta property="og:title" content='WLANs mappen | Die wunderbare Welt von Isotopp' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />
<meta property="og:locale" content="de_DE" />
<meta name="description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:url" content="https://blog.koehntopp.info/2010/05/17/wlans-mappen.html" />
<meta property="og:type" content="article" />
<meta name="article:published_time" content='2010-05-17T11:21:00Z' />
<meta name="fediverse:creator" content="@isotopp@infosec.exchange">
<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/schloss.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content='@isotopp@infosec.exchange' />
<meta property="twitter:title" content='WLANs mappen' />
<meta property="twitter:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/schloss.jpg' />


    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.dd9d518fe6cac55191b6af874e18327dff051055754ffc7e106131baf826e6d3.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info/" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/avatars/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            









<div class="page">
	<article class="wlans-mappen-page">
		<div class='row  justify-content-center text-center my-4 mx-0'>
			<header class="headerbanner">
				<div class='col'>
					<h1 class="title mb-lg-4 text-white">
						WLANs mappen
					</h1>
					<div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
						<img alt='@isotopp@infosec.exchange image' src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0'
						     style='width: 1.9rem; border-radius: 1rem;'>
						<a href="https://infosec.exchange/@isotopp" class='text-light text-decoration-none'>
							Kristian Köhntopp
						</a>
						
						<span class='d-none d-lg-inline'>-</span>
						<div class='d-block d-lg-inline'>May 17, 2010</div>
						
					</div>
				</div>
				
				<img alt='a featured image' src="/assets/img/background/schloss.jpg">
				
			</header>
		</div>

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2010/05/16/wie-man-aus-versehen-wlan-daten-mitschneidet.html">Wie man aus Versehen WLAN-Daten mitschneidet</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2010/05/18/incident-management-und-transparenz.html">Incident Management und Transparenz</a>
				</div>
				
			</div>
		</div>

		<div class='row justify-content-center mx-0 mt-3 mb-5'>
			<div class="col-lg-8 mb-3">
				
			</div>
			<div class='col-lg-8'>
				<p>Als Nachtrag zu
<a href="/2010/05/16/wie-man-aus-versehen-wlan-daten-mitschneidet.html">Wie man aus Versehen WLAN Daten mitschneidet</a>


hier die Erklärung zu &ldquo;<em>Weswegen fahren Leute eigentlich systematisch durch
die Straßen der Großstädte der Welt und zeichnen die Kennungen von WLAN
Access Points und vermutlich auch GSM Basisstationen auf?</em>&rdquo;</p>
<p>Nun, jedesmal, wenn Ihr ein Handy online nehmt um dort eine Kartenanwendung
Eurer Wahl zu aktivieren, muß das Handy seine Position bestimmen. Das kann
vollkommen freihändig passieren, also nur mit dem GPS-Chip im Handy, wie es
die originale Nokia Map-Anwendung in meinem E90 getan hat. Das Handy braucht
dann freie Sicht zum Himmel und circa 80 Sekunden lang eine relativ stabile
Position, damit es funktioniert.</p>
<p>Für die mobile Anwendung ist das nicht wirklich akzeptabel, wie ich selbst
ausprobieren konnte, als ich auf der Suche nach dem Kunden mitten in London
stand und jeweils 2 bis 3 Minuten lang zur Salzsäule wurde, bevor ich wußte,
wo ich lang mußte.</p>
<p>Dazu kommt, daß GPS Hardware eine ganze Menge Strom zieht und den Akku des
Mobiltelefons binnen einer oder zweier Stunden auch bei guter Kondition und
voller Ladung leicht leer lutschen kann. Auch das mit dem E90 getestet,
indem ich auf der Suche nach besagtem Kunden vergessen habe die
Kartenanwendung nach Gebrauch zu beenden - ein Handy mit Multitasking kann
auch Nachteile haben, liebe geplagte iPhone-Anwender.</p>
<p>Moderne GPS-Anwendungen machen daher etwas anderes: Sie verwenden
<a href="http://en.wikipedia.org/wiki/Enhanced_GPS" target="_blank" rel="noopener">EGPS</a>

,
<a href="http://en.wikipedia.org/wiki/Assisted_GPS" target="_blank" rel="noopener">AGPS</a>

 oder gar
<a href="http://en.wikipedia.org/wiki/Wi-Fi_Positioning_System" target="_blank" rel="noopener">GPS-freie Lokalisierungen</a>

 (
<a href="http://www.skyhookwireless.com/" target="_blank" rel="noopener">Skyhook</a>

).</p>
<p>EGPS verwendet eine Grobpeilung auf der Basis von Kennungen der
Basisstationen um die Position des Telefons grob (auf Genauigkeit von
Mobilfunkzellen) zu schätzen. Zellengrößen im Mobilfunk sind sehr
unterschiedlich, sie können mehrere Kilometer groß sein, im
Innenstadtbereich als Mikrozellen aber auch einzelne Plätze oder Teile von
Plätzen abdecken.</p>
<p>Technisch ist es auch denkbar, daß das Mobiltelefon das Mobilfunknetz nach einer
<a href="http://blogperso.univ-rennes1.fr/mohamed.laaraiedh/index.php/post/2008/10/09/FP7-WHERE-Project" target="_blank" rel="noopener">Triangulation des Telefons</a>


fragt - das Netz &lsquo;sieht&rsquo; ein Telefon ja oft mit mehr als einer Basisstation
gleichzeitig, mit unterschiedlichen Signalstärken, und die Basisstation hat
oft mehrere Antennen, die jeweils Richtcharacteristik haben. Dadurch kann
das Mobilfunknetz die Position eines Telefons genauer bestimmen als das
Telefon das alleine kann und dem Telefon diese Informationen bereitstellen
(lieber noch würde man dem Teilnehmer einen Dienst auf der Basis dieser
Daten verkaufen, also location based services).</p>
<p>AGPS ist eine weitergehende Unterstützung der Positionsbestimmung des
Telefons, in der das Telefon nur die Signale der GPS Satelliten mißt, sie
aber nicht selber auswertet, sondern an einen Server im Netz weiter gibt.
Der Server hat eine genauere Uhr als das Mobiltelefon, was für GPS
Genauigkeit von entscheidener Bedeutung ist. Er hat weiterhin mehr Speicher
und CPU, sodaß er die für die Berechnung der Position notwendigen
Nachschlagetabellen im Speicher halten kann statt sie erst herunter laden zu
müssen (letzteres ist der Grund für 40 Sekunden der 80 Sekunden GPS
Startzeit).</p>
<p><p class="md__image">
  <img src="/uploads/wifi.png" alt=""  />
</p>

</p>
<p>GPS-lose Lokalisierungsdienste wie Skyhook oder eben Google haben außerdem
eine recht gute Karte von Sendern aller Art in der Stadt - Basisstationen
für GSM wie für WLAN. Ein Telefon, das seine Position bestimmen möchte, kann
nun messen, welche Sender und Senderkennungen es sehen kann und diese
Informationen an den Lokalisierungsdienst hochladen. Der
Lokalisierungsdienst gibt nun eine Position und eine Genauigkeit als
Ergebnis zurück. Telefone ohne GPS Hardware verwenden ausschließlich solche
Positionierungsdienste zur Positionsbestimmung.</p>
<p>Wenn man gar kein WLAN sehen kann, sich also in der Pampa befindet, dann
können nur GSM Basisstationen verwendet werden. Man hat dann natürlich ein
ziemliches Schätzeisen, das zur Navigation nur eingeschränkt verwendbar ist.
In der Stadt dagegen ist ein solcher Dienst für Straßen und Hausnummern in
der Regel genau genug und viel, viel schneller als irgendeine GPS-Variante.</p>
<p>Damit man einen solchen Dienst anbieten kann braucht man eine Verknüpfung
von GPS-Positionen mit den Sendern, die an dieser Position sichtbar sind.
Und dafür wiederum braucht man etwas, mit dem man Sender wiedererkennen
kann. Skyhook und Google verwenden dafür die MAC-Adresse der Basisstation,
also die in der Netzwerkkarte eingebrannte Hardware Adresse (6 Bytes, wie
bei allen neueren IEEE Protokollen) und die ESSID, den WLAN Netzwerknamen
(32 frei wählbare Bytes, oft vom Netzbetreiber gewählter Klartext der das
Netz beschreibt).</p>
<p>Die MAC Adresse steht im Absenderfeld jedes Paketes, das der Access Point
selbst generiert, und die ESSID steht (zusammen mit der MAC Adresse) auch in
den Beacon Paketen, die der Access Point alle paar Millisekunden abstrahlt,
um das Netz für Empfänger in der Gegend anzupreisen.</p>
<p>Wenn man den Access Point nicht versteckt (in privat betriebenen Netzen
nicht üblich), dann strahlt der AP die Beacon laufend und im Klartext aus,
auch wenn die Payload im Netz mit WEP oder einer WPA-Geschmacksrichtung
verschlüsselt ist. Das muß er, damit ein Client (etwa ein Laptop) das Netz
&lsquo;sehen&rsquo; und dem Benutzer zur Auswahl anbieten kann. Der Benutzer verbindet
den Laptop dann mit der ESSID des Netzes, indem er den Schlüssel für dieses
Netz eingibt, und das wiederum erlaubt dann auch die Entschlüsselung von
Payload Paketen.</p>
<p><p class="md__image">
  <img src="/uploads/wardriving-map.jpg" alt=""  />
</p>

</p>
<p><a href="http://www.sarumans-turm.de/blog/?page_id=111" target="_blank" rel="noopener">Wardriving</a>

, Sarumans Turm</p>
<p>Damit Firmen wie Skyhook oder Google einen solchen Positionierungsdienst
anbieten können brauchen sie laufend aktuelle Karten, die sichtbare ESSIDs
und MAC-Adressen auf GPS-Koordinaten abbilden. Dazu genügt es im Grunde, die
Beacon-Pakete der Netze aufzufangen, die man bei der Durchfahrt sieht. Das
ist auch das, was Google intendiert hatte. Man kann das zum Beispiel daran
sehen, daß Google nach eigener Auskunft alle 200ms (fünf mal pro Sekunde)
den Kanal wechselt, um so regelmäßig alle WLAN-Frequenzen durchzuprobieren,
die in Deutschland zugelassen sind. Der Scanner im Street View- oder
Skyhook-Wagen verhält sich dabei genau wie ein Laptop, der noch nicht mit
einer ESSID assoziiert ist und der für die Erstellung der Liste der WLANs in
der Umgebung alle vorhandenen Frequenzen abtastet.</p>
<p>In der Vergangenheit hat Google diese Daten von Skyhook lizensiert, aber
wenn man sowieso Street View Cars durch die Straßen schicken muß, um
Turn-Based Navigation realisieren zu können, dann kann man diese Daten
natürlich auch selbst erfassen, statt Skyhook zu finanzieren - darum ein
Stück
<a href="http://freshmeat.net/search/?q=stumbler&amp;section=projects" target="_blank" rel="noopener">Stumbler</a>

-Software
und eine WLAN-Antenne in den Street View Cars.</p>
<p>Der Fehler, den Google dabei gemacht hat, ist alle empfangenen Pakete und
Paketfragmente aufzuzeichnen, anstatt schon bei der Aufzeichnung nur die
Beacons aufzuzeichnen. Empfangen muß Google genau wie Skyhook oder jeder
Client-Laptop auch erst einmal alle Pakete, weil erst dann durch das
Typ/Subtyp-Feld im WLAN-Frame erkennbar wird, was ein Payload-Paket ist und
was ein Management-Paket (Beacons sind nur ein Typ von Management Paketen,
es gibt noch viele mehr). Mit den aufgefangenen Payload-Paketen kann niemand
etwas anfangen (*1) falls das Netzwerk mit einem WEP- oder WPA-Key
geschützt ist, da sie dann verschlüsselt sind. Nur wenn das Netz
unverschlüsselt ist liegen die Daten der Payload offen vor (*2).</p>
<p>(*1) Angriffe auf WEP gibt es zu Hauf, aber sie brauchen in der Regel mehr
Daten als man in 200ms auffangen kann.</p>
<p>(*2) Falls nicht noch eine weitere Sicherung wie ssh, SSL oder ein VPN
verwendet worden ist, was jeder vernünftig denkende Mensch in einem offenen
WLAN hoffentlich grundsätzlich macht.</p>

			</div>
		</div>

		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
				
				<a href="/tags/#internet" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				internet
				</a>
				
				<a href="/tags/#privacy" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				privacy
				</a>
				
				<a href="/tags/#security" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				security
				</a>
				
				<a href="/tags/#wlan" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				wlan
				</a>
				
				<a href="/tags/#lang_de" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				lang_de
				</a>
				
			</div>
		</div>

		
		
		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<a href="https://github.com/isotopp/isotopp.github.io/edit/main/content/posts/2010-05-17-wlans-mappen.md"
				   rel="noopener noreferrer" target="_blank">
					<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Suggest Changes</span>
				</a>
			</div>
		</div>
		

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2010/05/16/wie-man-aus-versehen-wlan-daten-mitschneidet.html">Wie man aus Versehen WLAN-Daten mitschneidet</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2010/05/18/incident-management-und-transparenz.html">Incident Management und Transparenz</a>
				</div>
				
			</div>
		</div>


		
	</article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff.
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#rss-fill'/>
          </svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#envelope'/>
          </svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#github'/>
          </svg>
        </a>

        <a rel="me" href="https://infosec.exchange/@isotopp" title='Follow on Mastodon' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#mastodon'/>
          </svg>
        </a>

        
        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#steam'/>
          </svg>
        </a>

        

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#youtube'/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
