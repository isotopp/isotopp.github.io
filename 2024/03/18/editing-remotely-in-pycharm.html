<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Editing Remotely in PyCharm | Die wunderbare Welt von Isotopp</title>
<meta name="description" content="Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">
<link rel="canonical" href="https://blog.koehntopp.info/2024/03/18/editing-remotely-in-pycharm.html">

<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">


<meta name="generator" content="Hugo 0.145.0">
<meta property="og:title" content='Editing Remotely in PyCharm | Die wunderbare Welt von Isotopp' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />
<meta property="og:locale" content="en_US" />
<meta name="description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:url" content="https://blog.koehntopp.info/2024/03/18/editing-remotely-in-pycharm.html" />
<meta property="og:type" content="article" />
<meta name="article:published_time" content='2024-03-18T05:06:07Z' />
<meta name="fediverse:creator" content="@isotopp@infosec.exchange">
<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content='@isotopp@infosec.exchange' />
<meta property="twitter:title" content='Editing Remotely in PyCharm' />
<meta property="twitter:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />


    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.dd9d518fe6cac55191b6af874e18327dff051055754ffc7e106131baf826e6d3.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info/" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/avatars/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            









<div class="page">
	<article class="editing-remotely-in-pycharm-page">
		<div class='row  justify-content-center text-center my-4 mx-0'>
			<header class="headerbanner">
				<div class='col'>
					<h1 class="title mb-lg-4 text-white">
						Editing Remotely in PyCharm
					</h1>
					<div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
						<img alt='@isotopp@infosec.exchange image' src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0'
						     style='width: 1.9rem; border-radius: 1rem;'>
						<a href="https://infosec.exchange/@isotopp" class='text-light text-decoration-none'>
							Kristian Köhntopp
						</a>
						
						<span class='d-none d-lg-inline'>-</span>
						<div class='d-block d-lg-inline'>March 18, 2024</div>
						
					</div>
				</div>
				
				<img alt='a featured image' src="/assets/img/background/rijksmuseum.jpg">
				
			</header>
		</div>

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2024/03/03/dynamically-loading-classes-in-java.html">Dynamically loading Classes in Java</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2024/04/03/die-sache-mit-den-kreisen.html">Die Sache mit den Kreisen</a>
				</div>
				
			</div>
		</div>

		<div class='row justify-content-center mx-0 mt-3 mb-5'>
			<div class="col-lg-8 mb-3">
				
				<header class="toc bg-light">
					<nav id="TableOfContents">
  <ul>
    <li><a href="#rsync-deployment">&ldquo;Rsync Deployment&rdquo;</a></li>
    <li><a href="#using-jetbrains-gateway">Using &ldquo;Jetbrains Gateway&rdquo;</a></li>
    <li><a href="#fleet">Fleet</a></li>
    <li><a href="#preference">Preference</a></li>
  </ul>
</nav>
				</header>
				
			</div>
			<div class='col-lg-8'>
				<p>A friend asks me on IRC:</p>
<blockquote>
<p>Do you happen to know how I can edit code locally on my PyCharm (MacOS, Professional)
but run it remotely in a virtual environment?
I know how to do that in VS Code, but I don&rsquo;t know how to do it in PyCharm, even with ssh configured and tested.</p></blockquote>
<p>The TL;DR is that this specific person has disabled the FTP/SFTP/Webdav Plugin in an attempt to configure PyCharm
in a way that it doesn&rsquo;t upload development data to Jetbrains Servers or similar.</p>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-01.jpg" alt=""  />
</p>

</p>
<p><em>The bundled FTP/SFTP/Webdav Plugin in Pycharm is required for the preferred deployment method.</em></p>
<p>Jetbrains has several options for editing code locally, but deploying and running it remotely.</p>
<ul>
<li>Convert a local repository for remote deployment, and have it uploaded in an &ldquo;rsync&rdquo;-like fashion for each save to disk.
This is not &ldquo;rsync,&rdquo; because it also provides remote debugging and other features that reach further than synchronisation.</li>
<li>Run a headless version of Pycharm remotely using &ldquo;Jetbrains Gateway,&rdquo;
showing the display locally, but running the editor remotely over ssh.</li>
<li>Use Fleet, the VS Code imitation by Jetbrains.</li>
</ul>
<h1 id="rsync-deployment">
    <a href="#rsync-deployment">
	&ldquo;Rsync Deployment&rdquo;
    </a>
</h1>
<ol>
<li>Create a new project locally, using a local interpreter of your choice.</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-02.jpg" alt=""  />
</p>

</p>
<p><em>Create a normal local project, not caring about remote edit.</em></p>
<ol start="2">
<li>Convert the project to a new interpreter, using &ldquo;Add Interpreter&rdquo; in Settings→Project→Python Interpreter.</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-03.jpg" alt=""  />
</p>

</p>
<p><em>Click on &lsquo;Add Interpreter&hellip;&rsquo;, select &lsquo;On SSH&hellip;&rsquo;</em></p>
<ol start="3">
<li>Choose an existing SSH Server (or add a new one)</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-04.jpg" alt=""  />
</p>

</p>
<p><em>Here we select the remote box to work on. In our case, we are running on <code>server.local</code> as the user <code>kris</code>,
using SSH agent authentication.
If the configuration we want were not present, we&rsquo;d select &lsquo;SSH Connection: [ ] New&rsquo; instead of an existing config.</em></p>
<ol start="4">
<li>Let the probe complete.</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-05.jpg" alt=""  />
</p>

</p>
<p><em>Selecting a SSH interpreter will spawn a remote Python version probe. We need to let this run and complete.</em></p>
<ol start="5">
<li>Trying to set a remote work directory is useless at this stage.</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-06.jpg" alt=""  />
</p>

</p>
<p><em>In my version of PyCharm (PyCharm 2023.3.4), trying to edit the remote sync folder in the final set is possible,
but is being ignored later.
It will initially always use a random directory name in /tmp for remote execution, no matter how I configure it here.
This is likely a bug.</em></p>
<ol start="6">
<li>Review Remote Interpreter Setup</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-07.jpg" alt=""  />
</p>

</p>
<p><em>Review the chosen interpreter. It should now say something about &ldquo;Remote Python&rdquo;,
and show the version number as detected for the remote box.</em></p>
<ol start="7">
<li>Fix the Mappings</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-08.jpg" alt=""  />
</p>

</p>
<p><em>Go to Settings→Build, Execution, Deployment→Deployment, select your configuration, select the tab &ldquo;Mappings&rdquo; and
check the &ldquo;Deployment Path&rdquo;.
In my PyCharm, this is always a random path in <code>/tmp</code>, no matter what I do in the previous step 3.
I correct this to the directory I want this deployed in, here <code>/home/kris/Source/keks</code>, then click &ldquo;Ok&rdquo;.</em></p>
<ol start="8">
<li>Verify that it works</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-09.jpg" alt=""  />
</p>

</p>
<p><em>Printing <code>sys.version_info</code> shows us that we are indeed running on the Python Version of the remote host.
We could also call <code>sys_info = os.uname()</code>, and print <code>sys_info.nodename</code> to check the name of the box.</em></p>
<p>For my friend none of this worked. The entire SSH option was not shown,
and the option to define SFTP upload was not offered.
Further debugging showed that my friend had tried to secure his installation against unwanted data upload,
disabling all remote AI functionality and also the
<a href="https://www.jetbrains.com/help/pycharm/2023.1/sharing-your-ide-settings.html#IDE_settings_sync" target="_blank" rel="noopener">Jetbrains Settings Sync</a>

.
In doing that, they also inadvertantly disabled the &ldquo;SSH/SFTP/Webdav&rdquo; bundled plugin.</p>
<h1 id="using-jetbrains-gateway">
    <a href="#using-jetbrains-gateway">
	Using &ldquo;Jetbrains Gateway&rdquo;
    </a>
</h1>
<ol>
<li>When closing all project windows, PyCharm will default to the project selection screen.
This will offer the creation of new local projects, and also access to &ldquo;SSH&rdquo; projects,
&ldquo;Jetbrains Space&rdquo; projects, &ldquo;Dev Containers&rdquo;.</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-10.jpg" alt=""  />
</p>

</p>
<p><em>PyCharms project selection screen, &ldquo;Welcome to PyCharm&rdquo;.
Choosing &ldquo;SSH&rdquo; sllows you to create remote projects directly.
This will not use the synchronisation method above, but start a remote headless PyCharm.</em></p>
<ol start="2">
<li>Provide SSH connection information.</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-11.jpg" alt=""  />
</p>

</p>
<p><em>We are then being asked to provide SSH connection information, and can again choose from our default targets.
Again, we use <code>kris@server.local</code> with agent authentication.</em></p>
<ol start="3">
<li>Select IDE version and directory.</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-12.jpg" alt=""  />
</p>

</p>
<p><em>We are then being asked to choose an IDE version, and a directory.
The directory must exist (and is ideally empty).</em></p>
<p>This step can take some time to complete.
It will make the remote host download a version of the IDE and run it headless,
and will then configure Jetbrains Gateway locally.
Ultimately, it will hand off development from PyCharm to the local Gateway and the remotely running PyCharm.</p>
<p>Gateway acts as the local display of the remote IDE, using SSH as a remote procedure call mechanism.
Depending on the SSH connection latency, this can be quite laggy.
In older versions of Gateway, it was also prone to losing synchronization – this version seems to behave better.</p>
<ol start="4">
<li>Validate functionality and hostname</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-13.jpg" alt=""  />
</p>

</p>
<p><em>Writing a short test program and running it quickly validates that we are on the correct version of Python
and on the correct host.</em></p>
<ol start="5">
<li>Check processlist</li>
</ol>
<p><a href="/uploads/2024/03/pycharm-14.jpg"><p class="md__image">
  <img src="/uploads/2024/03/pycharm-14.jpg" alt=""  />
</p>

</a>

</p>
<p><em>A quick glance at the processlist of the remote hosts shows us what is going on:
A headless version of Pycharm has been downloaded to $HOME/.cache/JetBrains and is doing the work.
Locally, Jetbrains Gateway is the display for the remote instance.</em></p>
<ol start="6">
<li>Check connection and ressources</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-15.jpg" alt=""  />
</p>

</p>
<p><em>Cloud development instances are sometimes optimized for cost, not for comfort.
Gateway offers a way to check remote resources, including Ping and Memory.</em></p>
<ol start="7">
<li>Other Providers</li>
</ol>
<p><p class="md__image">
  <img src="/uploads/2024/03/pycharm-16.jpg" alt=""  />
</p>

</p>
<p><em>Gateway also offers additional providers for remote development, which can be installed and configured.</em></p>
<h1 id="fleet">
    <a href="#fleet">
	Fleet
    </a>
</h1>
<p>Fleet is a new editing environment from Jetbrains that tries to emulate VC Code in look and feel.
Unlike PyCharm, it has no direct language support, but connects to one or more language servers.
It needs extensions and language servers to become a useful editor with syntax support and analytics.</p>
<p>It can natively edit remote files.</p>
<p>I am not comfortable using it, and have therefore not tested it.</p>
<h1 id="preference">
    <a href="#preference">
	Preference
    </a>
</h1>
<p>For my deployment scenarios, I prefer to work with the primary approach
of converting a local project to a remote deployment using the &ldquo;rsync&rdquo; approach.
It is less sensitive to latency and less fragile than the &ldquo;Gateway&rdquo; approach, and offers much the same functionality for me.</p>
<p>People using standard clouds more than I do might fare better with &ldquo;Gateway,&rdquo; now that it is stable.</p>
<p>People using multiple languages in the same project or dependent on LSP and language servers might like Fleet better.</p>

			</div>
		</div>

		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
				
				<a href="/tags/#lang_en" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				lang_en
				</a>
				
				<a href="/tags/#computer" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				computer
				</a>
				
				<a href="/tags/#development" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				development
				</a>
				
				<a href="/tags/#python" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				python
				</a>
				
			</div>
		</div>

		
		
		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<a href="https://github.com/isotopp/isotopp.github.io/edit/main/content/posts/2024-03-18-editing-remotely-in-pycharm.md"
				   rel="noopener noreferrer" target="_blank">
					<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Suggest Changes</span>
				</a>
			</div>
		</div>
		

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2024/03/03/dynamically-loading-classes-in-java.html">Dynamically loading Classes in Java</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2024/04/03/die-sache-mit-den-kreisen.html">Die Sache mit den Kreisen</a>
				</div>
				
			</div>
		</div>


		
	</article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff.
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#rss-fill'/>
          </svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#envelope'/>
          </svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#github'/>
          </svg>
        </a>

        <a rel="me" href="https://infosec.exchange/@isotopp" title='Follow on Mastodon' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#mastodon'/>
          </svg>
        </a>

        
        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#steam'/>
          </svg>
        </a>

        

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#youtube'/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
