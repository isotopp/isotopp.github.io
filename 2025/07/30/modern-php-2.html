<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Modern PHP (8.x) | Die wunderbare Welt von Isotopp</title>
<meta name="description" content="Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">
<link rel="canonical" href="https://blog.koehntopp.info/2025/07/30/modern-php-2.html">

<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">


<meta name="generator" content="Hugo 0.148.2">
<meta property="og:title" content='Modern PHP (8.x) | Die wunderbare Welt von Isotopp' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />
<meta property="og:locale" content="en_US" />
<meta name="description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:url" content="https://blog.koehntopp.info/2025/07/30/modern-php-2.html" />
<meta property="og:type" content="article" />
<meta name="article:published_time" content='2025-07-30T06:07:08Z' />
<meta name="fediverse:creator" content="@isotopp@infosec.exchange">
<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content='@isotopp@infosec.exchange' />
<meta property="twitter:title" content='Modern PHP (8.x)' />
<meta property="twitter:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />


    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.9c06d59cbec0d99504f824dfa9f104b2be012cc4febd69764b14c40cd8a09674.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info/" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/avatars/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            









<div class="page">
	<article class="modern-php-8.x-page">
		<div class='row  justify-content-center text-center my-4 mx-0'>
			<header class="headerbanner">
				<div class='col'>
					<h1 class="title mb-lg-4 text-white">
						Modern PHP (8.x)
					</h1>
					<div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
						<img alt='@isotopp@infosec.exchange image' src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0'
						     style='width: 1.9rem; border-radius: 1rem;'>
						<a href="https://infosec.exchange/@isotopp" class='text-light text-decoration-none'>
							Kristian Köhntopp
						</a>
						
						<span class='d-none d-lg-inline'>-</span>
						<div class='d-block d-lg-inline'>July 30, 2025</div>
						
					</div>
				</div>
				
				<img alt='a featured image' src="/assets/img/background/rijksmuseum.jpg">
				
			</header>
		</div>

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2025/07/09/mysql-release-notes-database.html">MySQL: Release Notes Database</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2025/07/30/modern-php.html">Modern PHP (7.x)</a>
				</div>
				
			</div>
		</div>

		<div class='row justify-content-center mx-0 mt-3 mb-5'>
			<div class="col-lg-8 mb-3">
				
				<header class="toc bg-light">
					<nav id="TableOfContents">
  <ul>
    <li><a href="#features">Features</a></li>
    <li><a href="#80-2020">8.0 (2020)</a>
      <ul>
        <li><a href="#named-arguments">Named arguments</a></li>
        <li><a href="#attributes-annotations">Attributes (annotations)</a></li>
        <li><a href="#constructor-property-promotion">Constructor property promotion</a></li>
        <li><a href="#union-types">Union types</a></li>
        <li><a href="#nullsafe-operator--">Nullsafe operator (?-&gt;)</a></li>
        <li><a href="#throw-as-expression">throw as expression</a></li>
        <li><a href="#jit-compiler">JIT compiler</a></li>
        <li><a href="#match-expression">Match expression</a></li>
      </ul>
    </li>
    <li><a href="#81-2021">8.1 (2021)</a>
      <ul>
        <li><a href="#intersection-types-ab">Intersection types (A&amp;B)</a></li>
        <li><a href="#array-unpacking-with-string-keys">Array unpacking with string keys</a></li>
        <li><a href="#enums">Enums</a></li>
        <li><a href="#readonly-properties">Readonly properties</a></li>
        <li><a href="#first-class-callable-syntax-objmethod">First-class callable syntax (obj::method(&hellip;))</a></li>
        <li><a href="#never-return-type">never return type</a></li>
        <li><a href="#fibers-coroutines">Fibers (coroutines)</a></li>
      </ul>
    </li>
    <li><a href="#82-2022">8.2 (2022)</a>
      <ul>
        <li><a href="#constants-in-traits">Constants in Traits</a></li>
        <li><a href="#truefalsenull-standalone-types">true/false/null standalone types</a></li>
        <li><a href="#random-extension-randomizer-api">Random extension (Randomizer API)</a></li>
        <li><a href="#sensitiveparameter-attribute">#[SensitiveParameter] attribute</a></li>
        <li><a href="#readonly-classes">Readonly classes</a></li>
        <li><a href="#disjunctive-normal-form-types-dnf">Disjunctive Normal Form types (DNF)</a></li>
      </ul>
    </li>
    <li><a href="#83-2023">8.3 (2023)</a>
      <ul>
        <li><a href="#typed-class-constants">Typed class constants</a></li>
        <li><a href="#explicit-callables">Explicit callables</a></li>
        <li><a href="#override-attribute">#[Override] attribute</a></li>
        <li><a href="#json_validate">json_validate()</a></li>
      </ul>
    </li>
    <li><a href="#84-2024">8.4 (2024)</a>
      <ul>
        <li><a href="#autovivification-support">Autovivification support</a></li>
        <li><a href="#property-hooks-__get__set-override-without-magic">Property hooks (__get/__set override without magic)</a></li>
        <li><a href="#asymmetric-visibility-getset-modifiers">Asymmetric visibility (get/set modifiers)</a></li>
        <li><a href="#array_find-array_first-array_last">array_find(), array_first(), array_last()</a></li>
      </ul>
    </li>
    <li><a href="#85-2025">8.5 (2025)</a>
      <ul>
        <li><a href="#closures-and-callables-in-constant-expressions">Closures and callables in constant expressions</a></li>
        <li><a href="#pipe-operator-">Pipe operator (|&gt;)</a></li>
        <li><a href="#fatal-error-backtraces">Fatal error backtraces</a></li>
        <li><a href="#nodiscard">#[NoDiscard]</a></li>
      </ul>
    </li>
  </ul>
</nav>
				</header>
				
			</div>
			<div class='col-lg-8'>
				<p>I have not been doing PHP in a long time, and so I am writing this here as a memo to self,
in order to remind me what features are &ldquo;new&rdquo; in PHP, with &ldquo;new&rdquo; meaning 7.0 and newer.</p>
<p>Here is the 8.x edition.</p>
<h1 id="features">
    <a href="#features">
	Features
    </a>
</h1>
<table>
  <thead>
      <tr>
          <th>PHP version</th>
          <th>Category</th>
          <th>Feature</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>8.0</td>
          <td>Syntax</td>
          <td>Named arguments</td>
      </tr>
      <tr>
          <td>8.0</td>
          <td>Classes</td>
          <td>Attributes (annotations)</td>
      </tr>
      <tr>
          <td>8.0</td>
          <td>Syntax</td>
          <td>Constructor property promotion</td>
      </tr>
      <tr>
          <td>8.0</td>
          <td>Typing</td>
          <td>Union types</td>
      </tr>
      <tr>
          <td>8.0</td>
          <td>Syntax</td>
          <td>Nullsafe operator (?-&gt;)</td>
      </tr>
      <tr>
          <td>8.0</td>
          <td>Errors</td>
          <td>throw as expression</td>
      </tr>
      <tr>
          <td>8.0</td>
          <td>Performance</td>
          <td>JIT compiler</td>
      </tr>
      <tr>
          <td>8.0</td>
          <td>Syntax</td>
          <td>Match expression</td>
      </tr>
      <tr>
          <td>8.1</td>
          <td>Typing</td>
          <td>Intersection types (A&amp;B)</td>
      </tr>
      <tr>
          <td>8.1</td>
          <td>Syntax</td>
          <td>Array unpacking with string keys</td>
      </tr>
      <tr>
          <td>8.1</td>
          <td>Classes</td>
          <td>Enums</td>
      </tr>
      <tr>
          <td>8.1</td>
          <td>Classes</td>
          <td>Readonly properties</td>
      </tr>
      <tr>
          <td>8.1</td>
          <td>Syntax</td>
          <td>First-class callable syntax (obj::method(&hellip;))</td>
      </tr>
      <tr>
          <td>8.1</td>
          <td>Typing</td>
          <td>never return type</td>
      </tr>
      <tr>
          <td>8.1</td>
          <td>Concurrency</td>
          <td>Fibers (coroutines)</td>
      </tr>
      <tr>
          <td>8.2</td>
          <td>Typing</td>
          <td>Constants in Traits</td>
      </tr>
      <tr>
          <td>8.2</td>
          <td>Typing</td>
          <td>true/false/null standalone types</td>
      </tr>
      <tr>
          <td>8.2</td>
          <td>Functions</td>
          <td>Random extension (Randomizer API)</td>
      </tr>
      <tr>
          <td>8.2</td>
          <td>Security</td>
          <td>#[SensitiveParameter] attribute</td>
      </tr>
      <tr>
          <td>8.2</td>
          <td>Typing</td>
          <td>Readonly classes</td>
      </tr>
      <tr>
          <td>8.2</td>
          <td>Typing</td>
          <td>Disjunctive Normal Form types (DNF)</td>
      </tr>
      <tr>
          <td>8.3</td>
          <td>Classes</td>
          <td>Typed class constants</td>
      </tr>
      <tr>
          <td>8.3</td>
          <td>Typing</td>
          <td>Explicit callables</td>
      </tr>
      <tr>
          <td>8.3</td>
          <td>Syntax</td>
          <td>#[Override] attribute</td>
      </tr>
      <tr>
          <td>8.3</td>
          <td>Functions</td>
          <td>json_validate()</td>
      </tr>
      <tr>
          <td>8.4</td>
          <td>Typing</td>
          <td>Autovivification support</td>
      </tr>
      <tr>
          <td>8.4</td>
          <td>Classes</td>
          <td>Property hooks (__get/__set override without magic)</td>
      </tr>
      <tr>
          <td>8.4</td>
          <td>Syntax</td>
          <td>Asymmetric visibility (get/set modifiers)</td>
      </tr>
      <tr>
          <td>8.4</td>
          <td>Functions</td>
          <td>array_find(), array_first(), array_last()</td>
      </tr>
      <tr>
          <td>8.5</td>
          <td>Syntax</td>
          <td>Closures and callables in constant expressions</td>
      </tr>
      <tr>
          <td>8.5</td>
          <td>Syntax</td>
          <td>Pipe operator |&gt;</td>
      </tr>
      <tr>
          <td>8.5</td>
          <td>CLI/Debug</td>
          <td>Fatal error backtraces</td>
      </tr>
      <tr>
          <td>8.5</td>
          <td>Attributes</td>
          <td>#[NoDiscard]</td>
      </tr>
  </tbody>
</table>
<h1 id="80-2020">
    <a href="#80-2020">
	8.0 (2020)
    </a>
</h1>
<h2 id="named-arguments">
    <a href="#named-arguments">
	Named arguments
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#! /opt/homebrew/bin/php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">greet</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$title</span> <span class="o">=</span> <span class="s1">&#39;Mr&#39;</span><span class="p">,</span> <span class="nv">$punctuation</span> <span class="o">=</span> <span class="s1">&#39;!&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s2">&#34;Hello, </span><span class="si">{</span><span class="nv">$title</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nv">$name</span><span class="si">}{</span><span class="nv">$punctuation</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">greet</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Kris&#34;</span><span class="p">,</span> <span class="nx">punctuation</span><span class="o">:</span> <span class="s2">&#34;!!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="err">$</span> <span class="nx">php</span> <span class="nx">probe</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">Hello</span><span class="p">,</span> <span class="nx">Mr</span> <span class="nx">Kris</span><span class="o">!!</span>
</span></span></code></pre></div><h2 id="attributes-annotations">
    <a href="#attributes-annotations">
	Attributes (annotations)
    </a>
</h2>
<p>Instead of docstrings, you can now use Attributes, a structured way to add metadata to classes,
functions, methods, and properties.
Attributes are first-class language constructs, so they are parsed by PHP.
They can be accessed through the Reflection API,
making them more reliable and easier to work with than parsing comment blocks.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#[Attribute]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Route</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="nx">string</span> <span class="nv">$path</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">array</span> <span class="nv">$methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#[Route(&#39;/home&#39;, methods: [&#39;GET&#39;, &#39;POST&#39;])]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">HomeController</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s1">&#39;Hello from HomeController&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Using reflection to read attributes:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$reflectionClass</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ReflectionClass</span><span class="p">(</span><span class="nx">HomeController</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">foreach</span> <span class="p">(</span><span class="nv">$reflectionClass</span><span class="o">-&gt;</span><span class="na">getAttributes</span><span class="p">(</span><span class="nx">Route</span><span class="o">::</span><span class="na">class</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$attribute</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$routeInstance</span> <span class="o">=</span> <span class="nv">$attribute</span><span class="o">-&gt;</span><span class="na">newInstance</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s2">&#34;Path: </span><span class="si">{</span><span class="nv">$routeInstance</span><span class="o">-&gt;</span><span class="na">path</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s2">&#34;Methods: &#34;</span> <span class="o">.</span> <span class="nx">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="nv">$routeInstance</span><span class="o">-&gt;</span><span class="na">methods</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><ul>
<li>Define a class usable as an Attribute using <code>#[Attribute]</code>.</li>
<li>Use the attribute (with parameters) on another class (use <code>#[Route]</code> on <code>HomeController</code>)</li>
<li>Use Reflection to extract Attributes (<code>-&gt;getAttributes()</code> does all the work for us)</li>
</ul>
<h2 id="constructor-property-promotion">
    <a href="#constructor-property-promotion">
	Constructor property promotion
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#! /opt/homebrew/bin/php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">User</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="nx">string</span> <span class="nv">$name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="k">private</span> <span class="nx">int</span> <span class="nv">$age</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$u</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="s2">&#34;Kris&#34;</span><span class="p">,</span> <span class="mi">57</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">print_r</span><span class="p">(</span><span class="nv">$u</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="err">$</span> <span class="nx">php</span> <span class="nx">probe</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">User</span> <span class="nx">Object</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Kris</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="nx">age</span><span class="o">:</span><span class="nx">User</span><span class="o">:</span><span class="k">private</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">57</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>This saves writing a lot of boilerplate assignments of the <code>$this-&gt;name = $name</code> kind.</p>
<h2 id="union-types">
    <a href="#union-types">
	Union types
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#! /opt/homebrew/bin/php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">giveInt</span><span class="p">(</span><span class="o">?</span><span class="nx">string</span> <span class="nv">$future_int</span><span class="p">)</span><span class="o">:</span> <span class="nx">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$future_int</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">giveInt</span><span class="p">(</span><span class="s2">&#34;30&#34;</span><span class="p">),</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">giveInt</span><span class="p">(</span><span class="k">null</span><span class="p">),</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="err">$</span> <span class="nx">php</span> <span class="nx">probe</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="mi">30</span>
</span></span><span class="line"><span class="cl"><span class="mi">0</span>
</span></span></code></pre></div><p>This is using <code>?string</code> as a shorthand for <code>string|null</code>.</p>
<h2 id="nullsafe-operator--">
    <a href="#nullsafe-operator--">
	Nullsafe operator (?-&gt;)
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="err">$</span> <span class="nx">cat</span> <span class="nx">probe</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="c1">#! /opt/homebrew/bin/php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Profile</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">function</span> <span class="fm">__construct</span> <span class="p">(</span><span class="k">public</span> <span class="nx">string</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">User</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">function</span> <span class="fm">__construct</span> <span class="p">(</span><span class="k">public</span> <span class="o">?</span><span class="nx">Profile</span> <span class="nv">$profile</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$profile</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Profile</span><span class="p">(</span><span class="s2">&#34;Kris&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nv">$user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="nv">$profile</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$user2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="k">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="s2">&#34;</span><span class="si">{</span><span class="nv">$user</span><span class="o">?-&gt;</span><span class="na">profile</span><span class="o">?-&gt;</span><span class="na">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="s2">&#34;</span><span class="si">{</span><span class="nv">$user2</span><span class="o">?-&gt;</span><span class="na">profile</span><span class="o">?-&gt;</span><span class="na">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="s2">&#34;</span><span class="si">{</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">profile</span><span class="o">-&gt;</span><span class="na">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="s2">&#34;</span><span class="si">{</span><span class="nv">$user2</span><span class="o">-&gt;</span><span class="na">profile</span><span class="o">-&gt;</span><span class="na">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="err">$</span> <span class="nx">php</span> <span class="nx">probe</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">Kris</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Kris</span>
</span></span><span class="line"><span class="cl"><span class="nx">PHP</span> <span class="nx">Warning</span><span class="o">:</span>  <span class="nx">Attempt</span> <span class="nx">to</span> <span class="nx">read</span> <span class="nx">property</span> <span class="s2">&#34;name&#34;</span> <span class="nx">on</span> <span class="k">null</span> <span class="nx">in</span> <span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">kris</span><span class="o">/</span><span class="nx">probe</span><span class="o">.</span><span class="nx">php</span> <span class="nx">on</span> <span class="nx">line</span> <span class="mi">22</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Warning</span><span class="o">:</span> <span class="nx">Attempt</span> <span class="nx">to</span> <span class="nx">read</span> <span class="nx">property</span> <span class="s2">&#34;name&#34;</span> <span class="nx">on</span> <span class="k">null</span> <span class="nx">in</span> <span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">kris</span><span class="o">/</span><span class="nx">probe</span><span class="o">.</span><span class="nx">php</span> <span class="nx">on</span> <span class="nx">line</span> <span class="mi">22</span>
</span></span></code></pre></div><p>Strangely, this is by default only a warning and not a full-blown exception.</p>
<h2 id="throw-as-expression">
    <a href="#throw-as-expression">
	throw as expression
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#! /opt/homebrew/bin/php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">requireEnv</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$key</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nv">$_ENV</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">??</span> <span class="k">throw</span> <span class="k">new</span> <span class="nx">RuntimeException</span><span class="p">(</span><span class="s2">&#34;Missing env: </span><span class="si">$key</span><span class="s2">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// throws immediately if FOO is not set
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$foo</span> <span class="o">=</span> <span class="nx">requireEnv</span><span class="p">(</span><span class="s1">&#39;FOO&#39;</span><span class="p">);</span>
</span></span></code></pre></div><h2 id="jit-compiler">
    <a href="#jit-compiler">
	JIT compiler
    </a>
</h2>
<p>PHP 8.0 introduced a JIT (Just-In-Time) compiler in Opcache.
It can speed up CPU-bound code (e.g., numeric loops) but typically doesn’t affect IO-bound web apps much.
Enable and tune via php.ini (<code>opcache.enable=1</code>, <code>opcache.jit=...</code>);
behavior is otherwise transparent to userland code.</p>
<h2 id="match-expression">
    <a href="#match-expression">
	Match expression
    </a>
</h2>
<p>Match is an expression (it returns a value) with strict comparisons (<code>===</code>),
no fallthrough and no implicit type juggling.
Arms can have multiple comma-separated conditions and can execute expressions.
If nothing matches and there is no <code>default</code>, it throws an <code>UnhandledMatchError</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#! /opt/homebrew/bin/php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$code</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$message</span> <span class="o">=</span> <span class="nx">match</span> <span class="p">(</span><span class="nv">$code</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="mi">200</span><span class="p">,</span> <span class="mi">201</span> <span class="o">=&gt;</span> <span class="s1">&#39;OK&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mi">400</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bad Request&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mi">404</span> <span class="o">=&gt;</span> <span class="s1">&#39;Not Found&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mi">500</span><span class="p">,</span> <span class="mi">502</span><span class="p">,</span> <span class="mi">503</span> <span class="o">=&gt;</span> <span class="s1">&#39;Server Error&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">default</span> <span class="o">=&gt;</span> <span class="s1">&#39;Unknown&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nv">$message</span><span class="p">,</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// $ php probe.php
</span></span></span><span class="line"><span class="cl"><span class="c1">// OK
</span></span></span></code></pre></div><p>Strict matching (no type juggling):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#! /opt/homebrew/bin/php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$val</span> <span class="o">=</span> <span class="s1">&#39;2&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$result</span> <span class="o">=</span> <span class="nx">match</span> <span class="p">(</span><span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="mi">2</span>       <span class="o">=&gt;</span> <span class="s1">&#39;int two&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;2&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;string two&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">default</span> <span class="o">=&gt;</span> <span class="s1">&#39;other&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nv">$result</span><span class="p">,</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// $ php probe.php
</span></span></span><span class="line"><span class="cl"><span class="c1">// string two
</span></span></span></code></pre></div><p>You can also use it like a concise if/elseif chain with <code>match (true)</code>,
because each arm condition is compared strictly to <code>true</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">#! /opt/homebrew/bin/php
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">grade</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$score</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">match</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$score</span> <span class="o">&gt;=</span> <span class="mi">90</span> <span class="o">=&gt;</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$score</span> <span class="o">&gt;=</span> <span class="mi">75</span> <span class="o">=&gt;</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$score</span> <span class="o">&gt;=</span> <span class="mi">60</span> <span class="o">=&gt;</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span>      <span class="o">=&gt;</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">grade</span><span class="p">(</span><span class="mi">82</span><span class="p">),</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// $ php probe.php
</span></span></span><span class="line"><span class="cl"><span class="c1">// B
</span></span></span></code></pre></div><p>If no arm matches and you omit <code>default</code>, PHP throws an <code>UnhandledMatchError</code>.</p>
<h1 id="81-2021">
    <a href="#81-2021">
	8.1 (2021)
    </a>
</h1>
<h2 id="intersection-types-ab">
    <a href="#intersection-types-ab">
	Intersection types (A&amp;B)
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">interface</span> <span class="nx">A</span> <span class="p">{</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">foo</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">interface</span> <span class="nx">B</span> <span class="p">{</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">foo</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">needsAandB</span><span class="p">(</span><span class="nx">A</span><span class="o">&amp;</span><span class="nx">B</span> <span class="nv">$x</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{</span> <span class="nv">$x</span><span class="o">-&gt;</span><span class="na">foo</span><span class="p">();</span> <span class="p">}</span>
</span></span></code></pre></div><h2 id="array-unpacking-with-string-keys">
    <a href="#array-unpacking-with-string-keys">
	Array unpacking with string keys
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nv">$b</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nv">$c</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nv">$merged</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="o">...</span><span class="nv">$a</span><span class="p">,</span> <span class="o">...</span><span class="nv">$b</span><span class="p">,</span> <span class="o">...</span><span class="nv">$c</span><span class="p">];</span> <span class="c1">// later entries overwrite earlier ones
</span></span></span></code></pre></div><h2 id="enums">
    <a href="#enums">
	Enums
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">enum</span> <span class="nx">Status</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span> <span class="k">case</span> <span class="nx">Open</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span><span class="p">;</span> <span class="k">case</span> <span class="nx">Closed</span> <span class="o">=</span> <span class="s1">&#39;closed&#39;</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">isOpen</span><span class="p">(</span><span class="nx">Status</span> <span class="nv">$s</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$s</span> <span class="o">===</span> <span class="nx">Status</span><span class="o">::</span><span class="na">Open</span><span class="p">;</span> <span class="p">}</span>
</span></span></code></pre></div><h2 id="readonly-properties">
    <a href="#readonly-properties">
	Readonly properties
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Point</span> <span class="p">{</span> <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="k">public</span> <span class="nx">readonly</span> <span class="nx">int</span> <span class="nv">$x</span><span class="p">,</span> <span class="k">public</span> <span class="nx">readonly</span> <span class="nx">int</span> <span class="nv">$y</span><span class="p">)</span> <span class="p">{}</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nv">$p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// $p-&gt;x = 3; // Error
</span></span></span></code></pre></div><h2 id="first-class-callable-syntax-objmethod">
    <a href="#first-class-callable-syntax-objmethod">
	First-class callable syntax (obj::method(&hellip;))
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Greeter</span> <span class="p">{</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">hi</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$n</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span> <span class="k">return</span> <span class="s2">&#34;Hi, </span><span class="si">$n</span><span class="s2">&#34;</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nv">$g</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Greeter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nv">$cb</span> <span class="o">=</span> <span class="nv">$g</span><span class="o">-&gt;</span><span class="na">hi</span><span class="p">(</span><span class="o">...</span><span class="p">);</span> <span class="c1">// callable to instance method
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">echo</span> <span class="nv">$cb</span><span class="p">(</span><span class="s1">&#39;Kris&#39;</span><span class="p">);</span>
</span></span></code></pre></div><h2 id="never-return-type">
    <a href="#never-return-type">
	never return type
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">fail</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$msg</span><span class="p">)</span><span class="o">:</span> <span class="nx">never</span> <span class="p">{</span> <span class="k">throw</span> <span class="k">new</span> <span class="nx">RuntimeException</span><span class="p">(</span><span class="nv">$msg</span><span class="p">);</span> <span class="p">}</span>
</span></span></code></pre></div><h2 id="fibers-coroutines">
    <a href="#fibers-coroutines">
	Fibers (coroutines)
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Fiber</span><span class="p">(</span><span class="k">function</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{</span> <span class="nx">Fiber</span><span class="o">::</span><span class="na">suspend</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">);</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="nv">$val</span> <span class="o">=</span> <span class="nv">$f</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">();</span> <span class="c1">// &#39;hello&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$f</span><span class="o">-&gt;</span><span class="na">resume</span><span class="p">();</span>
</span></span></code></pre></div><h1 id="82-2022">
    <a href="#82-2022">
	8.2 (2022)
    </a>
</h1>
<h2 id="constants-in-traits">
    <a href="#constants-in-traits">
	Constants in Traits
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">trait</span> <span class="nx">T</span> <span class="p">{</span> <span class="k">public</span> <span class="k">const</span> <span class="no">VERSION</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">C</span> <span class="p">{</span> <span class="k">use</span> <span class="nx">T</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">C</span><span class="o">::</span><span class="na">VERSION</span><span class="p">;</span> <span class="c1">// 1
</span></span></span></code></pre></div><h2 id="truefalsenull-standalone-types">
    <a href="#truefalsenull-standalone-types">
	true/false/null standalone types
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">ok</span><span class="p">()</span><span class="o">:</span> <span class="k">true</span> <span class="p">{</span> <span class="k">return</span> <span class="k">true</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">maybe</span><span class="p">()</span><span class="o">:</span> <span class="k">null</span> <span class="p">{</span> <span class="k">return</span> <span class="k">null</span><span class="p">;</span> <span class="p">}</span>
</span></span></code></pre></div><h2 id="random-extension-randomizer-api">
    <a href="#random-extension-randomizer-api">
	Random extension (Randomizer API)
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$r</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Random\Randomizer</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="na">getInt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">;</span> <span class="c1">// uniform int in [1,6]
</span></span></span></code></pre></div><h2 id="sensitiveparameter-attribute">
    <a href="#sensitiveparameter-attribute">
	#[SensitiveParameter] attribute
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">login</span><span class="p">(</span><span class="c1">#[SensitiveParameter] string $password): void {}
</span></span></span><span class="line"><span class="cl"><span class="c1">// Sensitive parameters are redacted from stack traces and error logs.
</span></span></span></code></pre></div><h2 id="readonly-classes">
    <a href="#readonly-classes">
	Readonly classes
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">readonly</span> <span class="k">class</span> <span class="nc">Config</span> <span class="p">{</span> <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="k">public</span> <span class="nx">string</span> <span class="nv">$dsn</span><span class="p">)</span> <span class="p">{}</span> <span class="p">}</span>
</span></span></code></pre></div><h2 id="disjunctive-normal-form-types-dnf">
    <a href="#disjunctive-normal-form-types-dnf">
	Disjunctive Normal Form types (DNF)
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">f</span><span class="p">((</span><span class="nx">A</span><span class="o">&amp;</span><span class="nx">B</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="nx">C</span><span class="o">&amp;</span><span class="nx">D</span><span class="p">)</span> <span class="nv">$x</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{}</span>
</span></span></code></pre></div><h1 id="83-2023">
    <a href="#83-2023">
	8.3 (2023)
    </a>
</h1>
<h2 id="typed-class-constants">
    <a href="#typed-class-constants">
	Typed class constants
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">X</span> <span class="p">{</span> <span class="k">public</span> <span class="k">const</span> <span class="no">int</span> <span class="nx">LIMIT</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="p">}</span>
</span></span></code></pre></div><h2 id="explicit-callables">
    <a href="#explicit-callables">
	Explicit callables
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">handler</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$x</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="nv">$cb</span> <span class="o">=</span> <span class="nx">Closure</span><span class="o">::</span><span class="na">fromCallable</span><span class="p">(</span><span class="s1">&#39;handler&#39;</span><span class="p">);</span>
</span></span></code></pre></div><h2 id="override-attribute">
    <a href="#override-attribute">
	#[Override] attribute
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Base</span> <span class="p">{</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">foo</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{}</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Child</span> <span class="k">extends</span> <span class="nx">Base</span> <span class="p">{</span> <span class="c1">#[Override] public function foo(): void {} }
</span></span></span></code></pre></div><h2 id="json_validate">
    <a href="#json_validate">
	json_validate()
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">json_validate</span><span class="p">(</span><span class="s1">&#39;{&#34;a&#34;:1}&#39;</span><span class="p">))</span> <span class="p">{</span> <span class="cm">/* valid */</span> <span class="p">}</span>
</span></span></code></pre></div><h1 id="84-2024">
    <a href="#84-2024">
	8.4 (2024)
    </a>
</h1>
<h2 id="autovivification-support">
    <a href="#autovivification-support">
	Autovivification support
    </a>
</h2>
<p>Arrays now autovivify on nested assignments in more cases (e.g., <code>$a['x']['y'][] = 1;</code> without prior checks).</p>
<h2 id="property-hooks-__get__set-override-without-magic">
    <a href="#property-hooks-__get__set-override-without-magic">
	Property hooks (__get/__set override without magic)
    </a>
</h2>
<p>Property access can define inline get/set hooks on a property without global magic methods.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">User</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="nx">string</span> <span class="nv">$name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">get</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">set</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="asymmetric-visibility-getset-modifiers">
    <a href="#asymmetric-visibility-getset-modifiers">
	Asymmetric visibility (get/set modifiers)
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Counter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="nx">int</span> <span class="nv">$value</span> <span class="p">{</span> <span class="nx">get</span><span class="p">;</span> <span class="k">private</span> <span class="nx">set</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="array_find-array_first-array_last">
    <a href="#array_find-array_first-array_last">
	array_find(), array_first(), array_last()
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$xs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">array_first</span><span class="p">(</span><span class="nv">$xs</span><span class="p">);</span> <span class="c1">// 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">array_last</span><span class="p">(</span><span class="nv">$xs</span><span class="p">);</span>  <span class="c1">// 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">array_find</span><span class="p">(</span><span class="nv">$xs</span><span class="p">,</span> <span class="nx">fn</span><span class="p">(</span><span class="nv">$v</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">$v</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// 2
</span></span></span></code></pre></div><h1 id="85-2025">
    <a href="#85-2025">
	8.5 (2025)
    </a>
</h1>
<h2 id="closures-and-callables-in-constant-expressions">
    <a href="#closures-and-callables-in-constant-expressions">
	Closures and callables in constant expressions
    </a>
</h2>
<p>Allows using closures/callables in const contexts
(e.g., as default values in attributes or constants where evaluated at compile time if possible).</p>
<h2 id="pipe-operator-">
    <a href="#pipe-operator-">
	Pipe operator (|&gt;)
    </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">trimToInt</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$s</span><span class="p">)</span><span class="o">:</span> <span class="nx">int</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span> <span class="nx">trim</span><span class="p">(</span><span class="nv">$s</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$result</span> <span class="o">=</span> <span class="s2">&#34; 42 &#34;</span> <span class="o">|&gt;</span> <span class="nx">trimToInt</span><span class="p">(</span><span class="err">$$</span><span class="p">);</span>
</span></span></code></pre></div><h2 id="fatal-error-backtraces">
    <a href="#fatal-error-backtraces">
	Fatal error backtraces
    </a>
</h2>
<p>Fatal errors now include backtraces to aid debugging (CLI and logs).</p>
<h2 id="nodiscard">
    <a href="#nodiscard">
	#[NoDiscard]
    </a>
</h2>
<p>Marks a function/method return value as important; discarding it can trigger a warning.</p>

			</div>
		</div>

		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
				
				<a href="/tags/#php" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				php
				</a>
				
				<a href="/tags/#lang_en" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				lang_en
				</a>
				
			</div>
		</div>

		
		
		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<a href="https://github.com/isotopp/isotopp.github.io/edit/main/content/posts/2025-07-30-modern-php-2.md"
				   rel="noopener noreferrer" target="_blank">
					<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Suggest Changes</span>
				</a>
			</div>
		</div>
		

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2025/07/09/mysql-release-notes-database.html">MySQL: Release Notes Database</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2025/07/30/modern-php.html">Modern PHP (7.x)</a>
				</div>
				
			</div>
		</div>


		
	</article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff.
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#rss-fill'/>
          </svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#envelope'/>
          </svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#github'/>
          </svg>
        </a>

        <a rel="me" href="https://infosec.exchange/@isotopp" title='Follow on Mastodon' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#mastodon'/>
          </svg>
        </a>

        
        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#steam'/>
          </svg>
        </a>

        

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#youtube'/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
