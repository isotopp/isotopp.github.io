<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>MySQL: Basic usage of the JSON data type</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="apple-touch-icon" href="icon.png">
<link rel="favicon.ico" rel="icon" type="image/ico">
<link rel="canonical" href="https://blog.koehntopp.info">


<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">




<meta name="generator" content="Hugo 0.92.0" />
<meta property="og:title" content='MySQL: Basic usage of the JSON data type' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />


<meta property="og:locale" content="en_US" />


<meta name="description" content='' />
<meta property="og:description" content='' />

<link rel="canonical" href="https://blog.koehntopp.info" />
<meta property="og:url" content="https://blog.koehntopp.info" />


<meta property="og:type" content="article" />
<meta name="article:published_time" content='2020-09-04T22:57:10Z' />



<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/mysql.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content='@isotopp' />
<meta name="twitter:creator" content='@isotopp' />
<meta property="twitter:title" content='MySQL: Basic usage of the JSON data type' />
<meta property="twitter:description" content='' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/mysql.jpg' />

<script type="application/ld+json">
    {"@context":"https://schema.org","@type":"WebSite","description":null,"headline":"MySQL: Basic usage of the JSON data type","image":"/assets/img/background/mysql.jpg","name":"Die wunderbare Welt von Isotopp","url":"https://blog.koehntopp.info"}
</script>

    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.34cf67ab5155251adc1c5fa5c2f37d5a4f8f029f51399eb2556031d6ac918d49.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            




<div class="page">
  <article class="mysql-basic-usage-of-the-json-data-type-page">
    <div class='row  justify-content-center text-center my-4 mx-0'>
      <header>
        <div class='col'>
          <h1 class="title mb-lg-4 text-white">
            MySQL: Basic usage of the JSON data type
          </h1>
          <div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
            <img alt='isotopp image' src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
            <a href="https://twitter.com/isotopp" class='text-light text-decoration-none'>
                Kristian Köhntopp
            </a>

            
              <span class='d-none d-lg-inline'>-</span>
              <div class='d-block d-lg-inline'>September 4, 2020</div>
            

          </div>
        </div>
        
          <img alt='a featured image' src="/assets/img/background/mysql.jpg">
        
      </header>
    </div>

    <div class='row justify-content-center mx-0 mt-5 mb-5'>
      <div class='col-lg-8'>
        <p>MySQL 8 provides solid support for the JSON data type. The manual has <a href="https://dev.mysql.com/doc/refman/8.0/en/json.html" target="_blank" rel="noopener">an overview of the data type</a>

, a <a href="https://dev.mysql.com/doc/refman/8.0/en/json-functions.html" target="_blank" rel="noopener">JSON function reference</a>

, an <a href="https://dev.mysql.com/doc/refman/8.0/en/create-table-secondary-indexes.html#json-column-indirect-index" target="_blank" rel="noopener">an overview on generated column indexes</a>

, and <a href="https://dev.mysql.com/doc/refman/8.0/en/create-index.html#create-index-multi-valued" target="_blank" rel="noopener">explains multi-values indexes</a>

.</p>
<h2 id="creating-json-columns">
    <a href="#creating-json-columns">
	Creating JSON columns
    </a>
</h2>
<p>Creating JSON columns is easy: Make the column of the JSON data type, fill in valid JSON data.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">json</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">11</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;null&#39;</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;true&#39;</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;false&#39;</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;&#34;keks&#34;&#39;</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;[&#34;eins&#34;, &#34;zwei&#34;]&#39;</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;{&#34;eins&#34;: &#34;one&#34;, &#34;zwei&#34;: &#34;two&#34;}&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">json_type</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">type</span><span class="p">,</span><span class="w"> </span><span class="n">json_valid</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">valid</span><span class="p">,</span><span class="w"> </span><span class="k">isnull</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sqlnull</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------+---------+--------------------------------+----+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">type</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="k">valid</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">sqlnull</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">j</span><span class="w">                              </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------+---------+--------------------------------+----+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                           </span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">null</span><span class="w">                           </span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">true</span><span class="w">                           </span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">false</span><span class="w">                          </span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="w">                              </span><span class="o">|</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">STRING</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;keks&#34;</span><span class="w">                         </span><span class="o">|</span><span class="w">  </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="nb">ARRAY</span><span class="w">   </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;eins&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;zwei&#34;</span><span class="p">]</span><span class="w">               </span><span class="o">|</span><span class="w">  </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">OBJECT</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">{</span><span class="s2">&#34;eins&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;one&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;zwei&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;two&#34;</span><span class="err">}</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------+---------+--------------------------------+----+
</span><span class="c1"></span><span class="mi">8</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;[&#34;incomplete&#34;, &#34;array&#34;, &#34;closing bracket&#34;&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">3140</span><span class="w"> </span><span class="p">(</span><span class="mi">22032</span><span class="p">):</span><span class="w"> </span><span class="n">Invalid</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="nb">text</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Missing a comma or &#39;]&#39; after an array element.&#34;</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="k">position</span><span class="w"> </span><span class="mi">41</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="s1">&#39;t.j&#39;</span><span class="p">.</span><span class="w">
</span></code></pre></div><p>We learn several things from this experiment:</p>
<ul>
<li>Literal JSON values are always simple strings.
<ul>
<li>The character set in JSON objects is <code>utf8mb4</code>, the collation is <code>utf8mb4_bin</code>.</li>
<li>Because the collation is a <code>_bin</code> collation, comparison is case-sensitive. Charset and collation are fixed and cannot be changed without casting to a non-JSON type.</li>
<li>We enclose them in single quotes, leveraging the fact that MySQL allows both single and double quotes as string terminators. This saves us a lot of quoting.</li>
<li>JSON null is written as the string <code>'null'</code>.</li>
<li>JSON true is written as the string <code>'true'</code>.</li>
<li>JSON false is written as the string <code>'false'</code>.</li>
</ul>
</li>
<li>We allowed NULL values in our JSON column definition by not providing a <code>NOT NULL</code> clause. SQL <code>NULL</code> is different from JSON <code>'null'</code>, but is cast to this.</li>
<li>We can use the <code>JSON_TYPE()</code> function to check the JSON type inside the JSON column.</li>
<li>The JSON is parsed, and checked for validity. The <code>JSON_VALID()</code> function does the checking.
<ul>
<li>It also exposes the difference between SQL <code>NULL</code> and JSON <code>'null'</code>. So does the SQL <code>ISNULL()</code> function (or the <code>IS NULL</code> comparison operator).</li>
</ul>
</li>
</ul>
<h2 id="creating-json-values">
    <a href="#creating-json-values">
	Creating JSON values
    </a>
</h2>
<p>We can see JSON literal notation already from the previous example. There are also two utility functions to construct JSON array and object structures from SQL scalars. They are <code>JSON_ARRAY()</code> and <code>JSON_OBJECT()</code>. Note the handling of SQL <code>NULL</code> values.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">json_array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ary</span><span class="p">,</span><span class="w"> </span><span class="n">json_object</span><span class="p">(</span><span class="s2">&#34;eins&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;one&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;null&#34;</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;zwei&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;two&#34;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">obj</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">ary</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">obj</span><span class="w">                                          </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">{</span><span class="s2">&#34;eins&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;one&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;null&#34;</span><span class="p">:</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;zwei&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;two&#34;</span><span class="err">}</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>We can use <code>JSON_MERGE_PRESERVE()</code> and <code>JSON_MERGE_PATCH()</code> to incrementally build complicated structures. <code>JSON_MERGE_PRESERVE()</code> replaces <code>JSON_MERGE()</code>, which is deprecated and should no longer be used.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">json_merge_preserve</span><span class="p">(</span><span class="s1">&#39;[3, 4, 5]&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;[1, 2, 3]&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">preserve</span><span class="p">,</span><span class="w"> </span><span class="n">json_merge_patch</span><span class="p">(</span><span class="s1">&#39;[1, 2, 3]&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;[3, 4, 5]&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">patch</span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w"></span><span class="k">preserve</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="w">   </span><span class="n">patch</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">json_merge_preserve</span><span class="p">(</span><span class="s1">&#39;{&#34;eins&#34;: &#34;one&#34;, &#34;zwei&#34;: &#34;two&#34;}&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;{&#34;zwei&#34;: &#34;two&#34;, &#34;drei&#34;: &#34;three&#34;}&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">preserve</span><span class="p">,</span><span class="w"> </span><span class="n">json_merge_patch</span><span class="p">(</span><span class="s1">&#39;{&#34;eins&#34;: &#34;one&#34;, &#34;zwei&#34;: &#34;two&#34;}&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;{&#34;zwei&#34;: &#34;two&#34;, &#34;drei&#34;: &#34;three&#34;}&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">patch</span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w"></span><span class="k">preserve</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="s2">&#34;drei&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;three&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;eins&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;one&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;zwei&#34;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;two&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;two&#34;</span><span class="p">]</span><span class="err">}</span><span class="w">
</span><span class="w">   </span><span class="n">patch</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="s2">&#34;drei&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;three&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;eins&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;one&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;zwei&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;two&#34;</span><span class="err">}</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>Quotes and quoting can be a bit painful, and even confusing. Let&rsquo;s put the string <code>A so-called &quot;string&quot;.</code> into a JSON string, inside an SQL statement. To turn this text into a JSON string we need to put double quotes around it, quoting our internal double quotes with backslashes. To produce a backslash literal, we need to write a double backslash.</p>
<p>The result:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;&#34;A so-called \\&#34;string\\&#34;.&#34;&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_insert_id</span><span class="p">()</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">id</span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w"></span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>We can get this back as <code>j</code>, or use JSON extractors (<code>JSON_EXTRACT()</code>, or <code>-&gt;</code>). The current document is <code>$</code>, so:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s1">&#39;$&#39;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">jj</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;&gt;</span><span class="s1">&#39;$&#39;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">jj_unquoted</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w">          </span><span class="n">j</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;A so-called \&#34;</span><span class="n">string</span><span class="err">\</span><span class="s2">&#34;.&#34;</span><span class="w">
</span><span class="w">         </span><span class="n">jj</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;A so-called \&#34;</span><span class="n">string</span><span class="err">\</span><span class="s2">&#34;.&#34;</span><span class="w">
</span><span class="w"></span><span class="n">jj_unquoted</span><span class="p">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">so</span><span class="o">-</span><span class="k">called</span><span class="w"> </span><span class="s2">&#34;string&#34;</span><span class="p">.</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>This brings us to component access:</p>
<h2 id="json-component-access">
    <a href="#json-component-access">
	JSON component access
    </a>
</h2>
<p>Using the <code>JSON_EXTRACT()</code> function and JSON path syntax, we can access fields in the JSON and select for them, as foreshadowed above.</p>
<p>We get the following selectors:</p>
<ul>
<li><code>$</code>, the current JSON document.</li>
<li><code>.key</code>, select the <code>key</code> from the current object. Use <code>.&quot;key with space&quot;</code> when necessary.</li>
<li><code>[N]</code> selects the element <code>N</code> from a JSON array, starting to count at 0.
<ul>
<li><code>.&quot;equipment-ids&quot;[1]</code> is interesting, because we need to quote <code>&quot;equipment-ids&quot;</code> due to the dash in the key name. We must not put the array index into the quotes, though, or it won&rsquo;t work.</li>
<li>For an array slice, the syntax is <code>[M to N]</code> for the slice from <code>N</code> to <code>M</code> inclusive.</li>
<li>For arrays, the keyword <code>last</code> is the rightmost element in the array.</li>
</ul>
</li>
<li>There are wildcards:
<ul>
<li><code>.*</code> are all values of a JSON object, as an array.</li>
<li><code>[*]</code> are all the values of a JSON array, as an array.</li>
<li><code>**</code> are all paths that lead to a suffix.</li>
</ul>
</li>
</ul>
<p>So, put into practice:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;{&#34;id&#34;: 10, &#34;login&#34;: &#34;kris&#34;, &#34;fullname&#34;: &#34;Kristian \\&#34;Isotopp\\&#34; Köhntopp&#34;, &#34;equipment-ids&#34;: [10, 11, 12], &#34;borrowed&#34;:{ &#34;equipment-ids&#34;: [1,2,3]}}&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">json_extract</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;$.fullname&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">f1</span><span class="p">,</span><span class="w"> </span><span class="n">json_value</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;$.fullname&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="mi">10</span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w"></span><span class="n">f1</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Kristian \&#34;</span><span class="n">Isotopp</span><span class="err">\</span><span class="s2">&#34; Köhntopp&#34;</span><span class="w">
</span><span class="w"></span><span class="n">f2</span><span class="p">:</span><span class="w"> </span><span class="n">Kristian</span><span class="w"> </span><span class="s2">&#34;Isotopp&#34;</span><span class="w"> </span><span class="n">Köhntopp</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">json_extract</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;$.&#34;equipment-ids&#34;[1]&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w"></span><span class="n">jj</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">json_extract</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;$.&#34;equipment-ids&#34;[1 to 2]&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w">
</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w"></span><span class="n">jj</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">json_extract</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;$.*&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w"></span><span class="n">jj</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="p">,</span><span class="w"> </span><span class="err">{</span><span class="s2">&#34;equipment-ids&#34;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;Kristian \&#34;</span><span class="n">Isotopp</span><span class="err">\</span><span class="s2">&#34; Köhntopp&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">]]</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">json_extract</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;$.&#34;equipment-ids&#34;[*]&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="w"></span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w"></span><span class="n">jj</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">json_extract</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;$**.&#34;equipment-ids&#34;&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="mi">10</span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w"></span><span class="n">jj</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]]</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>This is cumbersome to write, so we also get <code>colname-&gt;selector</code> as a shorthand for the <code>JSON_EXTRACT(colname, selector)</code> function:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s1">&#39;$.&#34;equipment-ids&#34;[*]&#39;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="err">\</span><span class="k">G</span><span class="w">
</span><span class="w"></span><span class="n">jj</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h2 id="from-json-values-to-sql-values">
    <a href="#from-json-values-to-sql-values">
	From JSON values to SQL values
    </a>
</h2>
<p>With our table from above, we are setting us up like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">truncate</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">06</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;{&#34;user&#34;: &#34;kris&#34;, &#34;paid&#34;: true, &#34;home&#34;: &#34;/home/kris&#34;}&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;{&#34;user&#34;: &#34;sven&#34;, &#34;paid&#34;: false, &#34;home&#34;: &#34;/home/sven&#34;}&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>We can ask for the payment status of all our users already, using the syntax from above:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">true</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;sven&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>We cannot SQL <code>SELECT</code> all users that have paid, yet:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">true</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">Warning</span><span class="w"> </span><span class="p">(</span><span class="n">Code</span><span class="w"> </span><span class="mi">3986</span><span class="p">):</span><span class="w"> </span><span class="n">Evaluating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="nb">boolean</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="k">implicit</span><span class="w"> </span><span class="n">comparison</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="p">,</span><span class="w"> </span><span class="n">consider</span><span class="w"> </span><span class="n">converting</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="nb">numeric</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">JSON_VALUE</span><span class="w"> </span><span class="n">RETURNING</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">json_value</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;$.paid&#39;</span><span class="w"> </span><span class="n">returning</span><span class="w"> </span><span class="n">signed</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>The function <a href="https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-value" target="_blank" rel="noopener"><code>JSON_VALUE()</code></a>

 provides a type cast from JSON to SQL, making extracted JSON values available to SQL comparisons and conditions. Follow the link and look it up. There is no <code>INTEGER</code>, you have to be more specific, <code>SIGNED</code> or <code>UNSIGNED</code>, the types match the ones used in <code>CAST()</code>. There are also <code>ON EMPTY</code> and <code>ON ERROR</code> clauses.</p>
<p>Using <code>JSON_VALUE()</code> we can do the work of <code>JSON_EXTRACT()</code>, <code>JSON_UNQUOTE()</code> and <code>CAST()</code> in one go, and have control about handling of non-existent paths (<code>ON EMPTY</code>) and conversion errors (<code>ON ERROR</code>).</p>
<p>We could have used cast as well:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="o">-&gt;</span><span class="w">   </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="p">,</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w">   </span><span class="k">cast</span><span class="p">(</span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">signed</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">casted</span><span class="p">,</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w">   </span><span class="n">json_value</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="n">returning</span><span class="w"> </span><span class="n">signed</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">valued</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-------+--------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">casted</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">valued</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-------+--------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">true</span><span class="w">  </span><span class="o">|</span><span class="w">      </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;sven&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-------+--------+--------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="o">-&gt;</span><span class="w">   </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w">
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">cast</span><span class="p">(</span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">signed</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">json_value</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="n">returning</span><span class="w"> </span><span class="n">signed</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>Note that I left out the <code>JSON_UNQUOTE()</code> in the <code>CAST()</code> example, because I converted JSON <code>BOOLEAN</code> types to SQL <code>SIGNED</code> types, so no quoted strings needed handling. <code>JSON_VALUE(col, selector RETURNING type)</code> is actually <code>CAST(JSON_UNQUOTE(JSON_EXTRACT(col, selector)) AS type)</code>.</p>
<h2 id="updating-json-values">
    <a href="#updating-json-values">
	Updating JSON values
    </a>
</h2>
<p>Reusing the example above, we can try to update the payment status of a user using the <a href="https://dev.mysql.com/doc/refman/8.0/en/json-modification-functions.html#function_json-set" target="_blank" rel="noopener"><code>JSON_SET()</code></a>

 function. Doing this, we need to be careful.</p>
<p>First, let&rsquo;s check if we can isolate the row we want to see elegantly:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="p">,</span><span class="w">  
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="n">json_type</span><span class="p">(</span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">true</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;sven&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-------+---------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;KRIS&#34;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Empty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>We notice: while this works, it is working with JSON character sets, so it is <code>utf8mb4</code> with a collation of <code>utf8mb4_bin</code>, hence case-sensitive comparison.</p>
<p>Using <code>JSON_SET()</code> we update the <code>$.paid</code> field of that user to <code>false</code>, and run into the next problem:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">t</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">j</span><span class="o">=</span><span class="n">json_set</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;$.paid&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;false&#34;</span><span class="w"> </span><span class="p">)</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">j</span><span class="w">                                                       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">{</span><span class="s2">&#34;home&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/home/kris&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;paid&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;false&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;user&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="err">}</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">{</span><span class="s2">&#34;home&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/home/sven&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;paid&#34;</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;user&#34;</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;sven&#34;</span><span class="err">}</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+---------------------------------------------------------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="p">,</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="n">json_type</span><span class="p">(</span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.paid&#34;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">paid</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+---------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">paid</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+---------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;false&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">STRING</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="s2">&#34;sven&#34;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">false</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+---------+---------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>That is not what we want. But did we not insert values <code>&quot;false&quot;</code> and <code>&quot;true&quot;</code> into JSON fields earlier and got booleans?</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;false&#34;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">json_type</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+-------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">j</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">type</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+-------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+-------+---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>Well, yes, but…</p>
<p>Functions in MySQL expect types, and convert to these types. <code>JSON_SET()</code> expects JSON, so we do it like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">t</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">j</span><span class="o">=</span><span class="n">json_set</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;$.paid&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="p">)</span><span class="w"> 
</span><span class="w"></span><span class="o">-&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">j</span><span class="o">-&gt;</span><span class="s2">&#34;$.user&#34;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;kris&#34;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">json_type</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+-------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">j</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">type</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+-------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+-------+---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>There is <a href="https://dev.mysql.com/doc/refman/8.0/en/json-modification-functions.html#function_json-remove" target="_blank" rel="noopener"><code>JSON_REMOVE()</code></a>

, &ldquo;Removes data from a JSON document&rdquo;. There are also <a href="https://dev.mysql.com/doc/refman/8.0/en/json-modification-functions.html#function_json-set" target="_blank" rel="noopener"><code>JSON_SET()</code></a>

, and friends:</p>
<ul>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/json-modification-functions.html#function_json-set" target="_blank" rel="noopener"><code>JSON_SET()</code></a>

 replaces existing values and adds nonexistent values.</li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/json-modification-functions.html#function_json-insert" target="_blank" rel="noopener"><code>JSON_INSERT()</code></a>

 inserts values without replacing existing values.</li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/json-modification-functions.html#function_json-replace" target="_blank" rel="noopener"><code>JSON_REPLACE()</code></a>

 replaces only existing values.</li>
</ul>
<p>These are the basic tools we need to get JSON into and out of tables. We now just need to make it fast - the stuff for another article.</p>

      </div>
    </div>

    
    
    <div class='row justify-content-center mb-3 mx-0'>
      <div class='col-lg-8 text-center'>
        <span class='letter-spacing-01 text-uppercase text-secondary me-2'>Share</span>
        <a href='https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.koehntopp.info%2f2020%2f09%2f04%2fmysql-json-data-type.html' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#facebook'/></svg>
        </a>
        <a href='https://twitter.com/intent/tweet?source=https%3a%2f%2fblog.koehntopp.info%2f2020%2f09%2f04%2fmysql-json-data-type.html&text=MySQL%3a%20Basic%20usage%20of%20the%20JSON%20data%20type%20%7C%20Die+wunderbare+Welt+von+Isotopp:%20https%3a%2f%2fblog.koehntopp.info%2f2020%2f09%2f04%2fmysql-json-data-type.html' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#twitter'/></svg>
        </a>
        <a href='http://www.reddit.com/submit?url=https%3a%2f%2fblog.koehntopp.info%2f2020%2f09%2f04%2fmysql-json-data-type.html&title=MySQL%3a%20Basic%20usage%20of%20the%20JSON%20data%20type' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#reddit'/></svg>
        </a>
        <a href='mailto:?subject=MySQL%3a%20Basic%20usage%20of%20the%20JSON%20data%20type&body=https%3a%2f%2fblog.koehntopp.info%2f2020%2f09%2f04%2fmysql-json-data-type.html' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#envelope-fill'/></svg>
        </a>
      </div>
    </div>

    
    
    <div class='row justify-content-center py-3 mb-3 mx-0'>
      <div class='col-lg-8 text-center'>
        <span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
        
          <a href="/tags/#lang_en" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            lang_en
          </a>
        
          <a href="/tags/#mysql" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            mysql
          </a>
        
          <a href="/tags/#mysqldev" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            mysqldev
          </a>
        
          <a href="/tags/#database" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            database
          </a>
        
          <a href="/tags/#erklaerbaer" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            erklaerbaer
          </a>
        
      </div>
    </div>

    <div class='row justify-content-center mb-5 pt-5 border-top mx-0'>
      <div class='col-lg-4 text-center text-lg-start'>
        
          <div>
            <div class='letter-spacing-01 text-uppercase text-secondary'>
              Next Post
            </div>
            <a class='text-decoration-none' href="https://blog.koehntopp.info/2020/09/07/mysql-generated-columns-and-virtual-indexes.html">MySQL: Generated Columns and virtual indexes</a>
          </div>
        
      </div>

      <div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
        
          <div>
            <div class='letter-spacing-01 text-uppercase text-secondary'>
              Previous Post
            </div>
            <a class='text-decoration-none' href="https://blog.koehntopp.info/2020/09/02/macos-relocated-items.html">MacOS: Deleting Relocated Items</a>
          </div>
        
      </div>
    </div>

    
    </article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff. 
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#rss-fill'/></svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#envelope'/></svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#github'/></svg>
        </a>

        <a href='https://www.reddit.com/user/isotopp' title='Follow on Reddit' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#reddit'/></svg>
        </a>

        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#steam'/></svg>
        </a>

        <a href='https://twitter.com/isotopp' title='Follow on Twitter' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#twitter'/></svg>
        </a>

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#youtube'/></svg>
        </a>

      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
