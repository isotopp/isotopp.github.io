<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Neu auf einem fremden System | Die wunderbare Welt von Isotopp</title>
<meta name="description" content="Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">
<link rel="canonical" href="https://blog.koehntopp.info/2000/04/14/neu-auf-einem-fremden-system.html">

<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">


<meta name="generator" content="Hugo 0.145.0">
<meta property="og:title" content='Neu auf einem fremden System | Die wunderbare Welt von Isotopp' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />
<meta property="og:locale" content="de_DE" />
<meta name="description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:url" content="https://blog.koehntopp.info/2000/04/14/neu-auf-einem-fremden-system.html" />
<meta property="og:type" content="article" />
<meta name="article:published_time" content='2000-04-14T09:00:00Z' />
<meta name="fediverse:creator" content="@isotopp@infosec.exchange">
<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/schloss.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content='@isotopp@infosec.exchange' />
<meta property="twitter:title" content='Neu auf einem fremden System' />
<meta property="twitter:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/schloss.jpg' />


    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.dd9d518fe6cac55191b6af874e18327dff051055754ffc7e106131baf826e6d3.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info/" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/avatars/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            









<div class="page">
	<article class="neu-auf-einem-fremden-system-page">
		<div class='row  justify-content-center text-center my-4 mx-0'>
			<header class="headerbanner">
				<div class='col'>
					<h1 class="title mb-lg-4 text-white">
						Neu auf einem fremden System
					</h1>
					<div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
						<img alt='@isotopp@infosec.exchange image' src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0'
						     style='width: 1.9rem; border-radius: 1rem;'>
						<a href="https://infosec.exchange/@isotopp" class='text-light text-decoration-none'>
							Kristian Köhntopp
						</a>
						
						<span class='d-none d-lg-inline'>-</span>
						<div class='d-block d-lg-inline'>April 14, 2000</div>
						
					</div>
				</div>
				
				<img alt='a featured image' src="/assets/img/background/schloss.jpg">
				
			</header>
		</div>

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2000/04/01/datenspuren-im-internet.html">Datenspuren im Internet</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2000/05/01/webserver-security.html">Webserver Security</a>
				</div>
				
			</div>
		</div>

		<div class='row justify-content-center mx-0 mt-3 mb-5'>
			<div class="col-lg-8 mb-3">
				
			</div>
			<div class='col-lg-8'>
				<p>Dies ist eine aktualisierte Version der Schulung „Unix Systemsicherheit“, die ich vor einiger Zeit schon einmal gehalten habe.
Der Schwerpunkt dieser Schulung hat sich etwas zu den Grundlagen hin verschoben:
Es geht diesmal weniger um Unix Systemsicherheit als um die typische Situation der Consultants und Bereitschaften:</p>
<p>Man kommt an eine neue Maschine und muss sich erst einmal zurechtfinden.</p>
<h1 id="neu-auf-einem-fremden-system">
    <a href="#neu-auf-einem-fremden-system">
	Neu auf einem fremden System
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-001.jpg" alt=""  />
</p>

</p>
<p>Orientierung:</p>
<ul>
<li>Typ und Ausstattung der Maschine
<ul>
<li>Prozessor, Festplatten, andere Hardware</li>
<li>Speichersituation, historische und aktuelle Lastdaten</li>
</ul>
</li>
<li>Netzwerk und Netzwerkumfeld der Maschine</li>
<li>IP-Adressen, Routing
<ul>
<li>Welche Name-Services in welcher Reihenfolge, welche Server werden verwendet?</li>
</ul>
</li>
<li>Was läuft, was soll laufen?
<ul>
<li>Was ist installiert?</li>
<li>tatsächlich laufende Subsysteme vs. konfigurierte Subsysteme</li>
</ul>
</li>
</ul>
<p>Wir sind neu auf einem fremden System und loggen uns zum ersten Mal ein.
Wie können wir uns zurechtfinden? Was wollen wir überhaupt wissen?</p>
<p>Die Maschine selbst ist nach Hardware, Speicher, Platten und Netzwerk zu beurteilen.
Die Netzwerkumgebung der Maschine ist einzuschätzen.
Die auf der Maschine installierten Systemdienste sind einzuschätzen und zu beurteilen.
Es muss ein Soll/Ist-Abgleich stattfinden.</p>
<p>Ausgehend von diesen Daten kann die Arbeit auf der Maschine beginnen:</p>
<p>Die Maschine kann für ihre Aufgabe angepasst werden (Hardware- oder Softwareinstallation durch Consulting), bzw. die Fehlersuche kann beginnen (Alarmruf für die Bereitschaft).</p>
<h1 id="typ-und-ausstattung-der-maschine">
    <a href="#typ-und-ausstattung-der-maschine">
	Typ und Ausstattung der Maschine
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-002.jpg" alt=""  />
</p>

</p>
<ul>
<li>Was für Hardware ist das hier?</li>
<li>Was ist in der Maschine eingebaut?</li>
<li>Wie lange ist die Hardware schon &ldquo;up&rdquo;?</li>
</ul>
<p>Erster Handgriff: <code>uname -a</code>.
Weitere Aktionen systemspezfisch.</p>
<ul>
<li>Linux: <code>lscpu</code>, <code>free</code>, <code>df -Th</code>, <code>lspci</code>, <code>lsusb</code></li>
<li>Solaris: <code>prtconf -v</code>, <code>psrinfo -v</code>, <code>/usr/platform/$(uname -m)/sbin/prtdiag</code></li>
<li>Uptime und Load: <code>w</code>, <code>uptime -w</code></li>
</ul>
<p>Für uns meist: Sparc/Solaris oder Intel/Linux.
Bei einigen Kunden auch PPC/AIX oder Intel/SCO.
Äußerst wenige Kunden mit HP oder Digital Hardware.</p>
<p>Peilung des Maschinentyps (mit <code>uname -a</code>) und der eingebauten Hardware.
In Solaris mit den drei Kommandos <code>prtconf</code>, <code>psrinfo</code> und <code>prtdiag</code>.
In Linux mit <code>lscpu</code>, <code>lspci</code> oder indem man manuell durch <code>/proc</code> turnt.</p>
<p>Peilung der Systemauslastung und der anwesenden Benutzer:
Neben <code>w</code> und <code>uptime</code> einmal die Prozeßliste ansehen (<code>ps -ef</code>, <code>ps axuwww</code>) und die Systemlast checken (<code>iostat</code>, <code>vmstat</code>).</p>
<h1 id="speicher-und-last">
    <a href="#speicher-und-last">
	Speicher und Last
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-003.jpg" alt=""  />
</p>

</p>
<p>Virtueller Speicher und seine Auslastung:</p>
<ul>
<li>Linux: <code>free</code>.</li>
<li>Solaris: <code>swap -l</code>, <code>swap -s</code>.</li>
<li>Wenn Accounting &ldquo;up&rdquo; ist (Solaris): <code>sar</code>, <code>sar -r</code> (freeswap), <code>sar -w</code> (paging).</li>
<li>In Linux (Suse 6.4): <code>sa</code> aus dem Paket <code>ap1/acct.rpm</code>.</li>
</ul>
<p>Der weitaus größte Teil aller Lastprobleme sind Speicherprobleme (zuwenig RAM, zu kleiner Swap).
Zweithäufigstes Problem ist fehlende I/O-Kapazität.
Fehlende CPU-Kapazität ist fast niemals das Problem.</p>
<p>Erst messen, dann nachdenken, dann handeln (OODA loop &ndash; Observe, Orient, Decide, Act).
Optimierungen ohne genaue Messungen und Kenntnis des tatsächlichen Problems sind Verschwendung der durch den Kunden bezahlten Arbeitszeit.
Punktmessungen können hilfreich sein, aber ein Wochenlastprofil ist sehr viel wertvoller (hier <code>sar</code>-Beispiele von <code>boss</code> und <code>prime</code> bringen).</p>
<h1 id="platten">
    <a href="#platten">
	Platten
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-004.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Logical Volume Management?</p>
<ul>
<li>Welches System?</li>
<li>Welche Zuordnung?</li>
</ul>
</li>
<li>
<p>Quota?</p>
</li>
<li>
<p><code>/etc/vfstab</code>, <code>/etc/fstab</code></p>
</li>
<li>
<p>Solaris (SDS):</p>
<ul>
<li>Gerätenamen</li>
<li>metastat</li>
<li>format</li>
</ul>
</li>
<li>
<p>Linux:</p>
<ul>
<li>Gerätenamen</li>
<li>fdisk</li>
<li><code>raidtool.rpm</code> als Nachfolger von <code>md-tools</code></li>
<li><code>/etc/raidtab</code>, <code>raid.conf</code></li>
<li><code>df</code>, <code>du</code>, <code>mount</code></li>
<li>Quota-Tools</li>
</ul>
</li>
</ul>
<p>Vergleiche die sichtbaren Partitionen mit der durch das Hardware-Inventory angezeigten vorhandenen Hardware.</p>
<ul>
<li>Sind alle Platten partitioniert und eingebunden?</li>
<li>Ist die gezeigte Aufteilung sinnvoll gewählt für die Aufgabe der Maschine?</li>
</ul>
<p>Prüfe auch:</p>
<ul>
<li>Verteilung der Partitionen nach Auslastung auf Spindeln</li>
<li>Verteilung der Partitionen über Platten und Controller nach Ausfallgesichtspunkten?</li>
</ul>
<p>Welche RAID-Level für welche Aufgabe</p>
<ul>
<li>Wir verwenden fast überall RAID 0+1 (Solaris SDS).</li>
<li>Linux-RAID (a la Suse) derzeit nur eingeschränkt nützlich.
<ul>
<li>Lange Startzeit.</li>
<li>Rootplatte, Swap-Partition.</li>
</ul>
</li>
</ul>
<p>Prüfe auch:</p>
<ul>
<li>Platzproblem oder Quota-Problem?</li>
</ul>
<h1 id="netzwerk-und-netzwerknachbarschaft">
    <a href="#netzwerk-und-netzwerknachbarschaft">
	Netzwerk und Netzwerknachbarschaft
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-005.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Übersicht über Interfaces und Routen</p>
<ul>
<li><code>-n</code> Option verwenden</li>
<li>Woher kommen die Routen?</li>
</ul>
</li>
<li>
<p>Weitere Analysetools:</p>
<ul>
<li>ping</li>
<li>tcpdump</li>
<li>snoop</li>
</ul>
</li>
<li>
<p>Netzwerkinterfaces: <code>ifconfig -a</code>, <code>netstat -i</code>, <code>netstat -s</code>, <code>netstat -m</code></p>
</li>
<li>
<p>Routen: <code>netstat -rn</code></p>
</li>
<li>
<p>Schicht 2-3 Bindungen: <code>arp -a</code></p>
</li>
</ul>
<p>Welche Interfaces und welche Routen werden tatsächlich wie oft verwendet?
Woher kommen die Routen?</p>
<p>Viele Kunden haben ein kaputtes Netzwerkonzept (d.h. keines) und setzen Routen eventuell manuell. Probleme sind vorprogrammiert.</p>
<p>Andere Kunden haben nur Default-Routen und bekommen differenzierte Routen nur über ICMP Redirect. Ebenfalls problematisch (Effizenz, Security).</p>
<h1 id="name-resolution">
    <a href="#name-resolution">
	Name Resolution
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-006.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Welche Namensdienste werden verwendet?</p>
</li>
<li>
<p>Welche Server werden verwendet?</p>
</li>
<li>
<p>Wie ist das Verhalten im Fehlerfall?</p>
<ul>
<li>Ausfall</li>
<li>Angriff</li>
</ul>
</li>
<li>
<p><code>/etc/nsswitch.conf</code></p>
<ul>
<li>Files, DNS/Bind, NIS/NIS+, LDAP, Exoten</li>
</ul>
</li>
<li>
<p>Falls DNS: <code>/etc/resolv.conf</code></p>
</li>
<li>
<p>Falls NIS: <code>ypwhich</code></p>
</li>
</ul>
<p>Woher kommen die Namen, welcher Dienst wird verwendet?</p>
<p>Oft lokale Hostdateien -&gt; Probleme! Im besten Fall DNS. Dann dort die Zone ansehen und Netzstruktur und Zonengröße abschätzen.</p>
<p>Welche Abhängigkeiten existieren zwischen den Servern?</p>
<p>Ausfall- und Bootszenarien: Was ist, wenn der DNS-, der Time- oder der NIS-Server nicht da sind? Gibt es NFS-Platten, auf die die lokale Maschine angewiesen ist?</p>
<p>Security: Wer macht was in wessen Auftrag? Wer kontrolliert? Wird die Konfiguration manuell gepflegt oder existieren Frontends? Welche Dokumentationsprozeduren existieren?</p>
<h1 id="netzwerkdienste">
    <a href="#netzwerkdienste">
	Netzwerkdienste
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-007.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Welche Netzwerkdienste werden erbracht?</p>
<ul>
<li>Prüfe neben <code>inetd</code> auch persistenten Server.</li>
<li>Prüfe auf Vorhandensein von Sicherheitsmechanismen</li>
<li>Prüfe Verhalten im Falle von Ausfällen, etwa Firewall-Versagen</li>
</ul>
</li>
<li>
<p>Wie begründen sich diese Dienste?</p>
</li>
<li>
<p>Welche Sicherheit bieten diese Dienste?</p>
</li>
<li>
<p><code>/etc/inetd.conf</code>, <code>/etc/hosts.allow</code>, <code>/etc/hosts.deny</code></p>
</li>
<li>
<p>Sonderfälle für das jeweilige System</p>
<ul>
<li>Todesfallen bei AIX: Import/Exporttools für <code>inetd.conf</code></li>
<li>Todesfallen bei HP/UX: <code>/etc/inetd.sec</code></li>
</ul>
</li>
<li>
<p><code>rpcinfo -p</code>, <code>showmount -e</code></p>
</li>
<li>
<p><code>nmap</code>!</p>
</li>
</ul>
<p>Vergleiche <code>inetd.conf</code> und Startscripte mit <code>netstat -an</code>.</p>
<ul>
<li>Consulting: Viele verstorbene Pflegefälle wegen manuell gestarteter Dienste, die in keiner Konfigurationsdatei auftauchen.</li>
<li>Bereitschaft: Umgekehrtes Szenario. Alarm wurde wegen verschwundenem Server ausgelöst.</li>
</ul>
<p>Sicherheitsanalyse wieder:</p>
<ul>
<li>Wieder technische und organisatorische Prozesse synchronisieren und abgleichen:
<ul>
<li>Was tun die Maschinen?</li>
<li>Wer entscheidet das? Wie begründen sich die Dienste?</li>
<li>Wer dokumentiert und prüft das?</li>
</ul>
</li>
</ul>
<p>Vergleiche Prozeduren bei uns im Haus:</p>
<ul>
<li>ISP-Betrieb plant und deployed.</li>
<li>Operating betreibt nach Doku vom ISP-Betrieb, Operating überwacht und alarmiert die Bereitschaft. Auch diese operiert mit dieser Doku.</li>
<li>Konfigurationsgenerierung meist automatisch durch die Backends der KundenDB -&gt; automatische Dokumentation und Abrechnung.</li>
</ul>
<h1 id="welche-verzeichnisse-werden-exportiert">
    <a href="#welche-verzeichnisse-werden-exportiert">
	Welche Verzeichnisse werden exportiert?
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-008.jpg" alt=""  />
</p>

</p>
<ul>
<li>Häufige Panne:
<ul>
<li>Verzeichnisse werden ungewollt exportiert</li>
<li>Rechner importiert Verzeichnisse und hängt wegen Abhängigkeit vom Server</li>
</ul>
</li>
<li>Automounter?
<ul>
<li>Mit NIS/NIS+?</li>
</ul>
</li>
<li>Samba?
<ul>
<li>Klartextpaßworte?</li>
<li>Public Shares?</li>
<li>Logfiles?</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> showmount -e
</span></span><span class="line"><span class="cl"><span class="gp">$</span> kshowmount -e
</span></span><span class="line"><span class="cl"><span class="gp">$</span> share
</span></span><span class="line"><span class="cl"><span class="gp">$</span> vi /etc/exports<span class="p">;</span> vi  /etc/dfs/dfstab
</span></span><span class="line"><span class="cl"><span class="gp">$</span> vi /etc/auto.master<span class="p">;</span> vi /etc/auto.homel vi /etc/auto.misc
</span></span><span class="line"><span class="cl"><span class="gp">$</span> vi smb.conf<span class="p">;</span> smbclient
</span></span></code></pre></div><p>Einschlägige Beispielserver draußen zeigen.</p>
<p>Wir wollen nicht so enden wie die! Mehrfach gestaffelte Sicherheit durch</p>
<ul>
<li>automatisch generierte Konfigurationen mit Sicherheitssperren</li>
<li>Dienstsperrungen für Außen durch <code>tcpwrapper</code></li>
<li>Portsperrung und Alamierung über die Firewall und das Operating</li>
<li>Logauswertung (Usagelog, Wrapper-Protokoll, Firewall-Protokoll) durch
<ul>
<li>Abrechnung (KundenDB), Alarm bei Diensten mit fehlendem technischem Objekt in der KundenDB</li>
<li>Operating (Wrapper, Firewall), Alarm bei Attack Patterns</li>
</ul>
</li>
</ul>
<p>Einschlägige Selbstmordkonfigurationen zeigen.</p>
<h1 id="was-ist-installiert">
    <a href="#was-ist-installiert">
	Was ist installiert?
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-009.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Welche Pakete und Programme sind installiert?</p>
<ul>
<li>In welcher Version?</li>
</ul>
</li>
<li>
<p>Installation validieren?</p>
<ul>
<li>&ldquo;set permissions&rdquo; und &ldquo;check optionen&rdquo;</li>
<li>tripwire?</li>
</ul>
</li>
<li>
<p>Solaris: <code>pkginfo</code>, <code>/var/sadm/install/contents</code> (Reihenfolge!)</p>
</li>
<li>
<p>Linux: <code>rpm -qa</code>, <code>rpm -qi &lt;paket&gt;</code>, <code>rpm -ql &lt;paket&gt;</code>, <code>rpm -qlc &lt;paket&gt;</code>, <code>rpm -qld &lt;paket&gt;</code>, <code>rpm -qf &lt;datei&gt;</code>, <code>rpm -qp &lt;datei.rpm&gt;</code></p>
</li>
<li>
<p>Solaris Paketarchiv („NetUSE Distribution“) zeigen</p>
<ul>
<li>Consulting-CDROM, wird auch an Kunden verkauft</li>
</ul>
</li>
<li>
<p>Keine Installation ohne Paket</p>
<ul>
<li>Verweis auf Paketschulung</li>
<li>Kein Paket -&gt; automatische Konfigurationsgenerierung aus Installserver oder KundenDB macht die Verzeichnisse möglicherweise platt.</li>
</ul>
</li>
<li>
<p>Kommandoäquivalenzen Linux/Solaris</p>
</li>
<li>
<p>Verweis auf Rootkits</p>
<ul>
<li>Rootkits ersetzen wichtige Systemprogramme,</li>
<li>in Folge belügt die Maschine den Operator</li>
<li>tripwire-Check nach sauberem Reboot zeigen</li>
<li>lrk3 demonstrieren (ohne sauberen Reboot bekommt man keine verlässlichen Informationen mehr und kompromittiert sein Netz nur noch weiter)</li>
</ul>
</li>
</ul>
<h1 id="was-soll-laufen">
    <a href="#was-soll-laufen">
	Was soll laufen?
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-010.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Welche Dienste sollen von der Maschine erbracht werden?</p>
<ul>
<li>Konfiguration beim Systemstart für persistente Server</li>
<li>Konfiguration von transienten Servern</li>
<li>Konfiguration von zeitgesteuerten Services
<ul>
<li>Suche nach Zeitbomben?</li>
</ul>
</li>
<li>Wenn es hängt?</li>
</ul>
</li>
<li>
<p>Start/Stopscripte</p>
<ul>
<li>Linux: <code>/sbin/init.d/...</code></li>
<li>Solaris: <code>/etc/init.d/...</code></li>
<li>Crondateien: <code>/var/spool/cron/crontabs</code>, <code>/var/cron/tabs</code></li>
<li><code>strace</code>, <code>truss</code></li>
<li><code>ltrace</code></li>
</ul>
</li>
<li>
<p>Bootsequenz durchgehen, Single User Mode, Wie bekomme ich meine Platten wieder?, Wie überlebe ich ohne Editor und Terminalemulation?</p>
</li>
<li>
<p>Defekte Programme tracen: <code>ldd</code>, Solaris <code>proctools</code>, Linux: <code>/proc/&lt;nummer&gt;/...</code></p>
</li>
<li>
<p><code>strace</code>/<code>truss</code> Output lesen, <code>ltrace</code>/<code>sotruss</code> Output lesen</p>
</li>
</ul>
<h1 id="was-läuft">
    <a href="#was-l%c3%a4uft">
	Was Läuft?
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-011.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Welche Dienste sind auf der Maschine aktiv?</p>
<ul>
<li>Welche waren aktiv?</li>
</ul>
</li>
<li>
<p>Welche Ressourcen belegen diese Dienste?</p>
</li>
<li>
<p><code>ps -ef</code>, <code>ps auxwww</code>, <code>top</code>, <code>lsof</code></p>
<ul>
<li>Linux: <code>ptree</code>, <code>sa</code></li>
<li>Solaris: <code>/usr/proc/bin/*</code></li>
</ul>
</li>
<li>
<p>Beispiele mit den Proctools</p>
<ul>
<li>Speicherverbrauch abschätzen für Server</li>
<li>Programmaktivität laufender Prozesse feststellen</li>
</ul>
</li>
</ul>
<h1 id="welche-user-können-rein">
    <a href="#welche-user-k%c3%b6nnen-rein">
	Welche User können rein?
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-012.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Quellen von Userlisten</p>
<ul>
<li>lokal, aus dem Netz</li>
</ul>
</li>
<li>
<p>Erlaubte und nicht erlaubte Shells</p>
</li>
<li>
<p>Gehackte Authentisierung</p>
<ul>
<li>Modifizierte wu-ftpd, imapd</li>
<li>LDAP-Module</li>
</ul>
</li>
<li>
<p><code>/etc/nsswitch.conf</code>, <code>/etc/shells</code>, <code>/etc/ftpusers</code>, <code>/etc/ftpaccess</code></p>
</li>
<li>
<p>Zugangsmechanismen</p>
<ul>
<li>Regeln für den Zugang, etwa über PAM: <code>/etc/pam.d</code>, <code>/etc/pam.conf</code></li>
</ul>
</li>
</ul>
<p>Verweis auf Folgeschulungen:</p>
<ul>
<li>NSS/PAM/GSS nutzen.</li>
<li>NSS/PAM/GSS-Module erstellen.</li>
<li>Überblick über die von NetUSE für den ISP-Betrieb modifizierte Software.</li>
</ul>
<h1 id="welche-user-waren-drin">
    <a href="#welche-user-waren-drin">
	Welche User waren drin?
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-013.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Auswertung des Logbuches</p>
<ul>
<li>Querabgleiche mit anderen Logs</li>
</ul>
</li>
<li>
<p>Auditing-Subsysteme</p>
</li>
<li>
<p><code>/etc/utmp</code>, <code>/etc/wtmp</code>, syslog, Auth-Events, Radius-Logs und andere</p>
</li>
<li>
<p>Exoten:</p>
<ul>
<li>Logbücher der Sysadmin-Tools (AIX)</li>
</ul>
</li>
<li>
<p>Auditing-Subsysteme</p>
</li>
<li>
<p>Linux: fehlendes Auditing, bescheidenes Accounting (falls installiert).</p>
</li>
<li>
<p>Solaris: Demo des Auditing</p>
</li>
<li>
<p>Beide: Welche Logs liegen wo und wie finde ich die gewünschte Info?</p>
</li>
</ul>
<h1 id="zugriffsrechte-und-privilegien-in-unix">
    <a href="#zugriffsrechte-und-privilegien-in-unix">
	Zugriffsrechte und Privilegien in UNIX
    </a>
</h1>
<p>Bonusfolien aus der alten Schulung</p>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-014.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Erkläre, wer unter welchen Bedingungen in UNIX auf eine Datei zugreifen darf!</p>
<ul>
<li>rwx? sst?</li>
<li>Verzeichnisrechte vs. Dateirechte</li>
<li>Dateiattribute? Dateisystemattribute?</li>
</ul>
</li>
<li>
<p>Welche Spuren hinterläßt so ein Zugriff?</p>
</li>
<li>
<p><a href="/1996/03/01/rwx-sonst-nix.html">RWX - sonst nix?</a>

</p>
</li>
<li>
<p>Wer bin ich?</p>
</li>
<li>
<p>Zu welchen Gruppen gehöre ich?</p>
</li>
<li>
<p>Wie kann ich meine Identität ändern?</p>
</li>
<li>
<p>Welche Rechte (alle!) brauche ich, um auf eine Datei zuzugreifen? Sind es immer dieselben?</p>
</li>
</ul>
<h1 id="kurzer-sicherheitscheck-für-zwischendurch">
    <a href="#kurzer-sicherheitscheck-f%c3%bcr-zwischendurch">
	Kurzer Sicherheitscheck für Zwischendurch
    </a>
</h1>
<p>Bonusfolien aus der alten Schulung</p>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-015.jpg" alt=""  />
</p>

</p>
<p>Die meisten Fehler entstehen nicht durch falsche Software, sondern dumme User.</p>
<ul>
<li>
<p><code>find / -fstype ... ! -type l -perm ... -ls</code></p>
<ul>
<li>-perm -2 (find world writeable files)</li>
<li>-perm -4000 (find SUID)</li>
<li>-perm -2000 (find SGID)</li>
</ul>
</li>
<li>
<p>Finde Dateien, die world writeable, suid oder sgid sind.</p>
<ul>
<li><code>/tmp</code>, <code>/var/tmp</code> (1777 ?)</li>
<li>Verzeichnisse im Pfad, Binaries, Konfigurationsdateien?</li>
<li>Dateien mit vorhersagbaren Dateinamen?</li>
<li>Geräte? Backup?</li>
</ul>
</li>
</ul>
<h1 id="rechte-an-geräten">
    <a href="#rechte-an-ger%c3%a4ten">
	Rechte an Geräten
    </a>
</h1>
<p>Bonusfolien aus der alten Schulung</p>
<p><p class="md__image">
  <img src="/uploads/2000/04/neu-system-016.jpg" alt=""  />
</p>

</p>
<ul>
<li>
<p>Auf vielen älteren kommerziellen Unices sind Gerätedateien unzureichend geschützt.</p>
<ul>
<li>Beschreibbare Plattendevices, Banddevices</li>
<li>777-Verzeichnisse <code>/dev/md/*</code>, Löschen von LVM-Pseudogerätedateien</li>
<li><code>ioctl()</code>-Aufrufe nicht ausreichend privilegiert.</li>
<li>Medien mit sensitivem Inhalt in lesbaren Geräten.</li>
</ul>
</li>
<li>
<p>Beispiele:</p>
<ul>
<li>ioctl()-Aufrufe in AIX teilweise nicht dokumentiert und nicht privilegiert.</li>
<li>/dev-Unterverzeichnisse 777 in HP/UX.</li>
<li>/bin-Verzeichnisse 777 in HP/UX und AIX nach Installation von Software.</li>
</ul>
</li>
</ul>

			</div>
		</div>

		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
				
				<a href="/tags/#lang_de" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				lang_de
				</a>
				
				<a href="/tags/#linux" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				linux
				</a>
				
				<a href="/tags/#unix" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				unix
				</a>
				
				<a href="/tags/#security" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				security
				</a>
				
				<a href="/tags/#devops" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				devops
				</a>
				
				<a href="/tags/#talk" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				talk
				</a>
				
				<a href="/tags/#publication" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				publication
				</a>
				
			</div>
		</div>

		
		
		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<a href="https://github.com/isotopp/isotopp.github.io/edit/main/content/posts/2000-04-14-neu-auf-einem-fremden-system.md"
				   rel="noopener noreferrer" target="_blank">
					<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Suggest Changes</span>
				</a>
			</div>
		</div>
		

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2000/04/01/datenspuren-im-internet.html">Datenspuren im Internet</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2000/05/01/webserver-security.html">Webserver Security</a>
				</div>
				
			</div>
		</div>


		
	</article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff.
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#rss-fill'/>
          </svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#envelope'/>
          </svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#github'/>
          </svg>
        </a>

        <a rel="me" href="https://infosec.exchange/@isotopp" title='Follow on Mastodon' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#mastodon'/>
          </svg>
        </a>

        
        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#steam'/>
          </svg>
        </a>

        

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#youtube'/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
