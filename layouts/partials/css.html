<!-- Our custom CSS -->
{{ if hugo.IsServer }}
{{ $options := (dict "targetPath" "style.css" "outputStyle" "compressed" "enableSourceMap" true "includePaths" (slice "themes/hugo-bootstrap-bare/assets/node_modules/bootstrap/scss")) }}
{{ $style := resources.Get "sass/main.scss" | css.Sass $options | fingerprint }}
<link rel="stylesheet" href="{{ $style.Permalink }}">
{{ else }}
{{ $options := (dict "targetPath" "style.css" "outputStyle" "compressed" "enableSourceMap" false "includePaths" (slice "themes/hugo-bootstrap-bare/assets/node_modules/bootstrap/scss")) }}
{{ $style := resources.Get "sass/main.scss" | css.Sass $options | minify | fingerprint }}
<link rel="stylesheet" href="{{ $style.Permalink }}">
{{ end }}

{{/* KaTeX CSS + vendored fonts */}}
{{ range $font := resources.Match "/node_modules/katex/dist/fonts/*" }}
{{ $target := printf "css/fonts/%s" (path.Base $font.Name) }}
{{ $published := $font | resources.Copy $target }}
{{ $noop := $published.RelPermalink }}
{{ end }}
{{ $katexCSS := resources.Get "/node_modules/katex/dist/katex.min.css" | resources.Copy "css/katex.min.css" | fingerprint }}
<link rel="stylesheet" href="{{ $katexCSS.Permalink }}">
