<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>MySQL: Ways to run mysqldump | Die wunderbare Welt von Isotopp</title>
<meta name="description" content="Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">
<link rel="canonical" href="https://blog.koehntopp.info/2023/01/03/mysql-ways-to-run-mysqldump.html">

<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">


<meta name="generator" content="Hugo 0.145.0">
<meta property="og:title" content='MySQL: Ways to run mysqldump | Die wunderbare Welt von Isotopp' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />
<meta property="og:locale" content="en_US" />
<meta name="description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:url" content="https://blog.koehntopp.info/2023/01/03/mysql-ways-to-run-mysqldump.html" />
<meta property="og:type" content="article" />
<meta name="article:published_time" content='2023-01-03T01:02:03Z' />
<meta name="fediverse:creator" content="@isotopp@infosec.exchange">
<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/mysql.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content='@isotopp@infosec.exchange' />
<meta property="twitter:title" content='MySQL: Ways to run mysqldump' />
<meta property="twitter:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/mysql.jpg' />


    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.dd9d518fe6cac55191b6af874e18327dff051055754ffc7e106131baf826e6d3.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info/" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/avatars/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            









<div class="page">
	<article class="mysql-ways-to-run-mysqldump-page">
		<div class='row  justify-content-center text-center my-4 mx-0'>
			<header class="headerbanner">
				<div class='col'>
					<h1 class="title mb-lg-4 text-white">
						MySQL: Ways to run mysqldump
					</h1>
					<div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
						<img alt='@isotopp@infosec.exchange image' src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0'
						     style='width: 1.9rem; border-radius: 1rem;'>
						<a href="https://infosec.exchange/@isotopp" class='text-light text-decoration-none'>
							Kristian Köhntopp
						</a>
						
						<span class='d-none d-lg-inline'>-</span>
						<div class='d-block d-lg-inline'>January 3, 2023</div>
						
					</div>
				</div>
				
				<img alt='a featured image' src="/assets/img/background/mysql.jpg">
				
			</header>
		</div>

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2022/12/30/was-mein-kind-in-der-schule-so-macht.html">Was mein Kind in der Schule so macht</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2023/01/04/i-dont-hate-letsencrypt-anymore.html">I don&#39;t hate Let&#39;s Encrypt anymore</a>
				</div>
				
			</div>
		</div>

		<div class='row justify-content-center mx-0 mt-3 mb-5'>
			<div class="col-lg-8 mb-3">
				
			</div>
			<div class='col-lg-8'>
				<p>This text exists mainly so that I paste the URL into the <code>#mysql</code> channel in Libera IRC.</p>
<p>The <code>mysqldump</code> tools allows you to convert a MySQL database server or individual schemas back to SQL.
You are left with a script that is supposed to be loadable into a target server and gives you back the full database, including all objects in it.</p>
<p>You can read that SQL as a script into an empty server to create a new instance, or process it with different tools for different purposes.
So in general, a workflow can look like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump --options --more-options and parameters &gt; somescript.sql
</span></span><span class="line"><span class="cl"><span class="gp">$</span> scp somescript.sql somewhere@else.com:
</span></span><span class="line"><span class="cl"><span class="gp">$</span> ssh somewhere@else.com
</span></span><span class="line"><span class="cl"><span class="go">...
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="gp">$</span> mysql --show-warnings --whatever-options &lt; somescript.sql
</span></span></code></pre></div><p>Instead of <code>mysql</code> with an input redirect, you may also use the command line client and the <code>source</code> command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysql --show-warnings --whatever-options
</span></span><span class="line"><span class="cl"><span class="go">mysql&gt; source somescript.sql
</span></span></span></code></pre></div><h1 id="tldr">
    <a href="#tldr">
	TL;DR
    </a>
</h1>
<p>To get everything, run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump ...  --single-transaction --source-data<span class="o">=</span><span class="m">2</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --routines --triggers --events <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --all-databases <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> gzip -9 &gt; mydump.sql.gz
</span></span></code></pre></div><p>To get one database, run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump ...  --single-transaction --source-data<span class="o">=</span><span class="m">2</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --routines --triggers --events <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --databases dbname <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> gzip -9 &gt; mydump.sql.gz
</span></span></code></pre></div><p>To get only the schema, use <code>--no-data</code>.
For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump ...  --single-transaction --source-data<span class="o">=</span><span class="m">2</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --routines --triggers --events <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --no-data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --databases dbname &gt; mydump.sql
</span></span></code></pre></div><h1 id="how-do-we-get-there">
    <a href="#how-do-we-get-there">
	How do we get there?
    </a>
</h1>
<h2 id="setting-expectations">
    <a href="#setting-expectations">
	Setting expectations
    </a>
</h2>
<p>SQL scripts are not a compact data representation, and often the <code>mysqldump</code> of a server is larger than <code>$DATADIR</code> of that instance.
The script usually compresses very well.
So it is useful to run <code>gzip</code> or similar on it.</p>
<p>SQL scripts are a representation of the data in the instance in textual form without indexes.
Reading the script into a new server not only requires parsing the SQL into server internal data structures.
It also requires that indexes are being rebuilt, and that is a process that consumes a lot of CPU and memory.</p>
<p>Most people would suggest that you do not ship data larger than 10 GB in the form of a <code>mysqldump</code>, because loading it will take too long.
As a rule of thumb that holds well, but it really is a function of memory available for index building, and the size of the largest index in the dump.</p>
<p><code>mysqldump</code> is single threaded. It profits from faster CPUs, but not from more cores.
Loading a dump is also single threaded.</p>
<p>The defaults of <code>mysqldump</code> are somewhat sane, if you only want to dump tables.
For code in the database, additional options are required that are not part of the standard configuration.</p>
<h2 id="dumping-everything-atomically">
    <a href="#dumping-everything-atomically">
	Dumping everything, atomically
    </a>
</h2>
<p>We are assuming here that all tables are InnoDB, without exception.
If in 2023 you still are using non-transactional tables, you are beyond help anyway.</p>
<p>Dumping all data in the database takes time.
While running the dump, the data you are trying to dump may change due to other processes making changes.</p>
<p>Specifically, with the default isolation level, each single table will maintain a consistent read view while being dumped.
It will therefore not change for the <code>mysqldump</code> while it is being dumped.
But between tables changes may happen.</p>
<p>The option <code>--single-transaction</code> can be used to run the entire <code>mysqldump</code> in a single transaction, providing you with a consistent dump of the database.</p>
<p>A consistent dump of a database is associated with exactly one binlog position.
In traditional replication, and for bookkeeping purposes, it is useful to take note of this binlog position.
So the option <code>--source-data=2</code> (previously <code>--master-data=2</code>) should also be used to record this binlog position in the dump.</p>
<p>This will result in a comment to be added at the top of the dump file looking like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1">--
</span></span></span><span class="line"><span class="cl"><span class="c1">-- Position to start replication or point-in-time recovery from
</span></span></span><span class="line"><span class="cl"><span class="c1">--
</span></span></span><span class="line"><span class="cl"><span class="c1">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- CHANGE MASTER TO MASTER_LOG_FILE=&#39;binlog.000005&#39;, MASTER_LOG_POS=157;
</span></span></span></code></pre></div><p>So far, our <code>mysqldump</code> command to dump everything should look like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump ... --single-transaction --source-data<span class="o">=</span><span class="m">2</span>
</span></span></code></pre></div><h2 id="dumping-code-in-the-database">
    <a href="#dumping-code-in-the-database">
	Dumping code in the database
    </a>
</h2>
<p>By default, <code>mysqldump</code> will not dump all non-table objects in the database.
You need to pass <code>--routines</code>, <code>--triggers</code> and <code>--events</code> to get all the code from the database as well.</p>
<p>On newer versions of MySQL, <code>--triggers</code> is enabled by default, so they are dumped.
On older versions, you would have to manually mention it on the command line.</p>
<p>Even on the most recent versions of MySQL, stored functions, stored procedures and events are not dumped automatically.
You would have to mention <code>--routines</code> and <code>--events</code> for them to be dumped.</p>
<p>On older versions of MySQL that was not a problem, if the <code>mysql.*</code> schema was part of the dump.
Inside it were tables in there that contained functions, procedures and even definitions.</p>
<p>Starting with MySQL 8, these tables are no longer used, because the definitions are now stored in hidden data dictionary tables.<br>
Using these options is now mandatory, if you want this code to be part of the dump.</p>
<p>So in order to also dump code in the database, our command becomes now</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump ... --single-transaction --source-data<span class="o">=</span><span class="m">2</span> --triggers --routines --events
</span></span></code></pre></div><h2 id="--opt-is-a-set-of-options-enabled-by-default">
    <a href="#--opt-is-a-set-of-options-enabled-by-default">
	<code>--opt</code> is a set of options enabled by default
    </a>
</h2>
<p>The <code>mysqldump</code> runs with <code>--opt</code> enabled by default.
You could run with <code>--skip-opt</code> to prevent this, but this is not helpful.</p>
<p><code>--opt</code> is a shorthand for the following collection of options:</p>
<dl>
<dt><code>--add-drop-table</code></dt>
<dd>Generate a <code>DROP TABLE</code> statement before each <code>CREATE TABLE</code> statement in the dump.</dd>
<dt><code>--add-locks</code></dt>
<dd>Enclose the <code>INSERT</code> statements loading data into the table with <code>LOCK TABLES</code> and <code>UNLOCK TABLES</code> statements.
This used to make data load faster for MyISAM tables, but should not be necessary for InnoDB tables.
It is not harmful, especially not for initial data loads, so do not worry about it.</dd>
<dt><code>--create-options</code></dt>
<dd>Preserve all MySQL specific create options for all tables.
This is very much needed in almost all use-cases.
It may be disabled for data transport from MySQL to other database systems.</dd>
<dt><code>--disable-keys</code></dt>
<dd>For each table, enclose the <code>INSERT</code> statements in <code>DISABLE KEYS</code> and <code>ENABLE KEYS</code> statements.
For MyISAM tables, this improves data load speed, and index quality.
For InnoDB, it does nothing, but is also not harmful.</dd>
<dt><code>--extended-insert</code></dt>
<dd>The <code>INSERT</code> statements generated will use extended insert syntax.
This will generate very long lines in the dump (matching whatever is defined as <code>max-allowed-packet</code>).
This will minimize round trips, and make the load faster.
It will make grepping and editing the dump very hard.
It may create problems loading the data, if the source server has a modified, large <code>max-allowed-packet</code>.
Depending on what you want to do with the dump, it may be useful to <code>--skip-extended-insert</code> to turn this off.</dd>
<dt><code>--lock-tables</code></dt>
<dd>This will lock the local tables before dumping them.
This is important when using MyISAM tables, and is overridden, if tables are InnoDB, and <code>--single-transaction</code> is used.
So we are okay with it.</dd>
<dt><code>--quick</code></dt>
<dd>This dumps the tables using <code>mysql_use_result()</code>, so the result is streamed using very little memory in the client.
If you run with <code>--skip-quick</code>, full tables will be downloaded into the client before then can be dumped.
If these tables are many gigabytes in size, <code>mysqldump</code> will be using a lot of memory, and will be very unhappy.
Do not disable <code>--quick</code>.</dd>
<dt><code>--set-charset</code></dt>
<dd>Generate a <code>SET NAMES</code> statement as needed to preserve character encoding.
This should be always on, in order to preserve character encoding correctly.</dd>
</dl>
<p>In general, you should be fine with <code>--opt</code> and there is no need to change anything.</p>
<p>In some cases, you want to run with <code>--skip-extended-insert</code>, in order to search and manually edit the data in the dump easier.
The dump will load somewhat slower, and will be somewhat larger in this case.</p>
<h2 id="dumping-only-the-schema">
    <a href="#dumping-only-the-schema">
	Dumping only the schema
    </a>
</h2>
<p>If you want to dump only the schema, and not the data, there is an option for that: <code>--no-data</code>.
You get an SQL file with no <code>INSERT</code>, only <code>CREATE TABLE</code> and friends.
You would still need <code>--routines</code>, <code>--triggers</code> and <code>--events</code> to get all the code.</p>
<p>We get</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump ... --single-transaction --source-data<span class="o">=</span><span class="m">2</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>     --triggers --routines --events <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>     --no-data
</span></span></code></pre></div><h2 id="dumping-all-databases-or-just-one-database">
    <a href="#dumping-all-databases-or-just-one-database">
	Dumping all databases, or just one database
    </a>
</h2>
<h3 id="all-databases">
    <a href="#all-databases">
	&ndash;all-databases
    </a>
</h3>
<p>You need to tell <code>mysqldump</code> what to dump.</p>
<p>This can be <code>--all-databases</code>, which will do exactly that, including the <code>mysql</code> database with all the grants, the help, the timezone data and so on.</p>
<p>If <code>--all-databases</code> is being used, each database in the dump will be created with a <code>CREATE DATABASE</code> statement.
A matching <code>DROP DATABASE</code> statement is not being generated.
That is less of a problem than one might assume, because the generated <code>CREATE DATABASE</code> statement is protected by an <code>IF NOT EXISTS</code> clause.</p>
<p>Still, it may be useful to <code>DROP DATABASE IF EXISTS</code> before creating a new one, in order to get rid of tables that should not be there.<br>
To achieve this, you could add the option <code>--add-drop-database</code>.</p>
<p>But: If you do that together with <code>--all-databases</code>, then a <code>DROP DATABASE ...;</code> statement will put in front of each <code>CREATE DATABASE</code> statement, including the <code>mysql</code> system database:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="cm">/*!40000 DROP DATABASE IF EXISTS `mysql`*/</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="cm">/*!32312 IF NOT EXISTS*/</span><span class="w"> </span><span class="o">`</span><span class="n">mysql</span><span class="o">`</span><span class="w"> </span><span class="cm">/*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */</span><span class="w"> </span><span class="cm">/*!80016 DEFAULT ENCRYPTION=&#39;N&#39; */</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">USE</span><span class="w"> </span><span class="o">`</span><span class="n">mysql</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>In MySQL 8, the <code>mysql</code> schema cannot be dropped anymore, so you need to edit that out manually to make the dump useful.</p>
<p>Why <code>mysqldump</code> does  not special case this schema nobody knows:
it is known broken, and documented as broken in the manual page.
But nobody cared enough to put this single <code>&amp;&amp; (!my_strcasecmp(charset_info, ..., &quot;mysql&quot;))</code> into
<a href="https://github.com/mysql/mysql-server/blob/a246bad76b9271cb4333634e954040a970222e0a/client/mysqldump.cc#L4547" target="_blank" rel="noopener">the codebase</a>

.</p>
<p>We end up running</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump ...  --single-transaction --source-data<span class="o">=</span><span class="m">2</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --routines --triggers --events <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --all-databases --add-drop-database &gt; mydump.sql
</span></span></code></pre></div><h3 id="a-single-database">
    <a href="#a-single-database">
	A single database
    </a>
</h3>
<p>Instead of dumping all database, maybe we want just one database, or even a single table from a single database.</p>
<p>If you run <code>mysqldump databasename</code> to dump a single database like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump ...  --single-transaction --source-data<span class="o">=</span><span class="m">2</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --routines --triggers --events <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   databasename &gt; mydump.sql
</span></span></code></pre></div><p>no <code>CREATE DATABASE</code> statement is generated.
You will just get a sequence of <code>CREATE TABLE</code> statement.
This can easily be imported into a differently named database.</p>
<p>Also, adding <code>--add-drop-database</code> to this does nothing.</p>
<p>If you run <code>mysqldump --databases databasename</code> to dump a single database instead,</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump ...  --single-transaction --source-data<span class="o">=</span><span class="m">2</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --routines --triggers --events <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --databases databasename &gt; mydump.sql
</span></span></code></pre></div><p>this does generate a leading <code>CREATE DATABASE</code> statement.
That is, because the <code>--databases</code> option accepts a space separated list of databases to dump.</p>
<p>Here, using <code>--add-drop-database</code> will do what is expected from it.</p>
<p>To dump a single table, use</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mysqldump ...  --single-transaction --source-data<span class="o">=</span><span class="m">2</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --routines --triggers --events <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="gp">&gt;</span>   --databases databasename --tables tablename &gt; mydump.sql
</span></span></code></pre></div><p>Alternately mixing <code>--databases</code> and <code>--tables</code> will not work.</p>

			</div>
		</div>

		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
				
				<a href="/tags/#lang_en" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				lang_en
				</a>
				
				<a href="/tags/#mysql" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				mysql
				</a>
				
				<a href="/tags/#mysqldev" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				mysqldev
				</a>
				
			</div>
		</div>

		
		
		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<a href="https://github.com/isotopp/isotopp.github.io/edit/main/content/posts/2023-01-03-mysql-ways-to-run-mysqldump.md"
				   rel="noopener noreferrer" target="_blank">
					<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Suggest Changes</span>
				</a>
			</div>
		</div>
		

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2022/12/30/was-mein-kind-in-der-schule-so-macht.html">Was mein Kind in der Schule so macht</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2023/01/04/i-dont-hate-letsencrypt-anymore.html">I don&#39;t hate Let&#39;s Encrypt anymore</a>
				</div>
				
			</div>
		</div>


		
	</article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff.
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#rss-fill'/>
          </svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#envelope'/>
          </svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#github'/>
          </svg>
        </a>

        <a rel="me" href="https://infosec.exchange/@isotopp" title='Follow on Mastodon' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#mastodon'/>
          </svg>
        </a>

        
        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#steam'/>
          </svg>
        </a>

        

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#youtube'/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
