<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Samba</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="apple-touch-icon" href="icon.png">
<link rel="favicon.ico" rel="icon" type="image/ico">
<link rel="canonical" href="https://blog.koehntopp.info">


<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">




<meta name="generator" content="Hugo 0.92.0" />
<meta property="og:title" content='Samba' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />


<meta property="og:locale" content="de_DE" />


<meta name="description" content='' />
<meta property="og:description" content='' />

<link rel="canonical" href="https://blog.koehntopp.info" />
<meta property="og:url" content="https://blog.koehntopp.info" />


<meta property="og:type" content="article" />
<meta name="article:published_time" content='1996-01-11T09:00:00Z' />



<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content='@isotopp' />
<meta name="twitter:creator" content='@isotopp' />
<meta property="twitter:title" content='Samba' />
<meta property="twitter:description" content='' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />

<script type="application/ld+json">
    {"@context":"https://schema.org","@type":"WebSite","description":null,"headline":"Samba","image":"/assets/img/background/rijksmuseum.jpg","name":"Die wunderbare Welt von Isotopp","url":"https://blog.koehntopp.info"}
</script>

    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.34cf67ab5155251adc1c5fa5c2f37d5a4f8f029f51399eb2556031d6ac918d49.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            




<div class="page">
  <article class="samba-page">
    <div class='row  justify-content-center text-center my-4 mx-0'>
      <header>
        <div class='col'>
          <h1 class="title mb-lg-4 text-white">
            Samba
          </h1>
          <div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
            <img alt='isotopp image' src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
            <a href="https://twitter.com/isotopp" class='text-light text-decoration-none'>
                Kristian Köhntopp
            </a>

            
              <span class='d-none d-lg-inline'>-</span>
              <div class='d-block d-lg-inline'>January 11, 1996</div>
            

          </div>
        </div>
        
          <img alt='a featured image' src="/assets/img/background/rijksmuseum.jpg">
        
      </header>
    </div>

    <div class='row justify-content-center mx-0 mt-5 mb-5'>
      <div class='col-lg-8'>
        <p><strong>erschienen in der iX 1/96</strong></p>
<ul>
<li><a href="#samba-19">Text des Artikels</a>

</li>
<li><a href="#samba-im-internet">Samba im Internet</a>

</li>
<li><a href="#eine-standardkonfiguration">Eine Standardkonfiguration</a>

</li>
</ul>
<h1 id="samba-19">
    <a href="#samba-19">
	Samba 1.9
    </a>
</h1>
<h4 id="samba-ist-ein-softwarepaket-für-unix-das-microsoft-lan-manager-server-funktionen-erbringt-ursprünglich-von-andrew-tridgell-einem-studenten-an-der-australian-national-university-canberra-erstellt-ist-es-inzwischen-unter-der-gnu-general-public-license-verfügbar">
    <a href="#samba-ist-ein-softwarepaket-f%c3%bcr-unix-das-microsoft-lan-manager-server-funktionen-erbringt-urspr%c3%bcnglich-von-andrew-tridgell-einem-studenten-an-der-australian-national-university-canberra-erstellt-ist-es-inzwischen-unter-der-gnu-general-public-license-verf%c3%bcgbar">
	Samba ist ein Softwarepaket für Unix, das Microsoft Lan Manager Server-Funktionen erbringt. Ursprünglich von Andrew Tridgell, einem Studenten an der Australian National University, Canberra erstellt, ist es inzwischen unter der GNU General Public License verfügbar.
    </a>
</h4>
<p>Andrew Tridgell, ein Student an der Australian National University Canberra, stand Ende 1991 vor dem Problem, einen Fileserver für SUN Workstations haben zu müssen, der zu DEC Pathworks für kompatibel ist.
Ohne Informationen über die Art des verwendeten Protokolls zu haben, gelang es ihm schon nach wenigen Tagen, das verwendete Protokoll in Teilen zu reverse engineeren.
Erst nachdem eine allererste Version seines Servers schon fertiggestellt war, wies man ihn auf das in RFC 1001 und 1002 definierte &ldquo;NetBIOS on a TCP/UDP transport&rdquo; Protokoll hin.
Im Januar wurde die erste Version seines &ldquo;Server 0.1&rdquo; Paketes auf dem Netz veröffentlicht.
Es sollte jedoch noch bis Ende 1993 dauern, bis Tridgell durch den Einsatz von Linux und die Notwendigkeit, mit PCs unter DOS, Windows und OS/2 zu kommunizieren, die Weiterentwicklung von Samba wieder aufnahm.</p>
<p>Heute ist Samba ein relativ ausgereiftes, standardkonformes und vor allen Dingen hochportables Softwarepaket, das auf den meisten UNIX-Versionen problemlos installierbar ist und die Möglichkeit bietet, Verzeichnisse und Drucker an PC-Betriebssysteme zu exportieren.
Samba konkurriert hier mit dem von SUN definierten Network File System (NFS).</p>
<p>Für den Systemadministrator in einem heterogenen Netzwerk von UNIX-Servern und Client-PCs ist Samba dabei wahrscheinlich attraktiver als NFS, denn in den meisten Fällen stehen wenigen UNIX-Servern viele Client-PCs gegenüber.
Beim Einsatz von NFS könnte zwar das mit den meisten UNIX-Versionen mitgelieferte Serverpaket verwendet werden, aber für die Clients müßten nicht nur viele Client-Lizenzen von PC-NFS oder etwas vergleichbarem angeschafft werden, sondern diese Software müßte auch netzwerkweit installiert und gewartet werden.
Windows für Workgroups, Windows 95, Windows NT und OS/2 sprechen aber schon von Haus aus das Lan Manager Protokoll und so ist es effizienter, den wenigen Servern dieses Protokoll beizubringen und auf den Clients mitgelieferte Software zu verwenden.
Diesen Weg geht Samba.</p>
<p>Da der Samba-Server ein reiner Usermode-Server ist, also ein ganz normales Anwendungsprogramm, ist es möglich, auch Verzeichnisse per Samba zu reexportieren, die der Server per NFS gemountet hat.
Auf diese Weise entsteht eine Protokollbrücke von NFS nach SMB.
Dabei ist natürlich der Performanceverlust durch doppelten Netzzugriff in Kauf zu nehmen.
Auf der anderen Seite ist Samba unter der GNU GPL frei zur Verfügung stehende Software und so steht der Installation des Samba-Servers auf allen Servermaschinen nichts im Weg.</p>
<p>Es soll jedoch nicht verschwiegen werden, daß Samba aus der Sicht eines UNIX-Systemverwalters schwerwiegende Nachteile hat.
Als Protokoll, das in der PC-Welt entstanden ist, kennt Samba kein Konzept eines Dateieigentümers.
Die Zugriffe auf Ressourcen erfolgen oft mit unklaren Userrechten oder scheinbar willkürlich gewählten Paßworten.
Betriebssysteme wie Windows für Workgroups und Windows'95, die dem Benutzer zwar einen Namen geben, dann aber Netzwerkzugriffe ohne oder unter anderen Namen erzeugen, machen die Sache nicht leichter.
Dazu kommt, daß die Familie der Windows-Betriebssysteme die Groß-/Kleinschreibung von Paßworten in einigen Kombinationen von Betriebssystem/Paßwort verändern.
Samba hat eine ganze Reihe Mechanismen, um diesem Problem abzuhelfen, aber der Verwaltungsaufwand ist anfangs trotzdem höher als bei einer typischen NFS-Installation.<p></p>
<p><p class="md__image">
  <img src="/uploads/1996/01/SuperNOS.gif" alt=""  />
</p>

</p>
<p><em>Novell hat versucht, das Super Network Operating System durch Verschmelzung der zugekauften UNIX-Quellen mit ihrem eigenen Serverbetriebssystem zu bauen und ist gescheitert. Klammheimlich hat das frei verfügbare Linux gelernt, die meisten Netzwerkprotokolle zu sprechen und ist auf dem besten Wege, eben dieses SuperNOS zu werden.</em></p>
<h2 id="installation">
    <a href="#installation">
	Installation
    </a>
</h2>
<p>Die Installation gestaltet sich relativ einfach.
Nach dem Auspacken ist das Makefile im <code>source/</code>-Verzeichnis nach den eigenen Wünschen anzupassen.
Dabei ist es hilfreich, nicht nur die gewünschten Pfadnamen einzutragen, sondern auch schon den Namen der gewünschten Arbeitsgruppe in der Variablen <code>WORKGROUP</code> einzutragen und einen speziellen  Gastaccount, der nur für SMB genutzt wird, in <code>GUESTACCOUNT</code> einzucompilieren.
Diese Defaults sind zwar auch zur Laufzeit änderbar, aber anpassen im Quelltext erspart das Schreiben von Konfigurationsdateien.
Weiterhin sind noch die gewünschten <code>make</code>-Optionen für den verwendeten Betriebssystemtyp zu aktivieren.
Danach steht einem <code>make</code> nichts mehr im Wege.</p>
<p>Erzeugt werden die Programme</p>
<dl>
<dt>nmbd:</dt>
<dd>NetBios Name Server. Der Name Server ist in der Lage, Hostnamen auf IP-Nummern abzubilden. Gleichzeitig steuert das Programm aber auch das Browsing, d.h. die Anzeige von exportierten Diensten und übernimmt damit Aufgaben, die bei NFS der <code>mountd</code> wahrnehmen würde.</dd>
<dt>nmblookup:</dt>
<dd>NetBios Name Lookup. Das Programm nimmt in etwa dieselbe Funktion wahr wie <code>nslookup</code> für das DNS, fragt jedoch einen <code>nmbd</code> ab.</dd>
<dt>smbclient:</dt>
<dd>Samba Client. Dient dazu, auf Linux-Seite einen SMB Server zu connecten und Dateien zu übertragen. Die Steuerung erfolgt ähnlich wie bei FTP. Linux bietet auch ein echtes, kernelbasiertes <code>smbfs</code> an, mit dem man einen Server richtig mounten kann. Andere Betriebssysteme sind auf den <code>smbclient</code> angewiesen.</dd>
<dt>smbd:</dt>
<dd>Der eigentliche Fileserver.</dd>
<dt>smbpasswd:</dt>
<dd>Ein Hilfsprogramm des <code>smbd</code>, mit dem Benutzer vom Client aus ihr Paßwort ändern können sollen. Es hat nur dann Funktion, wenn Samba mit der <code>libdes</code> und verschlüsselten Paßworten (siehe <strong>Samba im Internet</strong>) übersetzt wurde.</dd>
<dt>smbrun:</dt>
<dd>Ein Hilfsprogramm des <code>smbd</code>, mit dem Samba zu Beginn und Ende einer Serverconnection Logbucheinträge erzeugt.</dd>
<dt>smbstatus:</dt>
<dd>Ein sehr einfaches Programm zur Anzeige des Status aller zum Server bestehenden Verbindungen.</dd>
<dt>smbtar:</dt>
<dd>Ein Shellscript, das <code>smbclient</code> verwendet und das ein von einem PC exportiertes Verzeichnis mit <code>tar</code> auf dem Bandlaufwerk des UNIX-Servers sichert.</dd>
<dt>testparm:</dt>
<dd>Syntaxchecker für die Konfigurationsdatei.</dd>
<dt>testprns:</dt>
<dd>Syntaxchecker für die Druckerkonfiguration.</dd>
</dl>
<p><p class="md__image">
  <img src="/uploads/1996/01/programme.gif" alt=""  />
</p>

</p>
<p><em>Samba besteht aus einer Reihe von Programmen, die zum Betrieb des Servers (Server-Tools) oder zu seinem Test (Client-Tools) dienen.</em></p>
<p>Ein <code>make install</code> installiert diese Programme und die Manualpages dann im gewünschten Verzeichnis.
Damit der Server in Betrieb genommen werden kann, müssen <code>nmbd</code> und <code>smbd</code> entweder als permanent laufende Dämonen gestartet werden oder über passende Einträge in der <code>/etc/inetd.conf</code> bei Bedarf hochgezogen werden.</p>
<p>Für letzteres sind die Einträge</p>
<pre tabindex="0"><code>netbios-ns      137/tcp                         # NETBIOS Name Service
netbios-ns      137/udp
netbios-dgm     138/tcp                         # NETBIOS Datagram Service
netbios-dgm     138/udp
netbios-ssn     139/tcp                         # NETBIOS session service
netbios-ssn     139/udp
</code></pre><p>in der Datei <code>/etc/services</code> notwendig. Dazu passen dann die Zeilen</p>
<pre tabindex="0"><code>#
# SMB Samba File Server
#
netbios-ssn stream tcp  nowait  root    /usr/local/samba/bin/smbd smbd 
netbios-ns  dgram  udp  wait    root    /usr/local/samba/bin/nmbd nmbd -H /usr/local/samba/lib/lmhosts
</code></pre><p>in der <code>/etc/inetd.conf</code>.
Der <code>inetd</code> muß nach einer Änderung in seiner Konfigurationsdatei durch ein <code>SIGHUP</code> geweckt werden, damit er die Datei neu einliest.</p>
<h2 id="tests-mit-einer-einfachen-konfiguration">
    <a href="#tests-mit-einer-einfachen-konfiguration">
	Tests mit einer einfachen Konfiguration
    </a>
</h2>
<p>Durch die Verwendung einer <code>lmhosts</code>-Datei kann der Samba-Server als Nameserver für ein Lan Manager Netzwerk dienen.
Die <code>lmhosts</code>-Datei entspricht dabei in ihren ersten beiden Spalten einer normalen Hosts-Datei:
In der ersten Spalte wird eine IP-Nummer genannt, der in der zweiten Spalte ein Name zugeordnet wird.
Mit einer optionalen, dritten Spalte können für einzelne Namen bestimmte Flags gesetzt werden:
Der Buchstabe <code>G</code> kennzeichnet einen Namen als den Namen der eigenen Arbeitsgruppe.
Die zugehörige Adresse ist die Broadcast-Adresse der betreffenden Arbeitsgruppe.
Das Flag <code>S</code> kennzeichnet die Namen und Broadcastadressen weiterer Arbeitsgruppen, in denen die Dienste unseres Servers ebenfalls angepriesen (registriert) werden sollen.
Und das Flag <code>M</code> schließlich kennzeichnet diesen Eintrag als den defaultmäßigen Netbios-Namen dieser Maschine.</p>
<p>Der nächste Schritt ist die Erzeugung der zentralen Konfigurationsdatei.
Wenn Samba im Defaultverzeichnis <code>/usr/local/samba</code> installiert worden ist, muß diese Datei in <code>/usr/local/samba/lib/smb.conf</code> angelegt werden.
Ihr Aufbau gleicht syntaktisch dem einer WIN.INI-Datei von MS-Windows:
Sie besteht aus Abschnitten, die jeweils durch einen Namen in eckigen Klammern eingeleitet wird.
Jeder Abschnitt enthält dann eine Reihe von Zuweisungen der Form <code>Parameter = Wert</code>.
Parameter dürfen genau wie Abschnittnamen Leerzeichen enthalten, die Samba ignoriert.
Ebenso spielt Gross- und Kleinschreibung keine Rolle.</p>
<p>Jeder Abschnitt der <code>smb.conf</code> definiert einen Service, der von Samba exportiert wird.
Ein Service kann dabei ein Drucker oder - häufiger - ein Verzeichnis sein.
Samba kennt drei Abschnitte, die besondere Bedeutung haben:</p>
<dl>
<dt>[global]:</dt>
<dd>In diesem Abschnitt werden besondere, globale Einstellungen für den Server getroffen.</dd>
<dt>[printers]:</dt>
<dd>In diesem Abschnitt kann man alle Drucker der <code>/etc/printcap</code> exportieren.</dd>
<dt>[homes]:</dt>
<dd>In diesem Abschnitt kann man alle Homeverzeichnisse des Servers exportieren.</dd>
</dl>
<p>Samba bietet nun buchstäblich Dutzende von Parametern, mit denen man den Server seinen Bedürfnissen anpassen kann.
Zum Glück sind die Defaults jedoch so eingestellt, daß man nur wenige dieser Parameter wirklich anpassen muß.</p>
<p>Zum Testen sollte man eine minimale <code>smb.conf anlegen.</code>Sie könnte zum Beispiel so aussehen:</p>
<pre tabindex="0"><code>[global]
        guest account = smbguest

[tmp]
        comment = temporary files 
        path = /tmp
        read only = yes
</code></pre><p>Der Account <code>smbguest</code> ist dabei ein User mit minimalen Rechten.
Der Abschnitt <code>[tmp]</code> exportiert das lokale <code>/tmp</code>-Verzeichnis read-only an die Welt.</p>
<p>Die Korrektheit dieser Konfigurationsdatei kann mit dem Kommando</p>
<pre tabindex="0"><code>$ SAM=/usr/local/samba
$ $SAM/bin/testparm $SAM/lib/smb.conf | more
</code></pre><p>schnell überprüft werden.
<code>testparm</code> liest die Datei ein und zeigt an, ob die Datei syntaktisch korrekt ist.
Danach werden die Werte aller internen Konfigurationsvariablen ausgegeben.
Auf diese Weise kann man schnell sehen, mit welchen internen Parameterwerten Samba wirklich operiert.</p>
<p>Mit dem <code>smbclient</code> kann man nun ausprobieren, ob das gewünschte Verzeichnis wirklich exportiert wird:</p>
<pre tabindex="0"><code>$SAM/bin/smbclient -L localhost -U%
Server time is Thu Nov 23 11:17:01 1995
Timezone is UTC+1.0
Domain=[DAHEIM] OS=[Unix] Server=[Samba 1.9.15p3]

Server=[localhost] User=[smbguest] Workgroup=[DAHEIM] Domain=[DAHEIM]

        Sharename      Type      Comment
        ---------      ----      -------
        tmp            Disk      temporary files
        IPC$           IPC       IPC Service (Samba 1.9.15p3)


This machine has a browse list:

        Server               Comment
        ---------            -------
        WHITE                Samba 1.9.15p3
        MAHAKI               
</code></pre><p>Die Meldung &ldquo;bad password&rdquo; an dieser Stelle würde anzeigen, daß der Gastaccount von Samba nicht richtig gesetzt ist oder nicht verwendet werden kann.
Auch &ldquo;hosts allow&rdquo; und &ldquo;hosts deny&rdquo;-Einträge, die unseren eigenen Rechner ausschließen, oder &ldquo;valid users&rdquo; und &ldquo;invalid users&rdquo;, die zu strikt gesetzt sind, können zu der Fehlermeldung führen.</p>
<p>Die Meldung &ldquo;connection refused&rdquo; deutet dagegen darauf hin, daß auf den Samba-Sockets kein Dämon zuhört.
Ein häufiger Fehler ist es, den inetd nach Änderungen an der Konfigurationsdatei nicht mit <code>SIGHUP</code> zu wecken.
<code>netstat -a</code> zeigt an, ob jemand auf dem Port <code>netbios-ssn</code> zuhört.</p>
<p>Ähnlich kann man die Funktionsfähigkeit des <code>nmbd</code> überprüfen:
Das Kommando</p>
<pre tabindex="0"><code>$ $SAM/bin/nmblookup -B localhost __SAMBA__
Sending queries to 127.0.0.1
193.102.57.4 __SAMBA__
</code></pre><p>sollte die IP-Adresse des eigenen Servers zurückliefern. Ebenso sollte ein</p>
<pre tabindex="0"><code>$ $SAM/bin/nmblookup -B mahaki '*'
Sending queries to 193.102.57.2
193.102.57.2 *
</code></pre><p>die Adresse des Clients zurückliefern.
Und schließlich sollten sich bei einem</p>
<pre tabindex="0"><code>$ $SAM/bin/nmblookup -d 2 '*'
Netmask for eth0 = 255.255.255.0
Derived broadcast address 193.102.57.255
Using broadcast 193.102.57.255
Sending queries to 193.102.57.255
Got a positive name query response from 193.102.57.2 (193.102.57.2)
Got a positive name query response from 193.102.57.4 (193.102.57.4)
193.102.57.4 *
</code></pre><p>alle Teilnehmer des lokalen Netzes melden, falls sie schnell genug sind.
Falls Server und Client nicht auf demselben Subnetz sind, ist es notwendig, die korrekte Broadcast-Adresse des entfernten Subnetzes mit der Option -B anzugeben.</p>
<p>Wenn man so sichergestellt hat, daß sich alle Rechner untereinander kennen und einander erreichen können, kann man versuchen, erst einmal lokal auf die exportierten Ressourcen
zuzugreifen:</p>
<pre tabindex="0"><code>$ $SAM/bin/smbclient &quot;\\\\localhost\\tmp&quot;
Server time is Thu Nov 23 11:28:06 1995
Timezone is UTC+1.0
Password: 
Domain=[DAHEIM] OS=[Unix] Server=[Samba 1.9.15p3]
smb: \&gt; dir
  isdnctrl0                                226942  Thu Nov 23 10:14:14 1995
  crond_running                                 0  Thu Nov 23 11:28:01 1995
</code></pre><p>Der Name der verwendeten Ressource wird DOS-Konform mit <code>\\rechner\ressource</code> bezeichnet.
Die verwendete Shell macht es jedoch notwendig, Backslashes als <code>\\</code> zu escapen.
Die Schreibweise des Kommandos erscheint so etwas merkwürdig.
Samba versucht sich unter dem normalen Usernamen anzumelden.
Das verlangte Paßwort ist also das normale Paßwort des Accounts.
Möchte man unter einem anderen Benutzernamen testen, ist die Option <code>-U username</code> hinter dem Namen der Ressource anzugeben.</p>
<p><code>smbclient</code> arbeitet ähnlich wie <code>ftp</code> und versteht Kommandos wie &ldquo;help&rdquo;, &ldquo;get&rdquo;, &ldquo;put&rdquo; und &ldquo;quit&rdquo;.
Wegen der Option <code>read only = yes</code> in der <code>smb.conf</code> schlägt ein &ldquo;put&rdquo; wie erwartet fehl:</p>
<pre tabindex="0"><code>smb: \&gt; put username.map
ERRDOS - ERRnoaccess (Access denied.) opening remote file \username.map
</code></pre><p>Wenn dies alles funktioniert, kann man versuchen, vom PC aus auf das Verzeichnis zuzugreifen.
Aus einem DOS-Fenster sollte man die exportierten Ressourcen mit</p>
<pre tabindex="0"><code>E:\users\default&gt;net view &quot;\\white&quot;
Freigegebene Ressourcen auf \\white

Samba 1.9.15p3

Name         Typ          Lokal    Beschreibung

-------------------------------------------------------------------------------
tmp          Platte                temporary files
Der Befehl wurde erfolgreich ausgeführt.
</code></pre><p>ansehen. Mit</p>
<pre tabindex="0"><code>E:\users\default&gt;net use &quot;\\white\tmp&quot; /user:kris
Das Kennwort für \\white\tmp ist ungültig.

Geben Sie das Kennwort für \\white\tmp ein:
Der Befehl wurde erfolgreich ausgeführt.
</code></pre><p>kann man sich dann beim Server anmelden.
Programme, die erweiterte Pfadnamen mit <code>\\rechnername</code> verstehen, können jetzt schon auf das Laufwerk zugreifen.
Der Samba-Server sollte nun auch im Dateimanager unter &ldquo;Datenträger&rdquo;, &ldquo;Netzwerklaufwerk verbinden&rdquo; sichtbar sein.</p>
<p>Die Bemerkung &ldquo;Das Kennwort für &hellip; ist ungültig&rdquo; des Windows NT-Servers aus dem Beispiel tritt übrigens auf, weil der Samba Server ohne verschlüsselte Paßworte  übersetzt wurde.
Wir der Server mit der <code>libdes</code> und der Option <code>encrypted passswords = yes</code> in der <code>smb.conf</code> installiert, erfolgt das Login ohne Rückfrage.</p>
<h2 id="geschwindigkeit">
    <a href="#geschwindigkeit">
	Geschwindigkeit
    </a>
</h2>
<p>Samba verwendet ein verbindungsorientiertes und asynchrones Protokoll und unterliegt so nicht den Einschränkungen, die die Geschwindigkeit von NFS begrenzen.
Auf der anderen Seite ist der Samba-Server so natürlich nicht so datensicher wie ein NFS-Server.
In der Praxis sollte das wenig ausmachen, da die Clients PCs sind und so vermutlich häufiger abstürzen&hellip;</p>
<p>Geschwindigkeitsprobleme kann es beim Einloggen geben, wenn der Client ein Windows für Workgroups ist und Samba das Loginpaßwort raten muß (siehe Kasten &ldquo;Eine Standardkonfiguration&rdquo;).
Falls das richtige Paßwort mehrere Großbuchstaben enthält und die <code>crypt()</code>-Routine des Servers hinreichend langsam ist, können so einige Sekunden vergehen.</p>
<p>Der Text <code>SPEED.txt</code> aus der Samba-Dokumentation enthält außerdem einige weitere Tips, mit der man die Geschwindigkeit des Servers unter Umständen weiter verbessern kann:
Niedrige Debug-Level, große Puffer und überlappende Zugriffe auf Platte und Netzwerk können die Serverperformance weiter steigern.</p>
<p>Alles in allem erreicht Samba so eine Performance, die einem Windows NT Server oder einem Pathworks Server vergleichbar ist.</p>
<hr>
<h1 id="samba-im-internet">
    <a href="#samba-im-internet">
	Samba im Internet
    </a>
</h1>
<p>Die zur Zeit der Entstehung dieses Artikels aktuelle Version von
Samba ist 1.9.15, Patch 3.</p>
<p>Das Homeverzeichnis von Samba ist <a href="ftp://nimbus.anu.edu.au/pub/tridge/samba">ftp://nimbus.anu.edu.au/pub/tridge/samba</a>

.
Da jedoch die Internet-Anbindung von Australien aus der Sicht von Deutschland nicht überragend ist, ist es vorteilhaft, sich Samba von einem der offiziellen Mirrors zu kopieren.
Die Dokumentation nennt dazu unter anderem
<a href="ftp://sunsite.unc.edu/pub/Linux/system/Network/Samba">ftp://sunsite.unc.edu/pub/Linux/system/Network/Samba</a>


und
<a href="ftp://ftp.uni-trier.de/pub/unix/network/samba">ftp://ftp.uni-trier.de/pub/unix/network/samba</a>

.</p>
<p>Das Paket liegt außerdem auf vielen deutschen Sunsite-Mirrors und ist praktisch auf jeder besseren Linux CD-ROM auch im Quelltext archviert.
Diese Versionen hinken jedoch, wie üblich, um einige Minor-Releases hinterher.</p>
<p>Nicht alle Mirrors archivieren
<a href="ftp://nimbus.anu.edu.au/pub/tridge/libdes/libdes.tar.92-10-13.gz">ftp://nimbus.anu.edu.au/pub/tridge/libdes/libdes.tar.92-10-13.gz</a>

,
weil dies administrative Probleme beim FTP-Verkehr von und nach USA machen würde.
Diese Bibliothek ist notwendig, wenn man mit verschlüsselten Paßworten auf dem Netz arbeiten möchte.
Clients und Server unter Windows NT verhalten sich ohne verschlüsselte Paßworte jedoch eigenartig.</p>
<p>Samba hat eine eigene Newsgroup im USENET, <code>comp.protocols.smb</code>,
die glücklicherweise nicht sehr überlaufen ist.
Außerdem findet man in den einschlägigen Linux-Newsgroups ebenfalls massenweise Fragen und Antworten rund um Samba.</p>
<p>Wer an aktuellen Informationen über Samba interessiert ist, kann sich auf der Mailingliste <code>samba-announce</code> eintragen lassen.
Dazu ist es notwendig, eine Mail an <code>listproc@listproc.anu.edu.au</code> zu senden, die im Text (nicht im Subject!) das Kommando <code>subscribe samba-announce Vorname Nachname</code> enthält.</p>
<p>Es existiert eine weitere Mailingliste, <code>samba</code>, die der Weiterentwicklung von Samba dient.
Um sich dort einzuschreiben, ist <code>subscribe samba Vorname Nachname</code> an die oben angegebene Adresse zu senden.</p>
<p>Die Samba Home-Page ist <a href="http://lake.canberra.edu.au/pub/samba/" target="_blank" rel="noopener">http://lake.canberra.edu.au/pub/samba/</a>

</p>
<hr>
<h1 id="eine-standardkonfiguration">
    <a href="#eine-standardkonfiguration">
	Eine Standardkonfiguration
    </a>
</h1>
<p>Die folgende Konfigurationsdatei dürfte die meisten
einfachen Anwendungsfälle abdecken:</p>
<pre tabindex="0"><code>[global]
  ; Gastaccount zuweisen
  guest account = smbguest
  ; Nicht alle User auf dem UNIX-Rechner heißen auf dem Windows NT gleich
  ; Format:
  ; unixuser = dosalias dosalias2 dosalias3...
  ; root = administrator admin
  username map = /usr/local/samba/lib/username.map
  ; Windows NT erfordert libdes und encrypted passwords, siehe Dokumentation
  encrypt passwords = yes
  ; Samba soll Domain Master und Browse Master sein.
   os level = 33
   domain master = yes
  ; nur Verbindungen von vertrauenswürdigen Hosts zulassen
  allow hosts = black, white, mahaki
  ; DOS &quot;share&quot; locking simulieren
  locking = yes
  share modes = yes
  ; Windows NT Protokoll verwenden
  ; Optionen sind CORE, COREPLUS, LANMAN1, LANMAN2 und NT1
  protocol = NT1
  
  ; Dies ist die Workgroup, der wir angehören
  workgroup = DAHEIM
  
[tmp]
  comment = Zwischenablage
  path = /tmp
  read only = no

[faq]
  comment = Haeufig gestellte Fragen (aus USENET)
  path = /scratch/faq
  read only = yes

[homes]
  comment = Homeverzeichnisse
  browseable = no
  read only = no
  create mode = 0750

[printers]
  comment = Alle Drucker aus /etc/printcap
  printing = bsd
  browseable = no
  load printers = yes
  read only = yes
  printable = yes
  path = /tmp
  public = yes
  create mode = 0700
</code></pre><p>Diese <code>smb.conf``  versucht einen minimalen Sicherheitslevel herzustellen, indem nur Verbindungen von Hosts von vertrauenswürdigen zugelassen werden. Sie exportiert zwei gewöhnliche Verzeichnisse: </code>/tmp<code>read-write und</code>/scratch/faq` read-only.</p>
<p>Außerdem werden die Drucker der <code>/etc/printcap</code> durch den besonderen Abschnitt <code>[printers]</code> und die Home-Verzeichnisse aller Benutzer durch <code>[homes]</code> exportiert.
Beide Abschnitte sind nicht als Browseable gekennzeichnet.
Dadurch erscheint nur das Home-Verzeichnis des auf dem Windows-Rechner angemeldeten Benutzers in der Browse-List des Dateimanagers.
Ebenso wird nicht <code>[printers]</code> selbst im Druckmanager angezeigt, sondern die Drucker der <code>/etc/printcap</code> werden durch das <code>load printers</code> einzeln angezeigt.</p>
<p>Dadurch, daß das NT1-Protkoll verwendet wird, ist es möglich, auch lange Dateinamen mit Groß-/Kleinschreibung zu verwenden.
Auch das LANMAN2-Protokoll kann dies.
Windows für Workgroups wandelt alle Paßworte in reine Großschrift um, wenn ein höheres Protokoll als COREPLUS verwendet wird.
In diesem Fall versucht Samba, das Paßwort zu raten, indem das übermittelte Paßwort in Groß- und Kleinschrift ausprobiert wird.
Mit der Option <code>password level = zahl</code> kann man Samba dazu bewegen, auch Kombinationen von Groß- und Kleinbuchstaben zu testen.
Die Zahl bestimmt dabei die maximale Anzahl von Großbuchstaben im Paßwort.</p>

      </div>
    </div>

    
    
    <div class='row justify-content-center mb-3 mx-0'>
      <div class='col-lg-8 text-center'>
        <span class='letter-spacing-01 text-uppercase text-secondary me-2'>Share</span>
        <a href='https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.koehntopp.info%2f1996%2f01%2f11%2fsamba.html' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#facebook'/></svg>
        </a>
        <a href='https://twitter.com/intent/tweet?source=https%3a%2f%2fblog.koehntopp.info%2f1996%2f01%2f11%2fsamba.html&text=Samba%20%7C%20Die+wunderbare+Welt+von+Isotopp:%20https%3a%2f%2fblog.koehntopp.info%2f1996%2f01%2f11%2fsamba.html' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#twitter'/></svg>
        </a>
        <a href='http://www.reddit.com/submit?url=https%3a%2f%2fblog.koehntopp.info%2f1996%2f01%2f11%2fsamba.html&title=Samba' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#reddit'/></svg>
        </a>
        <a href='mailto:?subject=Samba&body=https%3a%2f%2fblog.koehntopp.info%2f1996%2f01%2f11%2fsamba.html' target='_blank' class='text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#envelope-fill'/></svg>
        </a>
      </div>
    </div>

    
    
    <div class='row justify-content-center py-3 mb-3 mx-0'>
      <div class='col-lg-8 text-center'>
        <span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
        
          <a href="/tags/#lang_de" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            lang_de
          </a>
        
          <a href="/tags/#publication" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            publication
          </a>
        
          <a href="/tags/#unix" class='btn btn-sm btn-outline-primary mb-1'>
            <svg class="bi" width="1rem" height="1rem" fill="currentColor"><use xlink:href="/bootstrap-icons.svg#tag-fill"></use></svg>
            unix
          </a>
        
      </div>
    </div>

    <div class='row justify-content-center mb-5 pt-5 border-top mx-0'>
      <div class='col-lg-4 text-center text-lg-start'>
        
          <div>
            <div class='letter-spacing-01 text-uppercase text-secondary'>
              Next Post
            </div>
            <a class='text-decoration-none' href="https://blog.koehntopp.info/1996/03/01/rwx-sonst-nix.html">rwx - sonst nix?</a>
          </div>
        
      </div>

      <div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
        
          <div>
            <div class='letter-spacing-01 text-uppercase text-secondary'>
              Previous Post
            </div>
            <a class='text-decoration-none' href="https://blog.koehntopp.info/1996/01/02/was-ist-das-internet.html">Was ist das Internet?</a>
          </div>
        
      </div>
    </div>

    
    </article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff. 
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#rss-fill'/></svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#envelope'/></svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#github'/></svg>
        </a>

        <a href='https://www.reddit.com/user/isotopp' title='Follow on Reddit' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#reddit'/></svg>
        </a>

        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#steam'/></svg>
        </a>

        <a href='https://twitter.com/isotopp' title='Follow on Twitter' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#twitter'/></svg>
        </a>

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#youtube'/></svg>
        </a>

      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
