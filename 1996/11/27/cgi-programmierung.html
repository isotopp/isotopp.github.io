<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>CGI Programmierung | Die wunderbare Welt von Isotopp</title>
<meta name="description" content="Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">
<link rel="canonical" href="https://blog.koehntopp.info/1996/11/27/cgi-programmierung.html">

<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">


<meta name="generator" content="Hugo 0.145.0">
<meta property="og:title" content='CGI Programmierung | Die wunderbare Welt von Isotopp' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />
<meta property="og:locale" content="de_DE" />
<meta name="description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:url" content="https://blog.koehntopp.info/1996/11/27/cgi-programmierung.html" />
<meta property="og:type" content="article" />
<meta name="article:published_time" content='1996-11-27T01:02:03Z' />
<meta name="fediverse:creator" content="@isotopp@infosec.exchange">
<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content='@isotopp@infosec.exchange' />
<meta property="twitter:title" content='CGI Programmierung' />
<meta property="twitter:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />


    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.dd9d518fe6cac55191b6af874e18327dff051055754ffc7e106131baf826e6d3.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info/" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/avatars/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            









<div class="page">
	<article class="cgi-programmierung-page">
		<div class='row  justify-content-center text-center my-4 mx-0'>
			<header class="headerbanner">
				<div class='col'>
					<h1 class="title mb-lg-4 text-white">
						CGI Programmierung
					</h1>
					<div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
						<img alt='@isotopp@infosec.exchange image' src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0'
						     style='width: 1.9rem; border-radius: 1rem;'>
						<a href="https://infosec.exchange/@isotopp" class='text-light text-decoration-none'>
							Kristian Köhntopp
						</a>
						
						<span class='d-none d-lg-inline'>-</span>
						<div class='d-block d-lg-inline'>November 27, 1996</div>
						
					</div>
				</div>
				
				<img alt='a featured image' src="/assets/img/background/rijksmuseum.jpg">
				
			</header>
		</div>

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/1996/03/23/lu-ser.html">Lu Ser</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/1997/01/01/kryptographie-toetet.html">Kryptographie tötet - na und?</a>
				</div>
				
			</div>
		</div>

		<div class='row justify-content-center mx-0 mt-3 mb-5'>
			<div class="col-lg-8 mb-3">
				
				<header class="toc bg-light">
					<nav id="TableOfContents">
  <ul>
    <li><a href="#der-apache-www-server">Der Apache WWW-Server</a>
      <ul>
        <li><a href="#apache-übersetzen">Apache übersetzen</a></li>
        <li><a href="#konfigurationsdatei-anpassen">Konfigurationsdatei anpassen</a></li>
        <li><a href="#den-server-übersetzen">Den Server übersetzen</a></li>
        <li><a href="#die-hilfsprogramme-übersetzen">Die Hilfsprogramme übersetzen</a></li>
        <li><a href="#den-server-installieren">Den Server installieren</a></li>
      </ul>
    </li>
    <li><a href="#apache-konfigurieren">Apache konfigurieren</a>
      <ul>
        <li><a href="#aufrufoptionen">Aufrufoptionen</a></li>
        <li><a href="#minimale-konfigurationsdateien">Minimale Konfigurationsdateien</a>
          <ul>
            <li><a href="#confhttpdconf">conf/httpd.conf</a></li>
            <li><a href="#confsrmconf">conf/srm.conf</a></li>
            <li><a href="#confaccessconf">conf/access.conf</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#cgi-programmierung">CGI-Programmierung</a>
      <ul>
        <li><a href="#aktivierung-von-cgi-programmen-durch-apache">Aktivierung von CGI-Programmen durch Apache</a></li>
        <li><a href="#einfache-cgi-programme">Einfache CGI-Programme</a></li>
        <li><a href="#umgebung-von-cgi-programmen">Umgebung von CGI-Programmen</a>
          <ul>
            <li><a href="#standard-variablen">Standard-Variablen</a></li>
            <li><a href="#apache-spezialvariablen">Apache-Spezialvariablen</a></li>
            <li><a href="#zusätzliche-variablen">Zusätzliche Variablen</a></li>
          </ul>
        </li>
        <li><a href="#parameterübergabe-an-cgi-programme">Parameterübergabe an CGI-Programme</a>
          <ul>
            <li><a href="#http-methoden">HTTP-Methoden</a>
              <ul>
                <li><a href="#die-get-methode">Die <code>GET</code>-Methode</a></li>
                <li><a href="#die-post-methode">Die <code>POST</code>-Methode</a></li>
              </ul>
            </li>
            <li><a href="#url-encoding">URL-Encoding</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#formulare-mit-html">Formulare mit HTML</a>
      <ul>
        <li><a href="#der-form-tag">Der <code>&lt;FORM&gt;</code>-Tag</a></li>
        <li><a href="#der-input-tag">Der <code>&lt;INPUT&gt;</code>-Tag</a>
          <ul>
            <li><a href="#text--und-paßwortfelder">Text- und Paßwortfelder</a></li>
            <li><a href="#check--und-radioboxes">Check- und Radioboxes</a></li>
            <li><a href="#versteckte-eingabefelder">Versteckte Eingabefelder</a></li>
            <li><a href="#dateiupload">Dateiupload</a></li>
            <li><a href="#absenden-und-rücksetzen">Absenden und Rücksetzen</a></li>
          </ul>
        </li>
        <li><a href="#der-textarea-tag">Der <code>&lt;TEXTAREA&gt;</code>-Tag</a></li>
        <li><a href="#der-select-tag">Der <code>&lt;SELECT&gt;</code>-Tag</a></li>
      </ul>
    </li>
    <li><a href="#perl">Perl</a>
      <ul>
        <li><a href="#einfache-perl-programme">Einfache Perl-Programme</a></li>
        <li><a href="#benutzereingaben-lesen">Benutzereingaben lesen</a></li>
        <li><a href="#variablen-und-konstanten">Variablen und Konstanten</a>
          <ul>
            <li><a href="#notation-von-skalaren">Notation von Skalaren</a></li>
            <li><a href="#operationen-mit-skalaren">Operationen mit Skalaren</a></li>
            <li><a href="#arrays">Arrays</a></li>
            <li><a href="#operationen-mit-arrays">Operationen mit Arrays</a></li>
          </ul>
        </li>
        <li><a href="#kontrollstrukturen">Kontrollstrukturen</a></li>
        <li><a href="#assoziative-arrays">Assoziative Arrays</a></li>
        <li><a href="#eingabe-und-ausgabe">Eingabe und Ausgabe</a>
          <ul>
            <li><a href="#standardeingabe">Standardeingabe</a></li>
            <li><a href="#argv-und-env"><code>@ARGV</code> und <code>%ENV</code></a></li>
            <li><a href="#printf"><code>printf</code></a></li>
          </ul>
        </li>
        <li><a href="#reguläre-ausdrücke">Reguläre Ausdrücke</a>
          <ul>
            <li><a href="#split-und-join"><code>split()</code> und <code>join()</code></a></li>
          </ul>
        </li>
        <li><a href="#funktionen">Funktionen</a></li>
      </ul>
    </li>
    <li><a href="#cgi-programme-in-perl">CGI-Programme in Perl</a>
      <ul>
        <li><a href="#cgi-libpl-und-testcgipl"><code>cgi-lib.pl</code> und <code>testcgi.pl</code></a></li>
        <li><a href="#ein-einfacher-zähler">Ein einfacher Zähler</a></li>
      </ul>
    </li>
  </ul>
</nav>
				</header>
				
			</div>
			<div class='col-lg-8'>
				<h1 id="der-apache-www-server">
    <a href="#der-apache-www-server">
	Der Apache WWW-Server
    </a>
</h1>
<p>Der Apache WWW-Server ist ein Server der zweiten Generation.
Das bedeutet, er entstand auf der Grundlage der Erfahrungen, die beim Betrieb von WWW-Servern unter sehr hoher Last gemacht wurden,
und er bietet erweiterte Möglichkeiten zur dynamischen Erzeugung von Seiten über CGI (<em>Common Gateway Interface</em>) und
über eine servereigene Programmierschnittstelle (<em>Server API</em>).</p>
<p>Der Server selbst ist auf praktisch jeder modernen UNIX-Plattform einsetzbar,
und Portierungen auf Windows NT und OS/2 sind ebenfalls verfügbar.</p>
<h2 id="apache-übersetzen">
    <a href="#apache-%c3%bcbersetzen">
	Apache übersetzen
    </a>
</h2>
<p>Wie es sich für ein frei verfügbares UNIX-Programm gehört, ist der Server in Quelltextform erhältlich.
Zusätzlich werden auf <a href="http://www.apache.org/" target="_blank" rel="noopener">http://www.apache.org/</a>

 auch Binärversionen
für die verbreitesten UNIX-Versionen bereitgestellt.
Ist die eigene UNIX-Version nicht unter diesen zu finden oder möchte man den Server mit experimentellen Optionen  betreiben,
muss man ihn sich selbst übersetzen.
Zum Glück ist das nicht sehr schwierig.</p>
<p>Apache kommt, wie üblich, als mit <code>gzip</code> gepacktes
<code>tar</code>-Archiv. Nach dem Auspacken mit</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">/tmp$ gzip -dc apache*tar.gz | tar xvf -
</span></span></span></code></pre></div><p>entsteht ein Verzeichnis mit dem Namen <code>apache_x.y.z</code>, wobei <code>x.y.z</code> die Versionsnummer des Servers angibt.
Es enthält die folgenden Unterverzeichnisse:</p>
<dl>
<dt>cgi-bin</dt>
<dd>Dieses Verzeichnis enthält einen Satz Beispielprogramme zur CGI-Programmierung in Form von Scriptdateien.</dd>
<dt>cgi-src</dt>
<dd>Dieses Verzeichnis enthält weitere Beispielprogramme zur CGI-Programmierung, die in C geschrieben wurden.
Diese Programme müssen zunächst compiliert werden, bevor sie im Verzeichnis <code>cgi-bin</code> installiert werden können.</dd>
<dt>conf</dt>
<dd>Dieses Verzeichnis enthält Beispiel-Konfigurationsdateien.
Die Namen dieser Konfigurationsdateien enden auf <code>-dist</code>.
Zum Gebrauch muss die jeweilige Konfigurationsdatei kopiert und unbedingt für den lokalen Bedarf angepasst werden.</dd>
<dt>icons</dt>
<dd>Die eingebaute Apache-Funktion zur Anzeige von Verzeichnissen kann Dateien mit dateitypspezifischen Icons anzeigen.
Dieses Verzeichnis enthält einen Satz Beispiel-Icons, die vom Server dazu verwendet werden.</dd>
<dt>logs</dt>
<dd>Dieses Verzeichnis ist zunächst leer.
Der Server wird später im Betrieb seine Logbücher hier ablegen.
Diese Logbücher können je nach Serverauslastung sehr umfangreich werden.</dd>
<dt>src</dt>
<dd>Dieses Verzeichnis enthält den C-Quelltext des Servers.
Es wird für den Betrieb nicht benötigt.</dd>
<dt>support</dt>
<dd>Dieses Verzeichnis enthält weitere C-Quelltexte zu Hilfsprogrammen für den Serverbetrieb.
Sie müssen compiliert werden, wenn man Eigenschaften des Servers für Fortgeschrittene nutzen möchte:
Benutzeridentifikation mit Paßworten,
DBM-Benutzerdatenbanken für sehr große Benutzerzahlen und verschiedene andere.</dd>
</dl>
<h2 id="konfigurationsdatei-anpassen">
    <a href="#konfigurationsdatei-anpassen">
	Konfigurationsdatei anpassen
    </a>
</h2>
<p>Im <code>src</code>-Verzeichnis befindet sich die Datei <code>Configuration</code>.
Dies ist die einzige Datei, die angepasst werden muss,
um den Apache-Server für eine unterstützte Plattform zu übersetzen.
In dieser Datei ist auch einzustellen, welche Module in den Server eingebunden werden
sollen.</p>
<p>Folgende Einstellungen sind mit einem Texteditor an dieser Datei
vorzunehmen:</p>
<dl>
<dt><code>CC=</code></dt>
<dd>Wahl des C-Compilers.
Der Server kann entweder mit dem normalen Systemcompiler <code>cc</code> oder mit dem GNU-C-Compiler <code>gcc</code> übersetzt werden,
wenn dieser auf dem System vorhanden ist.</dd>
<dt><code>CFLAGS=</code></dt>
<dd>Optionen für den Aufruf des C-Compilers.
Mit dieser Variable können die Optionen für den Lauf des Compilers festgelegt werden.
<p>Normalerweise wird man hier den Optimierungslevel des Compilers angeben, also beispielsweise <code>-O2</code>.
Für den späteren Betrieb des Servers mit <em>Server Side Includes</em> kann hier die Option <code>-DXBITHACK</code> mit  angegeben werden.
Für schnelleren Betrieb auf Kosten der Lesbarkeit von Logfiles kann hier die Option <code>-DMINIMAL_DNS</code> mit angegeben werden.
Die Option <code>-DMAXIMAL_DNS</code> führt dagegen für alle Clients eine doppelte Abfrage des Nameservers durch,
was Fälschungen von Hostnamen erschwert, aber sehr langsam ist.</p>
<p>Für den normalen Betrieb sollten diese Optionen zunächst einmal weggelassen werden.
Sie sind nicht unmittelbar notwendig und haben Nebeneffekte, die verstanden sein müssen, bevor die Optionen sinnvoll einsetzbar sind.</p>
</dd>
<dt><code>LFLAGS=</code></dt>
<dd>Optionen für den Aufruf des Linkers.
Mit dieser Variable können die Optionen für den Lauf des Linkers festgelegt werden.
Normalerweise ist diese Variable leer.</dd>
<dt><code>EXTRA_LIBS=</code></dt>
<dd>Optionen für das Linken zusätzlicher Bibliotheken.
Mit dieser Variable können zusätzliche Bibliotheken zum Linken des Programmes angegeben werden.
Normalerweise ist diese Variable leer.</dd>
<dt><code>AUX_*=</code></dt>
<dd>Betriebssystemspezifische Optionen und Bibliotheken.
Diese Variablen stehen in Blöcken nach Betriebssystemen sortiert beisammen.
Sie legen fest, für welche Betriebssystemversion der Server übersetzt werden soll.
Im Auslieferungszustand ist der Server für SunOS 4 konfiguriert.
Diese Einstellung <strong>muss</strong> für das Zielbetriebssystem angepaßt werden.
Dazu ist die Zeile für SunOS 4 zu deaktivieren und die Zeile für das gewünschte Betriebssystem zu aktivieren.
Um den Apache-Quelltext zum Beispiel für die Übersetzung auf Solaris 2 zu konfigurieren,
muss der Block</dd>
</dl>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-make" data-lang="make"><span class="line"><span class="cl"><span class="c"># For SunOS 4
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nv">AUX_CFLAGS</span><span class="o">=</span> -DSUNOS4
</span></span><span class="line"><span class="cl"><span class="c"># For Solaris 2.
</span></span></span><span class="line"><span class="cl"><span class="c">#AUX_CFLAGS= -DSOLARIS2
</span></span></span><span class="line"><span class="cl"><span class="c">#AUX_LIBS= -lsocket -lnsl
</span></span></span></code></pre></div><p>folgendermaßen geändert werden:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-make" data-lang="make"><span class="line"><span class="cl"><span class="c"># For SunOS 4
</span></span></span><span class="line"><span class="cl"><span class="c">#AUX_CFLAGS= -DSUNOS4
</span></span></span><span class="line"><span class="cl"><span class="c"># For Solaris 2.
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nv">AUX_CFLAGS</span><span class="o">=</span> -DSOLARIS2
</span></span><span class="line"><span class="cl"><span class="nv">AUX_LIBS</span><span class="o">=</span> -lsocket -lnsl
</span></span></code></pre></div><p>Weiter unten in der Konfigurationsdatei befindet sich der Abschnitt zur Konfiguration der Module,
aus denen der Server zusammengesetzt wird.
Die Einstellungen in diesem Bereich sind in der Regel für den Normalbetrieb korrekt und brauchen nicht  verändert zu werden.
Die Kommentare in diesem Abschnitt der Konfigurationsdatei geben weitere Hinweise.</p>
<h2 id="den-server-übersetzen">
    <a href="#den-server-%c3%bcbersetzen">
	Den Server übersetzen
    </a>
</h2>
<p>Nachdem die Konfigurationdatei angepasst ist, müssen die Informationen aus dieser Datei in den C-Quelltext des Programmes eingearbeitet werden.
Dies geschieht automatisch durch den Aufruf des Scriptes <code>Configure</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">/tmp/apache_1.0.3/src$ ./Configure
</span></span></span><span class="line"><span class="cl"><span class="go">Using &#39;Configuration&#39; as config file
</span></span></span></code></pre></div><p>Danach kann der Server übersetzt werden.
Der Übersetzungsprozeß wird durch das UNIX-Werkzeug <code>make</code> automatisch gesteuert.
Es genügt, im <code>src</code>-Verzeichnis <code>make</code> aufzurufen:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">/tmp/apache_1.0.3/src$ make
</span></span></span><span class="line"><span class="cl"><span class="go">gcc -c -O2 -DLINUX alloc.c
</span></span></span><span class="line"><span class="cl"><span class="go">...
</span></span></span></code></pre></div><p>Nach erfolgreichem Abschluss des Übersetzungsvorgangs wird im <code>src</code>-Verzeichnis eine Datei <code>httpd</code> hinterlassen,
die ausführbar ist und mit dem <code>file</code>-Kommando als Programm identifiziert wird.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">/tmp/apache_1.0.3/src$ ls -l ./httpd
</span></span></span><span class="line"><span class="cl"><span class="go">-rwxr-xr-x   1 root     root        82260 Nov  4 10:42 ./httpd
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">/tmp/apache_1.0.3/src$ file ./httpd
</span></span></span><span class="line"><span class="cl"><span class="go">./httpd: ELF 32-bit LSB executable i386 (386 and up) Version 1
</span></span></span></code></pre></div><h2 id="die-hilfsprogramme-übersetzen">
    <a href="#die-hilfsprogramme-%c3%bcbersetzen">
	Die Hilfsprogramme übersetzen
    </a>
</h2>
<p>Für den einfachen Serverbetrieb genügt es, das Serverprogramm <code>httpd</code> zur Verfügung zu haben.
Für den fortgeschrittenen Betrieb ist es jedoch nützlich,
auch die optionalen Hilfsprogramme in den Verzeichnissen <code>cgi-src</code> und <code>support</code> zu übersetzen und zu installieren.
Zum Glück sind diese Programme kaum systemspezifisch und können mit einem einfachen Aufruf von <code>make</code> in den betreffenden Verzeichnissen übersetzt werden:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">/tmp/apache_1.0.3/cgi-src$ make
</span></span></span><span class="line"><span class="cl"><span class="go">gcc -c -g query.c
</span></span></span><span class="line"><span class="cl"><span class="go">...
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">/tmp/apache_1.0.3/cgi-src$ cd ../support/
</span></span></span><span class="line"><span class="cl"><span class="go">/tmp/apache_1.0.3/support$ make
</span></span></span><span class="line"><span class="cl"><span class="go">gcc -g htpasswd.c -o htpasswd 
</span></span></span><span class="line"><span class="cl"><span class="go">...
</span></span></span></code></pre></div><p>Eventuell bei der Übersetzung auftretende Warnungen sind normal und können ignoriert werden.</p>
<h2 id="den-server-installieren">
    <a href="#den-server-installieren">
	Den Server installieren
    </a>
</h2>
<p>Neben dem eigentlichen Serverprogramm <code>httpd</code> werden zum Betrieb des Servers noch verschiedene zusätzliche
Verzeichnisse benötigt.
Alle diese Dateien und Verzeichnisse sollen in einem gemeinsamen Sammelverzeichnis installiert werden,
das in der Terminologie von Apache als <code>ServerRoot</code> bezeichnet wird.
Viele Serverbetreiber wählen als <code>ServerRoot</code> das Verzeichnis <code>/var/httpd</code>.
Dieser Text geht ebenfalls davon aus, daß mit dieser <code>ServerRoot</code> installiert wird.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">var
</span></span></span><span class="line"><span class="cl"><span class="go">`-- httpd
</span></span></span><span class="line"><span class="cl"><span class="go">    |-- cgi-bin
</span></span></span><span class="line"><span class="cl"><span class="go">    |-- conf
</span></span></span><span class="line"><span class="cl"><span class="go">    |-- icons
</span></span></span><span class="line"><span class="cl"><span class="go">    `-- logs            
</span></span></span></code></pre></div><p><em>Verzeichnisstruktur ServerRoot: <code>/var/httpd</code> und die Unterverzeichnisse</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">home
</span></span></span><span class="line"><span class="cl"><span class="go">`-- www
</span></span></span><span class="line"><span class="cl"><span class="go">    |-- icons
</span></span></span><span class="line"><span class="cl"><span class="go">    |-- pd-software
</span></span></span><span class="line"><span class="cl"><span class="go">    `-- texte
</span></span></span></code></pre></div><p><em>Verzeichnisstruktur DocumentRoot: <code>/home/www</code> und die Unterverzeichnisse</em></p>
<p>Außerdem wird der Server in Zukunft auf einen weiteren Verzeichnisbaum zugreifen, der die HTML-Dokumente enthält,
die geservt werden sollen.
Diese zweite Verzeichnishierarchie wird als <em>DocumentRoot</em> bezeichnet.
Im Gegensatz zur ServerRoot ist die Verzeichnisstruktur der DocumentRoot selbst vollkommen frei  wählbar.
Die in der Abbildung gegebene Aufteilung ist nur ein Beispiel.</p>
<p>Beide Verzeichnishierarchien sind unterschiedlich und sollen sich nicht überlappen.
Auf gar keinen Fall sollte die <code>ServerRoot</code> unterhalb der <code>DocumentRoot</code> liegen,
denn sonst könnte man über den WWW-Server auf seine Konfigurationsdateien und Passworte zugreifen,
und das ist eine ausgesprochen schlechte Idee.
Auch andersherum sollte die <code>DocumentRoot</code> nicht unterhalb der <code>ServerRoot</code> liegen, obwohl das nicht unmittelbar schädlich ist.
Viele Serverbetreiber wählen als DocumentRoot das Verzeichnis <code>/home/www</code>, und das ist auch das Verzeichnis, das in diesem Text verwendet wird.</p>
<p>Zur Installation ist es notwendig, die Verzeichnisse für die ServerRoot und die DocumentRoot anzulegen und ihnen die  notwendigen Rechte zu geben.
Zunächst wird das ServerRoot-Verzeichnis angelegt und der Server selber in ihm installiert:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">/var# mkdir httpd
</span></span></span><span class="line"><span class="cl"><span class="go">/var# chown root.root httpd
</span></span></span><span class="line"><span class="cl"><span class="go">/var# chmod 755 httpd
</span></span></span><span class="line"><span class="cl"><span class="go">/var# cp /tmp/apache_1.0.3/src/httpd httpd/httpd
</span></span></span><span class="line"><span class="cl"><span class="go">/var# chown root.root httpd/httpd
</span></span></span><span class="line"><span class="cl"><span class="go">/var# chmod 111 httpd/httpd
</span></span></span></code></pre></div><p>Danach müssen die vorgefertigten Dateien aus den Verzeichnissen <code>cgi-bin</code>, <code>conf</code> und <code>icons</code> übernommen werden.</p>
<pre tabindex="0"><code class="language-comsole" data-lang="comsole">/var# cd httpd
/var/httpd# mkdir cgi-bin conf icons logs support
/var/httpd# chown root.root cgi-bin conf icons logs support
/var/httpd# chmod 755 cgi-bin conf icons logs support
/var/httpd# cp /tmp/apache_1.0.3/cgi-bin/* cgi-bin/
/var/httpd# cp /tmp/apache_1.0.3/icons/* icons/
/var/httpd# cp /tmp/apache_1.0.3/conf/* conf/
/var/httpd# cp /tmp/apache_1.0.3/support/htpasswd support/
/var/httpd# cp /tmp/apache_1.0.3/support/httpd_monitor support/
/var/httpd# cp /tmp/apache_1.0.3/support/unescape support/&lt;/small&gt;
</code></pre><p>Schließlich muss auch die <code>DocumentRoot</code> noch angelegt werden.
Dokumente auf dem WWW-Server sollen unter Umständen auch durch normale Benutzer erzeugt werden dürfen.
Es ist also sinnvoll, eine Benutzergruppe <code>webmaster</code> anzulegen und dieser Benutzergruppe Schreibrechte an der DocumentRoot zu geben.
Dies ist recht einfach auf die folgende Weise möglich:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">/home# echo &#34;webmaster::60001:&#34; &gt;&gt; /etc/group
</span></span></span><span class="line"><span class="cl"><span class="go">/home# mkdir www
</span></span></span><span class="line"><span class="cl"><span class="go">/home# chown kris.webmaster www
</span></span></span><span class="line"><span class="cl"><span class="go">/home# chmod 775 www
</span></span></span></code></pre></div><p>Unterhalb dieses Verzeichnisses kann dann die benötigte Dokumentenstruktur nach Bedarf durch beliebige Benutzer der Gruppe <code>webmaster</code> angelegt werden.
Benutzer werden der Benutzergruppe <code>webmaster</code> zugefügt, indem ihre Benutzernamen im vierten (letzten) Feld der entsprechenden Zeile in der Datei <code>/etc/group</code> eingetragen werden.
Die betreffenden Benutzer müssen sich neu einloggen, damit die Änderung wirksam wird.</p>
<h1 id="apache-konfigurieren">
    <a href="#apache-konfigurieren">
	Apache konfigurieren
    </a>
</h1>
<p>Dieser Abschnitt beschreibt die Konfiguration des WWW-Servers gerade weit genug, um den Server in Betrieb nehmen zu können.
Eine vollständige Beschreibung der Apache-Konfiguration befindet sich im Apache Referenzhandbuch (<code>manual.ps</code>), das Bestandteil der Serverdistribution ist.</p>
<h2 id="aufrufoptionen">
    <a href="#aufrufoptionen">
	Aufrufoptionen
    </a>
</h2>
<p>Der Apache WWW-Server versteht nur wenige Aufrufoptionen.
Die eigentliche Konfiguration des Servers erfolgt über Konfigurationsdateien,
und die Aufrufoptionen des Servers beschränken sich darauf, dem Server mitzuteilen, wo sich diese  Konfigurationsdateien befinden.
Die Optionen sind im Einzelnen:</p>
<dl>
<dt><code>-d documentroot</code></dt>
<dd>Setzt den ursprünglichen Wert der Variablen <code>DocumentRoot</code> auf <code>documentroot</code>.
Dies kann in der Konfigurationsdatei mit dem Kommando <code>DocumentRoot</code> überschrieben werden.
Der Defaultwert ist <code>/usr/local/etc/httpd</code>.</dd>
<dt><code>-f config</code></dt>
<dd>Führt die Kommandos in der Datei <em>config</em> beim Start des Servers aus.
Wenn <em>config</em> nicht mit einem <code>/</code> beginnt, wird der Pfadname relativ zur ServerRoot interpretiert.
Der Defaultwert ist <code>conf/httpd.conf</code>.</dd>
<dt><code>-X</code></dt>
<dd>Der Server wird im Debugmodus gestartet.
Er erzeugt keine Kindprozesse und löst sich auch nicht von der Console, um in den Hintergrundmodus zu gehen.</dd>
<dt><code>-v</code></dt>
<dd>Druckt die Versionsnummer des <code>httpd</code> und beendet sich dann.</dd>
<dt><code>-?</code></dt>
<dd>Druckt eine Liste der Optionen des Servers und beendet sich dann.</dd>
</dl>
<p>Um den Server zu starten, ist es also notwendig, die benötigten Konfigurationdateien zu erzeugen.
Der Server kann dann entweder mit dem Kommando</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">~# /var/httpd/httpd -f /var/httpd/conf/httpd.conf
</span></span></span></code></pre></div><p>oder mit dem Kommando</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">~# /var/httpd/httpd -d /var/httpd
</span></span></span></code></pre></div><p>aktiviert werden.</p>
<h2 id="minimale-konfigurationsdateien">
    <a href="#minimale-konfigurationsdateien">
	Minimale Konfigurationsdateien
    </a>
</h2>
<p>Der Server liest beim Start drei Konfigurationsdateien ein.
Jede dieser Dateien kann Schlüsselworte enthalten, die die Werte bestimmter Variablen festlegen und so den Betrieb des Servers steuern.
Die Pfadnamen dieser Dateien werden wie üblich relativ zur <code>ServerRoot</code> interpretiert, wenn sie nicht mit einem <code>/</code> beginnen.
Standardmäßig sind dies die folgenden Dateien:</p>
<dl>
<dt><code>conf/httpd.conf</code></dt>
<dd>Diese Datei enthält globale Steuerparameter für den
WWW-Server.</dd>
<dt><code>conf/srm.conf</code></dt>
<dd>Diese Datei steuert das &ldquo;Server Ressource Managment&rdquo;.
Das heisst, sie legt fest, welche URLs auf welche Pfade im Dateisystem abgebildet werden,
und ob es sich bei den durch URLs referenzierten Dokumenten um statische Dateien oder um dynamisch erzeugte Dokumente handelt.
Diese Variable kann mit dem Schlüsselwort <code>RessourceConfig</code> überschrieben werden.</dd>
<dt><code>conf/access.conf</code></dt>
<dd>Mit Hilfe dieser Datei können global Zugriffsrechte für bestimmte Verzeichnisse vergeben werden.
Mit dem Schlüsselwort <code>AccessConfig</code> kann eine alternative Konfigurationsdatei bestimmt werden.</dd>
</dl>
<p>Weiterhin legt der Server drei Dateien im Verzeichnis <code>logs/</code> an.
Einige dieser Dateien sind Logbücher, die je nach Serverlast sehr schnell sehr groß werden können.
Es ist notwendig, diese Dateien regelmäßig zu sichern und den Server danach mit einem Signal zu wecken,
damit er neue Logdateien aufsetzt. Die Dateien sind:</p>
<dl>
<dt><code>logs/httpd.pid</code></dt>
<dd>Diese Datei wächst nicht und braucht auch nicht gesichert zu werden.
Sie enthält in ASCII die PID des Serverprozesses.
Dadurch ist es leicht möglich, den Server mit dem Kommando</dd>
</dl>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">~# kill -HUP `cat /var/httpd/logs/httpd.pid`
</span></span></span></code></pre></div><p>zu wecken.
Der Hauptprozeß des Servers wird alle seine Kindprozesse von der Änderung informieren,
so daß ein einziges Signal zur Steuerung des Servers ausreichend ist.</p>
<p>Mit dem Schlüsselwort <code>PidFile</code> ist es möglich, diesen Pfadnamen zu ändern.</p>
<dl>
<dt><code>logs/error_log</code></dt>
<dd>In dieser ständig wachsenden Datei werden alle Fehler beim Zugriff auf Komponenten des Servers mitgeloggt.
Insbesondere finden sich hier auch die Fehlerausgaben von CGI-Scripten.
Sollten solche Scripte also einmal nicht funktionieren, kann man dieser Datei die dabei entstehenden Meldungen entnehmen.
<p>Mit dem Schlüsselwort <code>ErrorLog</code> kann eine andere Logdatei festgelegt werden.
Für virtuelle Hosts können unterschiedliche Logdateien bestimmt werden.</p>
</dd>
<dt><code>logs/access_log</code></dt>
<dd>In dieser sehr schnell wachsenden Datei wird jeder Zugriff auf den Server geloggt.
Es ist möglich, diese Datei zur Erzeugung von Zugriffstatistiken auszuwerten.
<p>Mit dem Schlüsselwort <code>TransferLog</code> kann ein anderer Dateiname festgelegt werden.
Für virtuelle Hosts können unterschiedliche Logdateien bestimmt werden.</p>
</dd>
</dl>
<p>Um den Server zu konfigurieren, kopiert man sich zweckmäßigerweise die mitgelieferten Beispiel-Konfigurationsdateien
und paßt sie für die eigene Konfiguration an:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">/var/httpd/conf# cp access.conf-dist access.conf
</span></span></span><span class="line"><span class="cl"><span class="go">/var/httpd/conf# cp httpd.conf-dist httpd.conf
</span></span></span><span class="line"><span class="cl"><span class="go">/var/httpd/conf# cp srm.conf-dist srm.conf
</span></span></span></code></pre></div><h3 id="confhttpdconf">
    <a href="#confhttpdconf">
	conf/httpd.conf
    </a>
</h3>
<p>Die mit dem Server ausgelieferte beispielhafte Konfigurationsdatei <code>conf/httpd.conf</code> enthält eine Reihe von Schlüsselworten zur Konfiguration des WWW-Servers.
Im Einzelnen:</p>
<dl>
<dt><code>Port</code></dt>
<dd>Dieses Schlüsselwort legt fest, auf welchem TCP-Port der Server seine Dienste anbieten soll.
In UNIX sind die Ports mit Portnummern kleiner 1024 geschützt und nur Programmen mit Systemverwaltungsrechten zugänglich.
Der Server muss also vom Systemverwalter gestartet werden, wenn er auf dem HTTP-Standardport 80 serven soll.
<p>Für Server, die mit Benutzerrechten gestartet werden, hat es sich eingebürgert, den frei verfügbaren Port 8080 zu verwenden.
Die Konfigurationsdatei enthält dann eine Anweisung der Art <code>Port 8080</code>.</p>
</dd>
<dt><code>User</code> und <code>Group</code></dt>
<dd>Wenn der Server durch einen Systemverwalter gestartet wird, verwendet er die Systemverwalterrechte nur,
um sich an den angegebenen Port zu binden.
Alle anderen Dinge, insbesondere den Zugriff auf Dateien und das Starten von externen Programmen,
erledigt der Server nicht unter dieser Benutzerkennung, um böse Überraschungen zu vermeiden.
<p>Mit den Anweisungen <code>User</code> und <code>Group</code> wird der Server stattdessen auf eine Benutzer- und Gruppennummer konfiguriert,
die ungefährlicher ist.
Die Angabe dieser Werte kann numerisch in der Form <code>#zahl</code> erfolgen, oder der Name eines Benutzers oder einer Benutzergruppe kann direkt gegeben werden.
Beispiel:</p>
</dd>
</dl>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">User nobody
</span></span></span><span class="line"><span class="cl"><span class="go">Group #60001
</span></span></span></code></pre></div><dl>
<dt><code>ServerAdmin</code></dt>
<dd>Dieses Schlüsselwort teilt dem Server die Mailadresse der
für die Serververwaltung zuständigen Person mit. Der
Server nennt diese Adresse in Fehlermeldungen als Adresse eines
Ansprechpartners. Zukünftige Versionen des Servers werden
selbstständig Problemreports an diese Adresse senden.</dd>
<dt><code>ServerRoot</code></dt>
<dd>Legt das ServerRoot-Verzeichnis fest. In unserer
Beispielkonfiguration geschähe dies mit der Anweisung
<code>ServerRoot /var/httpd</code>.</dd>
<dt><code>PidFile</code></dt>
<dt><code>ErrorLog</code></dt>
<dt><code>TransferLog</code></dt>
<dd>Diese drei Schlüsselworte bestimmen, wie bereits im
Abschnitt oben beschrieben, die Lage der verschiedenen Logdateien.</dd>
<dt><code>ServerName</code></dt>
<dd>Ein Webserver muss gelegentlich wissen, unter welchem kanonischen Namen er selbst anzusprechen ist.
Apache versucht, dieses Namen automatisch zu ermitteln, aber wenn dies nicht gelingt
oder wenn man sicher gehen will, ist es notwendig, dem Server
seinen eigenen Namen in der Konfigurationsdatei mitzuteilen. Das
erfolgt dann mit diesem Schlüsselwort. Der Parameter ist ein
voll qualifizierter Domainname, zum Beispiel in <code>ServerName white.koehntopp.de</code></dd>
</dl>
<h3 id="confsrmconf">
    <a href="#confsrmconf">
	conf/srm.conf
    </a>
</h3>
<p>Mit dieser Konfiguration legt der Serverbetreiber fest, wie der
Server die verschiedenen Dokumententypen behandeln soll, die auf
seinem Server verfügbar sind. Diese Datei definiert also die
Zuordnung von Dateiendungen zu MIME-Typen, die Namen von
Indexdateien für Verzeichnisse und den Umgang mit
Landessprachen und dergleichen.</p>
<p>Minimal sollte die Datei die folgenden Anweisungen
enthalten:</p>
<dl>
<dt><code>DocumentRoot</code></dt>
<dd>Dieses Schlüsselwort legt die <code>DocumentRoot</code> des Servers
fest. In unserer Beispielkonfiguration ist das: <code>DocumentRoot /home/www</code>.</dd>
<dt><code>ScriptAlias</code></dt>
<dd>Dieses Schlüsselwort ist nur dann notwendig, wenn der Server in der Lage sein soll, CGI-Scripte zur dynamischen Erzeugung
von Seiten auszuführen.
Die Anweisung hat die Form</dd>
</dl>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">ScriptAlias &lt;url-pfad&gt; &lt;realer Pfad&gt;
</span></span></span></code></pre></div><p>und sie verbindet den Pfad <code>url-pfad</code> mit dem
wirklichen Pfad <code>realer Pfad</code>, d.h. immer dann, wenn ein
Request für eine Seite unterhalb von <code>url-pfad</code> auf dem
Server eingeht, wird das zugehörige Programm in <code>realer Pfad</code> gestartet und muss die angeforderte Seite
berechnen.</p>
<p>Um das CGI-Verzeichnis <code>/var/httpd/cgi-bin</code> mit dem URL-Pfad <code>/cgi-bin</code> zu verbinden, muss also die Anweisung</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">ScriptAlias /cgi-bin/ /var/httpd/cgi-bin/
</span></span></span></code></pre></div><p>gegeben werden. Ein Request für die URL <code>/cgi-bin/dummy.pl</code> startet dann das Programm
<code>/var/httpd/cgi-bin/dummy.pl</code>, das eine Seite erzeugen muss.</p>
<p>Es ist wichtig, daß das Verzeichnis mit den CGI-Programmen <strong>nicht</strong> unterhalb der <code>DocumentRoot</code> liegt.
Überlappen sich die Verzeichnisse, kann es zu seltsamen Effekten kommen,
weil der Server sich entscheiden muss, ob er das Script als Text ausliefert,
oder ob er es startet und die Ausgabe des Scriptes ausliefert.</p>
<p>Die beispielhafte <code>srm.conf</code> enthält weitere Anweisungen, die hier zunächst nicht behandelt werden sollen.</p>
<h3 id="confaccessconf">
    <a href="#confaccessconf">
	conf/access.conf
    </a>
</h3>
<p>Die Konfigurationsdatei <code>conf/access.conf</code> regelt, wer
auf welche Dateien des Servers zugreifen darf. Es ist möglich,
einzelne Dateien oder ganze Teilbäume in der Verbreitung zu
beschränken, so daß man nur von bestimmten Rechnern aus
auf die Dateien zugreifen darf oder daß man sich als Benutzer
zunächst mit einem Passwort gegenüber dem Server
identifizieren muss, bevor man auf Seiten zugreifen kann. Auch
Kombinationen von Schutzmechanismen sind möglich.</p>
<p>Da sich die Konfigurationsanweisungen in dieser Datei immer auf
Verzeichnisse beziehen, ist ihr Inhalt konsequent in</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;directory /pfad/*/name&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">...
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;/directory&gt;
</span></span></span></code></pre></div><p>gegliedert. Dabei ist zu beachten, daß die <code>&lt;directory&gt;</code>-Anweisungen vielleicht wie HTML-Tags
aussehen, aber keine sind. Sie müssen auf jeden Fall einzeln
in einer Zeile stehen und dürfen auch keine optionalen
Parameter wie HTML-Attribute haben. Die Pfade, die in <code>&lt;directory&gt;</code>-Anweisungen genannt werden, sind immer
physikalische Pfade des Dateisystems und keine URL-Pfade.</p>
<p>Innerhalb eines <code>&lt;directory&gt;</code>-Abschnittes
können dann mit verschiedenen Anweisungen Optionen und
Zugriffsrechte für die in diesem Abschnitt spezifizierten
Verzeichnisse festgelegt werden.</p>
<p>Unsere Beispielkonfiguration soll ohne weitere Erklärungen
zunächst einmal die folgenden Anweisungen enthalten:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;Directory /var/httpd/cgi-bin&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">  Options Indexes FollowSymLinks
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;/Directory&gt;
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">&lt;Directory /home/www&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">  Options Indexes
</span></span></span><span class="line"><span class="cl"><span class="go">  AllowOverride None
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;/Directory&gt;
</span></span></span></code></pre></div><h1 id="cgi-programmierung">
    <a href="#cgi-programmierung">
	CGI-Programmierung
    </a>
</h1>
<p>Oftmals möchte man HTML-Seiten mit dynamisch erzeugtem
Inhalt haben. Solche Seiten sind nicht fest in Verzeichnissen des
Servers abgelegt, sondern werden beim Abruf durch ein Programm
erzeugt. Das erzeugende Programm muss vom Server auf eine
bestimmte Weise aufgerufen werden, damit es weiß, welche Art
von Seite es erzeugen soll und es muss seine Ausgabe auf eine
bestimmte Weise erzeugen, damit der Server diese Ausgabe als eine
WWW-Seite interpretieren kann. Die Norm, nach der das externe
Programm und der WWW-Server zusammenspielen, wird als das
<em>Common Gateway Interface</em> (<em>CGI</em>) bezeichnet.</p>
<h2 id="aktivierung-von-cgi-programmen-durch-apache">
    <a href="#aktivierung-von-cgi-programmen-durch-apache">
	Aktivierung von CGI-Programmen durch Apache
    </a>
</h2>
<p>Grundsätzlich kennt der Apache WWW-Server vier verschiedene
Möglichkeiten, externe Programme zur Erzeugung von WWW-Seiten
einzusetzen:</p>
<dl>
<dt>CGI-Pfade mit <code>ScriptAlias</code></dt>
<dd>Apache sieht wie alle ernstzunehmenden WWW-Server
Möglichkeiten vor, mit denen man URL-Pfade mit
Scriptverzeichnissen verbinden kann. In Apache geschieht dies, wie
weiter oben
beschrieben, mit der Anweisung <code>ScriptAlias</code>.
<p>Zugriffe auf Seiten unterhalb der durch den <code>ScriptAlias</code>
spezifizierten URL bewirken, daß das angegebene Programm
gestartet wird und die Seite berechnet.</p>
</dd>
<dt>Programme mit der Endung <code>.cgi</code></dt>
<dd>Anstatt CGI-Scripte in bestimmten Verzeichnissen
unterzubringen, kann Apache solche Scripte auch an einer bestimmten
Endung erkennen, unabhängig davon, in welchem Verzeichnis sie
sich befinden. Standardmäßig verwendet man für
solche Scripte die Endung <code>.cgi</code>, aber es kann auch jede
beliebige andere noch nicht vergebene Dateiendung konfiguriert
werden.
<p>Verantwortlich für den Start von Scripten mit der Endung
<code>.cgi</code> ist das Apache-Modul <code>mod_cgi</code>. Es bewirkt,
daß alle Dateien, die über die Erkennung von
Dateiendungen mit dem MIME-Type <code>application/x-httpd-cgi</code>
gekennzeichnet werden, nicht als statische Texte ausgeliefert
werden. Der Server versucht stattdessen die Datei als Programm zu
starten und liefert die Ausgabe des Programms an den Abrufer
zurück. Mit der Anweisung</p>
</dd>
</dl>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">AddType application/x-httpd-cgi .cgi
</span></span></span></code></pre></div><p>in der <code>conf/srm.conf</code>-Konfigurationsdatei wird dem
Server mitgeteilt, welche Dateiendungen diesen MIME-Type haben. Im
Beispiel wird die Standardzuordnung definiert, die
<code>.cgi</code>-Dateien als ausführbar markiert, aber es ist
prinzipiell möglich, andere und auch mehrere Dateiendungen zu
CGI-Endungen zu erklären. Bis auf die bequemere Installation
(kein besonderes Verzeichnis notwendig) unterscheidet sich dieses
Verfahren nicht vom Programmstart mit <code>ScriptAlias</code>.</p>
<dl>
<dt>Server Side Includes (SSI)</dt>
<dd>Manchmal möchte man nicht eine ganze WWW-Seite durch ein
Script berechnen lassen, sondern nur einfache Textersetzungen auf
einer Seite vornehmen oder nur Teile einer Seite von einem Script
erzeugen lassen. Solche Seiten sind ein typischer Anwendungsfall
für SSI. SSI-Dateien werden vom Server nicht unmittelbar
ausgeliefert, sondern der Server erwartet in der Datei
HTML-Kommentare. Einige, spezielle Kommentare werden vom Server als
Steueranweisungen interpretiert. Der Server ersetzt in diesem Fall
den gesamten betroffenen Kommentar durch das Ergebnis der
Steueranweisung.
<p>SSI wird durch das Apache-Module <code>mod_include</code> verwaltet.
Es wird vom Server auf alle Dateien mit dem MIME-Type
<code>text/x-server-parsed-html</code> angewendet. Wieder kann man mit der
<code>AddType</code>-Anweisung in der Ressourcenkonfiguration
bestimmten Dateiendungen diesen MIME-Type zuordnen:</p>
</dd>
</dl>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">AddType text/x-server-parsed-html .shtml
</span></span></span></code></pre></div><p>Wie im Beispiel gezeigt, wird standardmäßig die
Dateiendung <code>.shtml</code> verwendet, um Seiten mit SSI zu
markieren. Wenn die Servererweiterung <code>XBITHACK</code> bei der
Übersetzung des Servers aktiviert war und in der
Ressourcenkonfiguration durch die Anweisung</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">XBitHack on
</span></span></span></code></pre></div><p>aktiviert ist, dann werden auch normale <code>.html</code>-Dateien
als SSI-Dateien erkannt, sobald das <code>x</code>-Recht für User
an der betreffenden Datei gesetzt ist.</p>
<p>Falls die Variable auf den Wert <code>full</code> statt auf <code>on</code> gesetzt wird, testet Apache außerdem noch das
<code>x</code>-Recht für Gruppen an der Datei. Ist es gesetzt, wird
ein <code>Last-Modified</code>-Header mit dem Dateidatum erzeugt. Ist
es nicht gesetzt, wird auch kein <code>Last-Modified</code>-Header
erzeugt. Auf diese Weise kann man das Verhalten von Caches und
Proxies auf dem Weg zum Client beeinflussen.</p>
<dl>
<dt>Server Module (AAPI)</dt>
<dd>In besonderes komplizierten Anwendungsfällen oder wenn es
ganz besonders auf Geschwindigkeit ankommt, ist es nicht mehr
ausreichend, den Server durch externe Programme zu erweitern. In
diesem Fall muss die Erweiterung des Servers um weitere
Eigenschaften stattdessen Bestandteil des Servers selbst werden.
<p>Apache ist ein modularer Server, und da er im Quelltext
vorliegt, ist sehr leicht möglich, den Server durch weitere
Module zu erweitern. Module lassen sich besonders leicht
einfügen, wenn sie sich an die vom Server bereitgestellte
Programmierschnittstelle halten, das <em>Apache API</em>. Solche
Module lassen sich außerdem auch mit dem experimentellen
Modul <code>mod_dld</code> zur Laufzeit nachladen und ohne erneute
Übersetzung des Servers einbinden.</p>
<p>Auch andere Server haben Modulschnittstellen, die leider
meistens zueinander inkompatibel sind. Bekannt ist vor allen Dingen
die <em>Netscape Server API</em> zur Programmierung von Modulen
(<em>Plugins</em>) für die Netscape Serverfamilie.</p>
</dd>
</dl>
<h2 id="einfache-cgi-programme">
    <a href="#einfache-cgi-programme">
	Einfache CGI-Programme
    </a>
</h2>
<p>Einfache CGI-Programme werden über einen normalen Link
aktiviert und übernehmen keine Eingabeparameter. Sie
können aber Informationen aus anderen Datenquellen beziehen,
etwa aus den Logbuchdateien des Servers oder aus anderen Dateien
auf dem Serverrechner.</p>
<p>Das folgende Beispiel zeigt
das einfachste CGI-Programm überhaupt. Dieses Programm tut
nichts weiter, als ein Dokument mit dem MIME-Type
<code>text/plain</code> zu erzeugen und dann seine Ablaufumgebung
auszudrucken. Es eignet sich damit ausgezeichnet als
<em>Hello, World!</em>-Programm und dient gleichzeitig zum Erkunden der
Ablaufumgebung für CGI-Programme:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#! /bin/sh --
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Content-Type: text/plain&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Pfad:&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$PATH</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Aktuelles Verzeichnis:&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">pwd</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;UID/GID:&#34;</span>
</span></span><span class="line"><span class="cl">id
</span></span><span class="line"><span class="cl"><span class="nb">echo</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Umgebungsvariablen:&#34;</span>
</span></span><span class="line"><span class="cl">env <span class="p">|</span> sort
</span></span><span class="line"><span class="cl"><span class="nb">echo</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Prozessliste:&#34;</span>
</span></span><span class="line"><span class="cl">ps alxwww
</span></span></code></pre></div><p><em>Dieses einfache CGI-Programm ist das CGI-Äquivalent von &ldquo;Hello, World&rdquo;.
Zusätzlich druckt es noch Informationen über die Ablaufumgebung des Scriptes aus.</em></p>
<p>Das CGI-Programm ist in der Scriptsprache der UNIX-Shell
<code>/bin/sh</code> geschrieben, aber jede andere Programmiersprache ist
ebenso geeignet. CGI-Programme müssen ihre Ausgabe auf der
Standardausgabe liefern und sie müssen der eigentlich
nutzbaren Ausgabe einen Absatz voranstellen, der zwingend den MIME-Typen der Ausgabe festlegt und weitere optionale Angaben
über das erzeugte Dokument enthalten darf. Dieser Absatz
muss durch eine Leerzeile vom nutzbaren Teil der Ausgabe
getrennt sein.</p>
<p>Um das Programm ausprobieren zu können, muss es als
CGI-Programm auf dem Server installiert werden. Das bedeutet:</p>
<p>Entweder muss es als Datei mit einem beliebigen Namen im
<code>cgi-bin</code>-Verzeichnis des Servers installiert werden, oder es
muss als Datei mit der Endung <code>.cgi</code> in einem
Verzeichnis der <code>DocumentRoot</code> installiert werden. In beiden
Fällen muss die Datei als für das Betriebssystem
ausführbar installiert werden, damit der Server das Programm
starten kann.</p>
<p>In unserer Beispielkonfiguration kann das Programm wie folgt
installiert werden:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">/var/httpd# cp /tmp/hello cgi-bin/
</span></span></span><span class="line"><span class="cl"><span class="go">/var/httpd# chmod 755 cgi-bin/hello
</span></span></span></code></pre></div><p>Mit einem Browser kann nun die URL
<code>http://server/cgi-bin/hello</code> abgerufen werden, um das Script zu
starten. Seine Ausgabe ist etwas länglich, aber sehr
informativ: Wir erfahren den Pfadnamen, der vom Server und von
unseren eigenen CGI-Programmen durchsucht wird, um externe
Programme zu starten, und das Script nennt uns das aktuelle
Verzeichnis, in dem unsere CGI-Programme ablaufen. Außerdem
bekommen wir mitgeteilt, mit welchen Benutzerrechten das Script
abläuft und welche Umgebungsvariablen ihm zur Verfügung
stehen. Letztere Information ist besonders aufschlussreich,
denn offenbar definiert das Common Gateway Interface eine ganze
Liste von Umgebungsvariablen, die dem externen Programm vom
WWW-Server zur Verfügung gestellt werden.</p>
<p>Weiter unten sehen wir eine leicht
gekürzte, beispielhafte Ausgabe des Scriptes.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">Pfad:
</span></span></span><span class="line"><span class="cl"><span class="go">/bin:/usr/bin:/usr/local/bin
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">Aktuelles Verzeichnis:
</span></span></span><span class="line"><span class="cl"><span class="go">/var/httpd/cgi-bin
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">UID/GID:
</span></span></span><span class="line"><span class="cl"><span class="go">uid=65534(nobody) gid=65535(nogroup) groups=65535(nogroup)
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">Umgebungsvariablen:
</span></span></span><span class="line"><span class="cl"><span class="go">DOCUMENT_ROOT=/home/www
</span></span></span><span class="line"><span class="cl"><span class="go">GATEWAY_INTERFACE=CGI/1.1
</span></span></span><span class="line"><span class="cl"><span class="go">HOSTTYPE=i386
</span></span></span><span class="line"><span class="cl"><span class="go">HTTP_ACCEPT=image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, 
</span></span></span><span class="line"><span class="cl"><span class="go">    image/png, image/tiff, multipart/x-mixed-replace, */*
</span></span></span><span class="line"><span class="cl"><span class="go">HTTP_ACCEPT_LANGUAGE=de, en, fr, es, it
</span></span></span><span class="line"><span class="cl"><span class="go">HTTP_HOST=white
</span></span></span><span class="line"><span class="cl"><span class="go">HTTP_PRAGMA=no-cache
</span></span></span><span class="line"><span class="cl"><span class="go">HTTP_USER_AGENT=OmniWeb/2.0.1 OWF/1.0
</span></span></span><span class="line"><span class="cl"><span class="go">OSTYPE=Linux
</span></span></span><span class="line"><span class="cl"><span class="go">PATH=/bin:/usr/bin:/usr/local/bin
</span></span></span><span class="line"><span class="cl"><span class="go">QUERY_STRING=
</span></span></span><span class="line"><span class="cl"><span class="go">REMOTE_ADDR=193.102.57.1
</span></span></span><span class="line"><span class="cl"><span class="go">REMOTE_HOST=black
</span></span></span><span class="line"><span class="cl"><span class="go">REQUEST_METHOD=GET
</span></span></span><span class="line"><span class="cl"><span class="go">SCRIPT_FILENAME=/var/httpd/cgi-bin/hello
</span></span></span><span class="line"><span class="cl"><span class="go">SCRIPT_NAME=/cgi-bin/hello
</span></span></span><span class="line"><span class="cl"><span class="go">SERVER_ADMIN=kris@koehntopp.de
</span></span></span><span class="line"><span class="cl"><span class="go">SERVER_NAME=white.koehntopp.de
</span></span></span><span class="line"><span class="cl"><span class="go">SERVER_PORT=80
</span></span></span><span class="line"><span class="cl"><span class="go">SERVER_PROTOCOL=HTTP/1.0
</span></span></span><span class="line"><span class="cl"><span class="go">SERVER_SOFTWARE=Apache/1.0.3
</span></span></span><span class="line"><span class="cl"><span class="go">SHELL=/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="go">SHLVL=1
</span></span></span><span class="line"><span class="cl"><span class="go">TERM=dumb
</span></span></span><span class="line"><span class="cl"><span class="go">_=/usr/bin/env
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">Prozessliste:
</span></span></span><span class="line"><span class="cl"><span class="go">...
</span></span></span></code></pre></div><p><em>In der Ausgabe des &ldquo;Hello, World&rdquo;-Programmes ist die umfangreiche Liste der durch den Server bereitgestellten CGI-Variablen erkennbar.</em></p>
<p>Die Bedeutung der verschiedenen Umgebungsvariablen eines
CGI-Programmes wird folgenden Abschnitt erklärt. Die meisten Programme werten jedoch nur die
Variable <code>QUERY_STRING</code> oder eine der (im Beispiel nicht
erzeugten) Variablen <code>PATH_INFO</code> und
<code>PATH_TRANSLATED</code> aus.</p>
<h2 id="umgebung-von-cgi-programmen">
    <a href="#umgebung-von-cgi-programmen">
	Umgebung von CGI-Programmen
    </a>
</h2>
<p>Webserver unter UNIX versorgen ihre CGI-Programme mittels
Umgebungsvariablen mit den verschiedensten Fakten über den
Aufrufer. Unter anderen Betriebssystemen werden andere Mechanismen
zur Übermittlung der Information verwendet, aber die Art und
die Namen der übermittelten Funktionen bleibt gleich.</p>
<h3 id="standard-variablen">
    <a href="#standard-variablen">
	Standard-Variablen
    </a>
</h3>
<p>Der Client, den der Anwender benutzt, um das CGI-Programm auf
dem Server zu aktivieren, liefert dem Server eine ganze Reihe von
Informationen, die dieser auch dem CGI-Programm selbst zur
Verfügung stellt. Das CGI-Programm kann diese Informationen
auswerten und eventuell für die Gestaltung der Seite
verwenden.</p>
<dl>
<dt><code>SERVER_SOFTWARE</code></dt>
<dd>Der Name und die Versionsnummer des Servers, der das
CGI-Programm gestartet hat.  Beispiel: Apache/1.0.3</dd>
<dt><code>SERVER_NAME</code></dt>
<dd>Der Hostname des Servers, der das CGI-Programm gestartet hat.
Ist dieser Name nicht verfügbar, wird hier eine IP-Nummer
übergeben.  Beispiel: white.koehntopp.de</dd>
<dt><code>SERVER_PORT</code></dt>
<dd>Die Portnummer des Servers, der das CGI-Programm gestartet hat.
Beispiel: 80</dd>
<dt><code>SERVER_ADMIN</code></dt>
<dd>Die Mailadresse des Serveradministrators. Das CGI-Programm kann
in Notfällen Fehlermeldungen an diese Adresse mailen.
Beispiel: <a href="mailto:user@example.com">user@example.com</a>

</dd>
<dt><code>GATEWAY_INTERFACE</code></dt>
<dd>Die Version der CGI-Spezifikation, nach diese
Umgebungsvariablen erzeugt wurden.
Beispiel: CGI/1.1</dd>
<dt><code>SERVER_PROTOCOL</code></dt>
<dd>Der Name und die Versionsnummer des Protokolls, mit dem der
Request empfangen wurde, der das CGI-Programm aktiviert hat.
Beispiel: HTTP/1.0</dd>
<dt><code>REQUEST_METHOD</code></dt>
<dd>Die Request-Methode, die für das Starten des CGI-Programms
verantwortlich war. Diese Methode legt fest, auf welche Weise das
CGI-Programm an seine Eingabeparameter kommt.
Beispiel: <code>GET</code>, <code>HEAD</code> oder <code>POST</code>.</dd>
</dl>
<p>Bei jedem Datentausch zwischen einem WWW-Browser und Server
werden fast immer auch optionale Informationen in Form von
zusätzlichen Request-Headerzeilen ausgetauscht. Anstatt
für alle Eventualitäten vorauszuplanen und Header zu
definieren, hat man in der CGI-Spezifikation festgelegt, daß
solche zusätzlichen Headerzeilen in Uppercase mit dem Prefix
<code>HTTP_</code> versehen werden sollen und an das CGI-Programm
weitergegeben werden. Wenn der Browser also die optionale
HTTP-Informationszeile <code>Bla: Fasel</code> einliefert, dann wird dem
CGI-Programm die Umgebungsvariable <code>HTTP_BLA</code> mit dem Wert
<code>Fasel</code> vorbelegt übergeben.</p>
<p>Die folgenden Variablen findet man in nahezu jeder
CGI-Anfrage:</p>
<dl>
<dt><code>HTTP_REFERER</code></dt>
<dd>Die URL des Dokumentes, das auf das CGI-Programm verwiesen hat.
Auf dieser Seite hat der Benutzer also ein Link angeklickt, der auf
das Programm verwiesen hat, oder ein Formular abgesendet, das das
CGI-Programm aktiviert hat.
Beispiel: <a href="http://www.example.com/cgistarter.html" target="_blank" rel="noopener">http://www.example.com/cgistarter.html</a>

</dd>
<dt><code>HTTP_HOST</code></dt>
<dd>Viele Serverrechner betreiben nicht nur einen einzigen
Webserver, sondern eine ganze Palette von Servern für
unterschiedliche Anbieter unter verschiedenen Namen. Diese Variable
enthält, wenn sie vorhanden ist, den Namen, unter dem der
Server angesprochen wurde.
Beispiel: <a href="https://www.example.com" target="_blank" rel="noopener">www.example.com</a>

</dd>
<dt><code>HTTP_USER_AGENT</code></dt>
<dd>Die Typbezeichnung und Versionsnummer der Browser-Software.
Einige CGI-Programme werten diese Variable aus, um die
Fähigkeiten des Browsers zu bestimmen und je nach Bedarf die
Ausgabe anzupassen (Tabellen, Frames, Javascript, ActiveX, Java).
Beispiel: OmniWeb/2.0.1 OWF/1.0</dd>
<dt><code>HTTP_ACCEPT</code></dt>
<dd>Eine Liste aller MIME-Types, die der Client als Antworttyp akzeptiert.
Beispiel: text/plain, text/html, image/*</dd>
</dl>
<p>Und schließlich gibt es noch eine ganze Gruppe von
Variablen, die direkt Informationen über den Request
enthalten, der das CGI-Programm gestartet hat:</p>
<dl>
<dt><code>PATH_INFO</code></dt>
<dd>CGI-Programme können nach dem Pfadnamen zum Aufruf des
Scriptes noch weitere Pfadkomponenten enthalten. Zum Beispiel
könnte das Beispielprogramm aus dem Beispiel oben mit der URL
<code>http://server/cgi-bin/hello/more/info</code> aufgerufen werden.
Die Variable hält in diesem Fall dann die &ldquo;überstehenden&rdquo;
Komponenten des Pfades zur Auswertung durch das Script bereit.
Beispiel: <code>/more/info</code></dd>
<dt><code>PATH_TRANSLATED</code></dt>
<dd>Falls das CGI-Programm mit einem verlängerten CGI-Pfad
aufgerufen wurde, kann dieser Pfad vom WWW-Server auf die
übliche Weise in einen wirklichen Dateinamen übersetzt
werden. Das Ergebnis dieser Übersetzung ist dann in dieser
Variable zu finden.
Beispiel: <code>/home/www/more/info</code></dd>
<dt><code>SCRIPT_NAME</code></dt>
<dd>Der Teil der URL, der zum Aufruf des CGI-Programmes
geführt hat, ist in dieser Variablen in URL-Form zu finden.
Beispiel: <code>/cgi-bin/hello</code></dd>
<dt><code>SCRIPT_FILENAME</code></dt>
<dd>Die Information aus <code>SCRIPT_NAME</code> wird für das
CGI-Programm ebenfalls in wirkliche Dateinamen übersetzt
bereitgehalten.
Beispiel: <code>/var/httpd/cgi-bin/hello</code></dd>
<dt><code>QUERY_STRING</code></dt>
<dd>Diese Variable enthält eine Liste von Parametern, die dem
CGI-Programm mitgegeben worden sind. Die Parameter liegen in
codierter Form vor (Siehe den folgenden Abschnitt) und müssen durch das
CGI-Programm decodiert werden, bevor sie verwendet werden
können.
Beispiel: <code>name=Otto+Normaluser&amp;phone=441777</code></dd>
<dt><code>REMOTE_HOST</code></dt>
<dd>Der Name des Rechners, der den Request gemacht hat, soweit er verfügbar ist.
Beispiel: <code>mahaki.koehntopp.de</code></dd>
<dt><code>REMOTE_ADDRESS</code></dt>
<dd>Die IP-Nummer des Rechners, der den Request eingeliefert hat.
Beispiel: <code>192.103.57.2</code></dd>
<dt><code>AUTH_TYPE</code></dt>
<dd>Die Methode, mit der die Useridentität in der Variablen
<code>REMOTE_USER</code> verifiziert worden ist, falls eine
Verifikation überhaupt stattgefunden hat.
Beispiel: Basic</dd>
<dt><code>REMOTE_USER</code></dt>
<dd>Die verifizierte Identität des Benutzers, der den Request
eingeliefert hat, wenn eine Verifikation überhaupt
stattgefunden hat.
Beispiel: <code>marit</code></dd>
<dt><code>CONTENT_TYPE</code></dt>
<dd>Der MIME-Type der Daten, die mit einem PUT- oder POST-Request
eingeliefert worden sind.
Beispiel: <code>text/plain</code></dd>
<dt><code>CONTENT_LENGTH</code></dt>
<dd>Die Länge der Daten in Bytes, die mit einem PUT- oder
POST-Request eingeliefert worden sind.
Beispiel: 17321</dd>
</dl>
<h3 id="apache-spezialvariablen">
    <a href="#apache-spezialvariablen">
	Apache-Spezialvariablen
    </a>
</h3>
<p>Apache stellt zusätzlich zu den im CGI-Standard definierten
Variablen noch einige zusätzliche Informationen bereit.</p>
<dl>
<dt><code>DOCUMENT_ROOT</code></dt>
<dd>Diese Variable enthält den Pfad zur <code>DocumentRoot</code>
aus der Serverkonfiguration.
Beispiel: <code>/home/www</code></dd>
<dt><code>REDIRECT_...</code></dt>
<dd>Apache ist in der Lage, nach Maß zugeschnittene
Fehlermeldungen zu erzeugen. Geschickterweise erzeugt man diese
Fehlermeldungen durch ein CGI-Script. Damit das richtig
funktioniert, muss Information über den alten Request
vorhanden sein, der den Fehler hervorgerufen hat. Apache stellt
also alle Variablen des alten Requests mit dem zusätzlichen
Prefix <code>REDIRECT_</code> in der Fehlerbehandlung zur
Verfügung.
<p>Außerdem tauchen zwei zusätzliche neue Variablen auf,
nämlich <code>REDIRECT_URL</code>, die URL, die den Fehler
hervorgerufen hat, und <code>REDIRECT_STATUS</code>, der
HTTP-Statuscode, der Auskunft über die Art des Fehlers
gibt.</p>
</dd>
</dl>
<h3 id="zusätzliche-variablen">
    <a href="#zus%c3%a4tzliche-variablen">
	Zusätzliche Variablen
    </a>
</h3>
<p>Mit dem Schlüsselwort <code>PassEnv</code> ist es möglich,
weitere Variablen aus der Umgebung des Serverprozesses in die
Umgebung des CGI-Scriptes weiterzugeben. Die Anweisung</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">PassEnv HOSTNAME
</span></span></span></code></pre></div><p>würde zum Beispiel bewirken, daß die
Umgebungsvariable <code>HOSTNAME</code> aus der Serverumgebung auch in
CGI-Programmen sichtbar wäre, wenn sie überhaupt
definiert ist.</p>
<p>Mit dem Schlüsselwort <code>SetEnv</code> ist es außerdem
möglich, gezielt Variablen in der Umgebung des CGI-Programmes
zu erzeugen. Die Anweisung</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">SetEnv DEBUG_ZONE parser
</span></span></span></code></pre></div><p>würde für alle CGI-Programme die Umgebungsvariable
<code>DEBUG_ZONE</code> mit dem Wert <code>parser</code> belegen. Dies ist,
wie der Name der Variablen schon andeuten soll, ausgesprochen
nützlich, um Debugging in CGI-Scripten zu aktivieren.</p>
<h2 id="parameterübergabe-an-cgi-programme">
    <a href="#parameter%c3%bcbergabe-an-cgi-programme">
	Parameterübergabe an CGI-Programme
    </a>
</h2>
<p>CGI-Programme können durch direkte Links oder durch
Formulare (siehe folgendes Kapitel)
aktiviert werden. In beiden Fällen ist es möglich, dem
gestarteten CGI-Programm Parameter mitzugeben. Für den
Programmierer des CGI-Programmes sind dabei zwei Dinge interessant:
die HTTP-<em>Methode</em>, mit der die Daten übergeben werden,
und die <em>Codierung</em> der übergebenen Daten.</p>
<h3 id="http-methoden">
    <a href="#http-methoden">
	HTTP-Methoden
    </a>
</h3>
<p>Wie die meisten Protokolle, die im Internet eingesetzt werden,
ist auch HTTP ein Protokoll, das Daten in ASCII und
zeilenorientiert übermittelt. Auf diese Weise ist ein Client
oder Server für das Protokoll schnell mit Hilfe der
C-Bibliothek programmiert, und das Programm lässt sich
auch ohne Gegenstelle schnell mit <code>telnet</code> testen.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">GET /cgi-bin/hello/more/info HTTP/1.0
</span></span></span><span class="line"><span class="cl"><span class="go">Accept: text/html, image/gif, image/jpeg
</span></span></span><span class="line"><span class="cl"><span class="go">User-Agent: Mozilla/2.02 (Windows; I; 32bit)
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;Leerzeile&gt;
</span></span></span></code></pre></div><p><em>Ein Beispiel für einen HTTP-Request: Ein Netscape-Client fordert den URL-Pfad
<code>/cgi-bin/hello/more/info</code> an.</em></p>
<p>Ein Request, den ein HTTP-Client, etwa ein WWW-Browser, an den
Server sendet, sieht beispielweise so wie oben aus. Das Schlüsselwort
<code>GET</code> signalisiert, daß eine Seite vom WWW-Server
abgeholt werden soll, daß also in der Terminologie von HTTP
die <code>GET</code>-Methode verwendet werden soll. Dahinter werden der
URL-Pfad und die benutzte Protokollversion angegeben.</p>
<p>Die folgenden Zeilen des Requests bis zur ersten Leerzeile
können aus beliebig vielen Parametern bestehen, die dem
<code>GET</code>-Request noch mitgegeben werden. Der Browser teilt dem
Server so mit, welche Datentypen er in der Antwort unterstützt
und um welche Programmversion welchen Herstellers es sich bei dem
Browser handelt. Prinzipiell ist der Request durch die
Einführung neuer Zeilen beliebig erweiterbar.</p>
<p>Der Server beantwortet einen solchen Request wie unten gezeigt auf eine ganz
ähnliche Weise: Auch er erzeugt zunächst eine
formalisierte Antwortzeile, in der er die verwendete
Protokollversion, einen Statuscode und einen Freitext, der den
Statuscode erläutert, zurückgibt. Danach folgt wieder ein
relativ frei formatierte Headerblock, der Informationen über
das gelieferte Dokument enthält, und dann, nach einer
Leerzeile, das eigentliche Dokument.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">HTTP/1.0 200 OK
</span></span></span><span class="line"><span class="cl"><span class="go">Date: Mon, 04-Nov-1996 19:54:32 GMT
</span></span></span><span class="line"><span class="cl"><span class="go">Server: Apache 1.0.3
</span></span></span><span class="line"><span class="cl"><span class="go">Mime-Version: 1.0
</span></span></span><span class="line"><span class="cl"><span class="go">Last-Modified: Mon, 04-Nov-1996 19:54:32 GMT
</span></span></span><span class="line"><span class="cl"><span class="go">Content-Type: text/plain
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;Leerzeile&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">...
</span></span></span></code></pre></div><p><em>Ein Beispiel für eine
HTTP-Response. Der Server beantwortet den Request zunächst mit
einem Headerblock mit Metainformationen über die
gewünschten Daten. Nach einer Leerzeile kommen dann die
angeforderten Informationen.</em></p>
<h4 id="die-get-methode">
    <a href="#die-get-methode">
	Die <code>GET</code>-Methode
    </a>
</h4>
<p>Die <code>GET</code>-Methode kann nicht nur verwendet, um
Informationen von einem Server anzufordern, sondern sie kann
zugleich auch Informationen zum Server übertragen, falls die
angeforderte URL ein CGI-Programm bezeichnet.</p>
<p>Eine solche URL hat die Form</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">protokoll://server/path/file/extra_daten?query_string
</span></span></span></code></pre></div><p>Die Informationen aus <code>extra_daten</code> werden dem
CGI-Programm in den Variablen <code>PATH_INFO</code> und
<code>PATH_TRANSLATED</code> zur Verfügung gestellt, wie weiter oben
beschrieben. Die Informationen aus dem <code>query_string</code>
tauchen im CGI-Programm dagegen in der gleichnamigen Variablen auf.
Sie liegen in einer codierten Form vor, die als <em>urlencoded</em>
bezeichnet wird und die im folgenden Abschnitt beschrieben wird.</p>
<p>Daten, die in <code>GET</code>-Methoden codiert werden, sind in der
URL sichtbar. Solche Anfragen an CGI-Programme lassen sich also in
Bookmarks oder Hotlists mit Parametern abspeichern. Das ist sehr
nützlich, wenn man Benutzern vorgefertigte Anfragen an
Suchmaschinen oder andere Roboter präsentieren möchte.
Solche URLs können aber sehr lang und sehr hässlich
werden, wenn viele Parameter zu übergeben sind. Für diese
Zwecke ist die im Folgenden beschriebene <code>POST</code>-Methode
besser geeignet.</p>
<h4 id="die-post-methode">
    <a href="#die-post-methode">
	Die <code>POST</code>-Methode
    </a>
</h4>
<p>Die <code>POST</code>-Methode sendet die Parameter für das
CGI-Programm in einer gesonderten Übertragung an den Server.
Die Daten werden für das Programm zur Standardeingabe. Da die
Daten nicht Bestandteil der URL sind, besteht das Problem der zu
langen Eingaben hier nicht. Auf der anderen Seite ist es nicht
möglich, <code>POST</code>-Anfragen mit Parametern in Hotlists zu
speichern. Die übertragenen Daten sind auch hier wieder <em>urlencoded</em>,
obwohl es prinzipiell nicht unbedingt notwendig
wäre.</p>
<h3 id="url-encoding">
    <a href="#url-encoding">
	URL-Encoding
    </a>
</h3>
<p>Die Daten, die einem CGI-Programm übergeben werden, sind
unabhängig von der verwendeten Transfermethode in jedem Fall
urlencoded gesendet. Die Codierung wurde notwendig, weil man vor
der Erfindung der <code>POST</code>-Methode mehrere Variablen mit
Zeichen aller Art an den Server senden wollte und die Daten dazu in
die mittels eines <code>GET</code> angeforderte URL eincodiert werden
mussten. Eine solche URL darf bestimmte Zeichen nicht
enthalten: Unter anderem kann eine URL keine Leerzeichen
enthalten.</p>
<p>Die Trennung zwischen eigentlicher URL und zusätzlichen
Daten für einen <code>QUERY_STRING</code> erfolgt wie oben schon
angedeutet mit einem Fragezeichen (<code>?</code>). Die Daten im
<code>QUERY_STRING</code> können aus mehreren Feldern der Form
<code>name=wert</code> bestehen. Die einzelnen Felder werden durch
Und-Zeichen (<code>&amp;</code>) voneinander getrennt. Ein <code>QUERY_STRING</code>
kann also so aussehen:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">name1=wert1&amp;name2=wert2&amp;name3=wert3...
</span></span></span></code></pre></div><p>Um jetzt innerhalb eines Strings in urlencoding trotzdem
Fragezeichen, Undzeichen und andere Sonderzeichen verwenden zu
können, bedient man sich folgender Ersetzungsregeln:</p>
<ul>
<li>Leerzeichen werden durch Pluszeichen (<code>+</code>) dargestellt.
Der String &ldquo;Dies ist ein Test&rdquo; wird also zu &ldquo;Dies+ist+ein+Test&rdquo;.</li>
<li>Andere Zeichen, die in einer URL nicht mehr vorkommen
dürfen, werden durch das Zeichen Prozent (%) gefolgt vom
zweistelligen hexadezimalen Zeichencode des Zeichens dargestellt.
Der String &ldquo;#$%&rdquo; wird also zu &ldquo;%23%24%25&rdquo;.</li>
</ul>
<p>Jedes CGI-Programm muss in irgendeiner Form Funktionen zum
Decodieren von Daten enthalten, die urlencoded vorliegen.</p>
<h1 id="formulare-mit-html">
    <a href="#formulare-mit-html">
	Formulare mit HTML
    </a>
</h1>
<p>Natürlich ist es möglich, Eingaben für
CGI-Programme zusammenzustellen, indem man von Hand einen
<code>GET</code>-Request zusammenbaut. Schöner und bunter erzeugt man
solche Requests jedoch mit HTML-Formularen, den <code>FORMS</code>.</p>
<h2 id="der-form-tag">
    <a href="#der-form-tag">
	Der <code>&lt;FORM&gt;</code>-Tag
    </a>
</h2>
<p>Man kann Teile einer HTML-Seite zu Formularen erklären,
indem man sie in die speziellen Tags <code>&lt;FORM&gt;</code> und
<code>&lt;/FORM&gt;</code> einschließt. Innerhalb dieses Bereiches
dürfen dann zusätzliche Tags verwendet werden, um
Bedienelemente und Eingabefelder zu definieren. Eine einzige
HTML-Seite kann mehrere Forms enthalten, und diese verschiedenen
Forms können unterschiedliche CGI-Programme starten, wenn dies
notwendig sein sollte.</p>
<p>Der <code>&lt;FORM&gt;</code>-Tag muss in jedem Fall ein
<code>ACTION=</code>-Attribut haben. Dieses Attribut gibt die URL eines
CGI-Programmes an, das aktiviert werden soll, wenn das Formular
abgeschickt wird. Optional kann der <code>&lt;FORM&gt;</code>-Tag noch
mit einem Attribut <code>METHOD=</code> ausgezeichnet werden, das die
Methode der Parameterübergabe spezifiziert. Mögliche
Werte für diese Methode sind <code>GET</code> oder <code>POST</code>.
Fehlt die Angabe einer Methode, wird <code>GET</code> angenommen.
Das folgende Beispiel zeigt ein
leeres Formular, das unser Beispielprogramm <code>hello</code> aufrufen
soll.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;html&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;head&gt;&lt;title&gt;Testformular&lt;/title&gt;&lt;/head&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;body&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;h1&gt;Testformular&lt;/h1&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;form action=&#34;http://server/cgi-bin/hello&#34; method=&#34;get&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">Hier Formulardaten einfügen.
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;/form&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;/html&gt;
</span></span></span></code></pre></div><p><em>Dieses leere Formular ist der
Ausgangspunkt für die Gestaltung von HTML-Seiten mit
Formularen.</em></p>
<h2 id="der-input-tag">
    <a href="#der-input-tag">
	Der <code>&lt;INPUT&gt;</code>-Tag
    </a>
</h2>
<p>Innerhalb des Formularteils einer HTML-Seite kann normaler
HTML-Code stehen. Außerdem ist eine Reihe von
zusätzlichen Tags erlaubt, die die Bedienelemente des
Formulars definieren. Der vielseitigste Tag zur Definition dieser
Bedienelemente ist <code>&lt;INPUT&gt;</code>. Mit ihm lassen sich
außer Feldern zur Eingabe von Texten und Paßworten auch
Check- und Radiobuttons erzeugen. Außerdem kann er versteckte
Eingabefelder definieren und Dateiauswahlboxen zum Upload von
Dateien auf den Server starten.</p>
<h3 id="text--und-paßwortfelder">
    <a href="#text--und-pa%c3%9fwortfelder">
	Text- und Paßwortfelder
    </a>
</h3>
<p>Die Formen des <code>&lt;INPUT&gt;</code>-Tags zur Erzeugung von
Text- und Paßwortfeldern sind identisch. Die Tags werden vom
Browser auch identisch dargestellt. Der einzige Unterschied ist,
daß ein Textfeld die Benutzereingaben anzeigt, während
ein Paßwortfeld sie zwar aufnimmt, aber die Eingabe verbirgt.
<strong>Warnung:</strong> Ein Paßwortfeld verbirgt die Daten zwar bei
der Eingabe, aber der Transport über das Internet erfolgt
offen und unverschlüsselt, wenn nicht besondere Vorkehrungen
zur sicheren Kommunikation getroffen werden.</p>
<p>Die volle Form eines <code>&lt;INPUT&gt;</code>-Tags lautet:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;input type={feldtyp} name={variablenname} 
</span></span></span><span class="line"><span class="cl"><span class="go">       value={defaultwert} size={feldbreite} maxlength={eingabelänge}
</span></span></span></code></pre></div><p>Bis auf die Felder <code>TYPE=</code> und <code>NAME=</code> sind die
Attribute des Tags optional. Sie bedeuten im Einzelnen:</p>
<dl>
<dt><code>TYPE=</code></dt>
<dd>Der Typ des Feldes bestimmt das Aussehen des Kontrollelementes
auf der HTML-Seite. Er kann für die hier diskutierten
Eingabefelder entweder <code>TEXT</code> oder <code>PASSWORD</code>
sein.</dd>
<dt><code>NAME=</code></dt>
<dd>Der Name des Feldes bestimmt den Namen der Variablen, die
später dem CGI-Programm übergeben wird. Der Name dieser
Variablen ist nicht frei wählbar, sondern wird vom
Programmierer des CGI-Programmes festgelegt. Es ist sehr wichtig,
hier Groß- und Kleinschreibung des Namens genau zu
beachten.</dd>
<dt><code>VALUE=</code></dt>
<dd>Wenn das optionale Attribut <code>VALUE=</code> vorhanden und mit
einem Wert belegt ist, wird dieser Wert als Defaultwert des Feldes
vorgegeben. Fehlt das Attribut, ist das Eingabefeld zu Beginn
leer.</dd>
<dt><code>SIZE=</code></dt>
<dd>Dieses Attribut legt fest, wie viele Zeichen Breite das
Eingabefeld am Bildschirm haben soll. Der Defaultwert ist 20
Zeichen.
Ältere CGI-Formulare haben die Form <code>SIZE=x,y</code>
verwendet, um mehrzeilige Eingabefelder zu erzeugen. Das ist zwar
immer noch prinzipiell möglich, aber der weiter unten
diskutierte Tag <code>&lt;TEXTAREA&gt;</code> bietet sehr viel bessere
Editiermöglichkeiten.</dd>
<dt><code>MAXLENGTH=</code></dt>
<dd>Dieses Attribut legt fest, wie lang die Eingabe im Textfeld
wirklich sein darf. Dies ist unabhängig von der mit
<code>SIZE=</code> festgelegten sichtbaren Breite des Textfeldes.</dd>
</dl>
<p>Die folgende Abbildung zeigt
das mögliche Aussehen eines <code>&lt;INPUT TYPE=&quot;text&quot;&gt;</code>-Tags.</p>
<p>Source:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;input type=&#34;text&#34; value=&#34;info&#34; size=&#34;23&#34; name=&#34;zeile&#34;&gt;
</span></span></span></code></pre></div><p>Aussehen:
<input type="text" value="info" size="23"></p>
<p><em>Ein Beispiel mit einem <code>&lt;INPUT TYPE=&quot;text&quot;&gt;</code>-Tag.</em></p>
<h3 id="check--und-radioboxes">
    <a href="#check--und-radioboxes">
	Check- und Radioboxes
    </a>
</h3>
<p>Wenn man dem Benutzer keine Eingabe in freier Form erlauben
möchte, bietet es sich für kleine Mengen
auszuwählender Optionen an, je nach Art der Auswahl entweder
Checkboxen oder Radioboxen zu definieren.</p>
<p>Checkboxen sind kleine Kästchen, die der Benutzer ankreuzen
kann und die eine Option entweder ein- oder ausschalten. Radioboxen
bieten dagegen eine Eins-aus-n-Auswahl an: Unter einer Menge von
Optionen ist nur genau eine auswählbar.</p>
<p>In beiden Fällen sieht der <code>&lt;INPUT&gt;</code>-Tag zur
Erzeugung dieser Auswahl so aus:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;input type={typ} name={variablenname} value={wert} checked&gt;
</span></span></span></code></pre></div><p>Außer dem Attribut <code>CHECKED</code> sind alle Attribute
dieses Tags vorgeschrieben und dürfen nicht weggelassen
werden. Sie bedeuten:</p>
<dl>
<dt><code>TYPE=</code></dt>
<dd>Dieses Attribut ist entweder <code>CHECKBOX</code> oder <code>RADIO</code> und legt damit den Typ des Knopfes fest.</dd>
<dt><code>NAME=</code></dt>
<dd>Dieses Attribut bestimmt wie immer den Namen der Variable, die dem CGI-Programm übergeben wird.</dd>
<dt><code>VALUE=</code></dt>
<dd>Dieses Attribut ist im Gegensatz zu <code>TEXT</code>-Eingaben <strong>nicht</strong> optional.
Ist die entsprechende Box selektiert, wird die Eingabevariable des CGI-Programmes
mit dem hier angegebenen Wert belegt, sonst ist sie leer.</dd>
<dt><code>CHECKED</code></dt>
<dd>Dieses optionale Attribut markiert den Defaultwert der Box. Ist es vorhanden, erscheint die Box angeklickt.</dd>
</dl>
<p>Das folgende Beispiel zeigt das mögliche Aussehen dieser Tags.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;input type=&#34;checkbox&#34; value=&#34;doit&#34; name=&#34;check1&#34;&gt;A
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;input type=&#34;checkbox&#34; value=&#34;again&#34; name=&#34;check2&#34; checked&gt;B
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">&lt;input type=&#34;radio&#34; value=&#34;eins&#34; name=&#34;radio1&#34;&gt;A
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;input type=&#34;radio&#34; value=&#34;zwei&#34; name=&#34;radio1&#34;&gt;B
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;input type=&#34;radio&#34; value=&#34;drei&#34; name=&#34;radio1&#34; checked&gt;C
</span></span></span></code></pre></div><p><input type="checkbox" value="doit" name="check1">A
<input type="checkbox" value="again" name="check2" checked></p>
<p><input type="radio" value="eins" name="radio1">A
<input type="radio" value="zwei" name="radio1">B
<input type="radio" value="drei" name="radio1" checked>C</p>
<p><em>Ein Beispiel mit Radio- und Checkboxes.</em></p>
<p>Ein wichtiger Unterschied zwischen Checkboxen und Radioboxen
existiert: Checkboxen müssen immer verschiedene
<code>NAME=</code>-Attribute haben, denn jede Checkbox existiert für
sich alleine und unabhängig von anderen Checkboxen.</p>
<p>Radioboxen treten dagegen in Gruppen auf und innerhalb einer
Gruppe von Radioboxen kann immer nur eine selektiert sein. Eine
Gruppe von Radioboxen wird durch gleiche <code>NAME=</code>-Attribute
definiert.</p>
<h3 id="versteckte-eingabefelder">
    <a href="#versteckte-eingabefelder">
	Versteckte Eingabefelder
    </a>
</h3>
<p>Mit einem Eingabefeld vom Typ <code>HIDDEN</code> lassen sich versteckte Eingabefelder anlegen:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;INPUT TYPE=&#34;HIDDEN&#34; NAME={variablennamen} VALUE={wert}&gt;
</span></span></span></code></pre></div><p>Solche Eingabefelder sind nicht sichtbar und auch nicht
veränderbar. Sie werden in jedem Fall unverändert an das
CGI-Programm übergeben. Versteckte Eingabefelder sind
nützlich, wenn man ein CGI-Programm mit mehreren Funktionen
hat, bei dem über ein Eingabefeld eine Funktion
ausgewählt werden muss, oder wenn man einen Zustand in
einer dynamisch erzeugten Seite über eine Transaktion hinweg
retten muss.</p>
<h3 id="dateiupload">
    <a href="#dateiupload">
	Dateiupload
    </a>
</h3>
<p>Es ist möglich, über ein Eingabefeld vom Typ
<code>FILE</code> ganze Dateien auf den WWW-Server zu uploaden. Es ist
dringend angeraten, für eine solche Transaktion ein Formular
mit der Methode <code>POST</code> zu verwenden. Außerdem
muss dem Formular mit dem Attribut
<code>ENCTYPE=multipart/form-data</code> klargemacht werden, auf welche
Weise der Upload zu geschehen hat.
<em>Hinweis:</em> <code>FILE</code> ist eine Netscape-Erweiterung.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;FORM ACTION=&#34;URL&#34; METHOD=&#34;POST&#34; ENCTYPE=&#34;multipart/form-data&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">Dateinamen angeben: &lt;INPUT TYPE=&#34;FILE&#34; NAME=&#34;upload&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;/FORM&gt;
</span></span></span></code></pre></div><h3 id="absenden-und-rücksetzen">
    <a href="#absenden-und-r%c3%bccksetzen">
	Absenden und Rücksetzen
    </a>
</h3>
<p>Mit den gezeigten Tags lassen sich zwar unfangreiche Formulare
erzeugen, aber diese Formulare können noch nicht in Betrieb
genommen werden, denn es fehlt ein Knopf zum Absenden des
Formulars. HTML sieht für diesen Zweck Eingabefelder vom Typ
<code>SUBMIT</code> vor und bietet außerdem noch Eingabefelder
vom Typ <code>RESET</code> an, mit dem sich ein Formular auf den
Startzustand zurücksetzen lässt.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;INPUT TYPE=&#34;SUBMIT&#34; VALUE=&#34;Formular absenden&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;INPUT TYPE=&#34;RESET&#34; VALUE=&#34;Eingabe löschen&#34;&gt;
</span></span></span></code></pre></div><p>Jedes Formular muss einen <code>SUBMIT</code>-Button haben, und
ein Formular kann nur einen <code>SUBMIT</code>-Button haben.
Das folgende Beispiel zeigt
mögliche Darstellungen dieser Knöpfe.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;input type=&#34;submit&#34; value=&#34;Formular absenden&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;input type=&#34;reset&#34; value=&#34;Eingabe löschen&#34;&gt;
</span></span></span></code></pre></div><input type="submit" value="Formular absenden" />
<input type="reset" value="Eingabe löschen" />
<p><em>Ein Beispiel mit <code>SUBMIT</code> und <code>RESET</code>.</em></p>
<h2 id="der-textarea-tag">
    <a href="#der-textarea-tag">
	Der <code>&lt;TEXTAREA&gt;</code>-Tag
    </a>
</h2>
<p>Felder zur freien Texteingabe lassen sich mit dem Tag
<code>&lt;TEXTAREA&gt;</code> definieren. Der Tag hat diese Form:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;TEXTAREA NAME={variablenname} ROWS={zeilen} COLS={spalten}&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">Textvorgabe
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;/TEXTAREA&gt;
</span></span></span></code></pre></div><p>Die Attribute <code>ROWS=</code> und <code>COLS=</code> sind optional.
Die Attribute bedeuten:</p>
<dl>
<dt><code>NAME=</code></dt>
<dd>Das Attribut legt wie üblich den Namen der CGI-Variablen  fest.</dd>
<dt><code>ROWS=</code></dt>
<dd>Das Attribut bestimmt die Höhe des Eingabefeldes in Zeilen.</dd>
<dt><code>COLS=</code></dt>
<dd>Das Attribut bestimmt die Breite des Eingabefeldes in Spalten.</dd>
</dl>
<p>Das Ergebnis dieses Tags sieht dann möglicherweise so aus
wie im folgenden Beispiel:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;textarea name=&#34;text&#34; rows=5 cols=20&gt;Beispieltext&lt;/textarea&gt;
</span></span></span></code></pre></div><textarea name="text" rows=5 cols=20>Beispieltext</textarea>
<p><em>Ein Beispiel mit <code>TEXTAREA</code>.</em></p>
<p>Es ist angeraten, <code>&lt;TEXTAREA&gt;</code> zusammen mit der
Methode <code>POST</code> zu verwenden.</p>
<h2 id="der-select-tag">
    <a href="#der-select-tag">
	Der <code>&lt;SELECT&gt;</code>-Tag
    </a>
</h2>
<p>Größere Auswahlen von vorgegebenen Werten erzeugt man
wegen des großen Platzverbrauches und im Interesse der
Übersichtlichkeit besser nicht mit Checkboxen oder
Radiobuttons, sondern mit dem <code>&lt;SELECT&gt;</code>-Tag. Je nach
Konfiguration erzeugt dieser Tag ein Popup-Menü oder eine
Auswahlbox für Mehrfachauswahlen.</p>
<p>Das Format dieses Tags ist</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">&lt;SELECT NAME={variablenname} SIZE={größe} MULTIPLE&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;OPTION SELECTED VALUE={wert}&gt;Option 1
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;OPTION ...&gt;
</span></span></span><span class="line"><span class="cl"><span class="go">&lt;/SELECT&gt;
</span></span></span></code></pre></div><p>Der <code>&lt;SELECT&gt;</code>-Tag erfordert nur die Angabe des
Variablennamens mit <code>NAME=</code>, die anderen Attribute sind
optional. Ein <code>&lt;SELECT&gt;</code>-Container kann beliebig viele
<code>&lt;OPTION&gt;</code>-Tags enthalten. Diese können optional
<code>SELECTED</code> sein und es kann optional ein <code>VALUE=</code>
festgelegt werden, mit dem die Variable belegt wird, wenn dieses
Element ausgewählt ist.</p>
<p>Wenn das optionale Attribut <code>MULTIPLE</code> angegeben ist, ist
die Mehrfachauswahl von Optionen möglich.</p>
<h1 id="perl">
    <a href="#perl">
	Perl
    </a>
</h1>
<p>CGI-Programme können in jeder beliebigen Programmiersprache
geschrieben werden, solange sie in der Lage ist, einen
<code>QUERY_STRING</code> zu decodieren. Programmiersprachen, die eine
ausgereifte Stringbehandlung und eine automatische
Speicherverwaltung haben, sind besonders geeignet, denn
CGI-Programme benutzen diese Spracheigenschaften meistens sehr
intensiv. Ein Datenbankinterface oder andere Möglichkeiten,
große Datenmengen zu durchsuchen, sind ein zusätzliches
Plus, denn oft müssen CGI-Programme vorhandene Daten für
die Darstellung im Web aufbereiten.</p>
<p>Die Programmiersprache Perl ist besonders geeignet zur
Programmierung von CGI-Scripten, denn sie macht gerade die
Bearbeitung von Texten und Dateien besonders einfach.
Ursprünglich war Perl eine Sprache zur Reportgenerierung aus
beliebig formatierten Systemlogbüchern. Daher stammen Perls
umfangreiche Einbaufunktionen zum Suchen und Ersetzen von Texten
und zur Formatierung von Reports. Die Weiterentwicklung hat Perl zu
einem sehr mächtigen Werkzeug zur Systemprogrammierung und -steuerung in UNIX gemacht: Gerade die Systemverwalter
größerer Installationen wissen Perl zu nutzen, um
Wartungsabläufe auf ihren Systemen zu automatisieren. Auch die
weite Verfügbarkeit von Perl auf praktisch allen Plattformen,
die ausreichend Speicher zur Verfügung stellen, macht die
Sprache für diese Zwecke interessant.</p>
<p>Mit dem Aufkommen des World Wide Web hat Perl eine
Leistungsfähigkeit als Sprache zur schnellen Entwicklung von
CGI-Programmen demonstriert. Ein sehr großer Teil aller
CGI-Programme ist zunächst als Perl-Script entwickelt worden.
Oft ist die Leistung diesr Scripte schon ausreichend, so daß
eine Portierung in eine compilierte Sprache sich erübrigt.</p>
<h2 id="einfache-perl-programme">
    <a href="#einfache-perl-programme">
	Einfache Perl-Programme
    </a>
</h2>
<p>Das berüchtigte &ldquo;Hello, World!&quot;-Programm sieht in Perl so
aus:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="ch">#! /usr/bin/perl --</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="s">&#34;Hello, World\n&#34;</span><span class="p">;</span>
</span></span></code></pre></div><p>Es sieht aus wie eine Kreuzung zwischen einem Shellscript und
einem C-Programm. In der Tat ist Perl eine interpretierte Sprache,
denn Perlprogramme müssen nicht compiliert werden, sondern
können wie Shellscripte direkt aufgerufen werden. Genau wie
bei UNIX-Shellscripten gibt die erste Zeile des Programms an,
daß es sich um ein Script handelt und unter welchem Pfad der
Interpreter für diese Scripte zu finden ist. Für das
Script selbst ist eine Zeile, die mit einem <code>#</code> beginnt, ein
Kommentar, so daß das Script selbst seinen eigenen Aufruf als
Kommentar interpretiert.</p>
<p>Perlprogramme sind jedoch schneller als Shell-Scripte, denn der
Interpreter übersetzt das Programm beim Aufruf in eine interne
Form und bestimmt auch schon die Adressen der verschiedenen
Funktionen und Variablen. In der Tat steht ein Perlprogramm einem
C-Programm in der Geschwindigkeit nicht viel nach. Seine
Ausführungsgeschwindigkeit ist der von P-Code vergleichbar,
wie ihn einige Microsoft-Compiler zu Speicherersparniszwecken
erzeugen.</p>
<p>Die Anweisung <code>print</code> druckt ihr Argument, einen String
nach den Konventionen von C. Wie in C werden Anweisungen in Perl
mit einem Semikolon beendet.</p>
<h2 id="benutzereingaben-lesen">
    <a href="#benutzereingaben-lesen">
	Benutzereingaben lesen
    </a>
</h2>
<p>Die nächste Stufe der Komplexität nach &ldquo;Hello,
World!&rdquo; besteht in der Regel darin, den Namen der zu
grüßenden Person einzulesen und diese Person namentlich
zu begrüßen. Das erfordert die Verwendung von
Operationen zur Eingabe von Daten und natürlich Variablen.</p>
<p>In Perl gibt es nur einen Typ von Variablen. Sie können
entweder Strings, Integer oder Fließkommazahlen speichern und
sie müssen nicht vereinbart werden. Perl-Variablen können
jedoch in Form von einfachen Werten (<em>Skalaren</em>), numerisch
indizierten Feldern (<em>Arrays</em>) oder beliebig indizierten
Tabellen (<em>assoziativen Feldern, Hashtables</em>) auftreten.
Skalare werden durch das Zeichen Dollar (<code>$</code>)
gekennzeichnet, so daß <code>$name</code> eine skalare Variable
mit dem Namen <code>name</code> bezeichnet. Diese Variable wird ins
Leben gerufen, indem ihr einfach ein Wert zugewiesen wird.</p>
<p>Um nach einem Namen zu fragen, muss ein Prompt ausgegeben
werden und auf irgendeine Weise eine Eingabe eingelesen werden. Den
Prompt können wir bereits drucken, mit <code>print</code>. Eine
Eingabe einzulesen, ist ebenfalls sehr einfach, denn wie in C
stehen uns die vordefinierten Filehandles <code>&lt;STDIN&gt;</code>,
<code>&lt;STDOUT&gt;</code> und <code>&lt;STDERR&gt;</code> zur
Verfügung. Perl ist auf Stringverarbeitung optimiert: Um eine
Zeile der Eingabe einzulesen, genügt es, einer Variablen das
Filehandle zuzuweisen:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">print</span> <span class="s">&#34;Wie ist Ihr Name? &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$name</span> <span class="o">=</span> <span class="sr">&lt;STDIN&gt;</span><span class="p">;</span>
</span></span></code></pre></div><p>Das Ergebnis ist, daß der Skalar <code>$name</code> eine
Eingabezeile inklusive des Zeilenendezeichens enthält. Wir
können dieses letzte Zeichen abschneiden, indem wir die
Funktion <code>chop()</code> verwenden, die das letzte Zeichen eines
Strings zurückliefert und als Seiteneffekt den String um
dieses Zeichen kürzt.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">chop($name);
</span></span></span></code></pre></div><p>Wie in Shell auch können Variablen in Stringkonstanten
verwendet werden: Sie werden vor der Ausgabe durch ihren Wert
ersetzt:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">print</span> <span class="s">&#34;Hello, $name!\n&#34;</span><span class="p">;</span>
</span></span></code></pre></div><p>Und wie in Shell auch muss das Dollarzeichen in einem
String durch einen Backslash geschützt werden, wenn es
ausgegeben werden soll.</p>
<p>Hier noch einmal das ganze Programm:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="ch">#! /usr/bin/perl --</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="s">&#34;Wie ist Ihr Name? &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$name</span> <span class="o">=</span> <span class="sr">&lt;STDIN&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">chop</span><span class="p">(</span><span class="nv">$name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="s">&#34;Hello, $name!\n&#34;</span><span class="p">;</span>
</span></span></code></pre></div><h2 id="variablen-und-konstanten">
    <a href="#variablen-und-konstanten">
	Variablen und Konstanten
    </a>
</h2>
<h3 id="notation-von-skalaren">
    <a href="#notation-von-skalaren">
	Notation von Skalaren
    </a>
</h3>
<p>Wie bereits erklärt, unterscheidet Perl nicht nach
verschiedenen Datentypen, und Variablen müssen nicht
vereinbart werden. Einer skalaren Variable kann so ziemlich jeder
Wert zugewiesen werden, der sich in Perl darstellen
lässt. Das können Zahlen wie 42 oder 3.1415926e00
sein oder Zeichenketten beliebiger Länge. Anders als Shell hat
Perl keine Probleme mit binären Zeichen in Strings, ja nicht
einmal Nullbytes machen Schwierigkeiten. Es ist kein Problem, in
Perl Binärprogramme in Strings einzulesen, zu patchen und
wieder zurückzuschreiben.</p>
<p>Perl wandelt skalare Werte intern automatisch in Zeichenketten
oder in Fließkommazahlen um, je nachdem, welche Art von
Operation mit dem Wert durchgeführt wird. Die Sprache kennt
keine Ganzzahloperationen und arbeitet auch intern niemals mit
ganzen Zahlen, sondern immer mit doppelt genauen
Fließkommazahlen. Zahlen können in Perl wie in C notiert
werden, die folgende Abbildung
gibt einen Überblick.</p>
<table>
  <thead>
      <tr>
          <th>Format</th>
          <th>Notation</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Fließkomma</td>
          <td>1.24</td>
      </tr>
      <tr>
          <td></td>
          <td>7.24e17</td>
      </tr>
      <tr>
          <td>Ganzzahl</td>
          <td>17</td>
      </tr>
      <tr>
          <td>Ganzzahl (oktal)</td>
          <td>0377</td>
      </tr>
      <tr>
          <td>Ganzzahl (hex)</td>
          <td>0xff</td>
      </tr>
  </tbody>
</table>
<p><em>Zahlenformate in Perl.</em></p>
<p>Wie in der UNIX-Shell kann und muss man auch in Perl
gelegentlich Zeichenketten in Anführungszeichen
einschließen, etwa wenn sie Leerzeichen oder Sonderzeichen
enthalten. In jedem Fall kann man einzelnen Sonderzeichen ihre
Sonderbedeutung nehmen, indem man ihnen einen Backslash
voranstellt. Das gilt natürlich auch für den Backslash
(und die verschiedenen Sorten Anführungszeichen) selbst.</p>
<p>Einfache Anführungszeichen wirken so, als sei jedes
einzelne Zeichen in der Zeichenkette von einem Backslash
geschützt. Innerhalb der Zeichenkette darf jedes beliebige
Zeichen auftauchen, auch Zeilenumbrüche, wenn sich die
Zeichenkette über mehrere Zeilen erstreckt. Beispiele:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="s">&#39;Hello, World!&#39;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#39;Don\&#39;t do that, Dave!&#39;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#39;&#39;</span>   <span class="c1"># Der Leerstring.</span>
</span></span><span class="line"><span class="cl"><span class="s">&#39;Dies ist der Backslash: \\.&#39;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#39;multiline
</span></span></span><span class="line"><span class="cl"><span class="s">string&#39;</span>
</span></span></code></pre></div><p>Doppelte Anführungszeichen funktionieren eher so wie
Strings in Shell und C: Innerhalb solcher Zeichenketten werden
Variablen ersetzt, und einige Sonderzeichen können durch
Backslash-Sequenzen notiert werden (siehe die folgende Tabelle).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="s">&#34;Hello, World!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;Aufwachen!\007&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;Spalte1\tSpalte2&#34;</span>
</span></span></code></pre></div><table>
  <thead>
      <tr>
          <th>Zeichen</th>
          <th style="text-align: left">Bedeutung</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>\n</td>
          <td style="text-align: left">Newline</td>
      </tr>
      <tr>
          <td>\r</td>
          <td style="text-align: left">Return</td>
      </tr>
      <tr>
          <td>\t</td>
          <td style="text-align: left">Tab</td>
      </tr>
      <tr>
          <td>\f</td>
          <td style="text-align: left">Formfeed</td>
      </tr>
      <tr>
          <td>\b</td>
          <td style="text-align: left">Backspace</td>
      </tr>
      <tr>
          <td>\v</td>
          <td style="text-align: left">Vertical Tab</td>
      </tr>
      <tr>
          <td>\a</td>
          <td style="text-align: left">Bell</td>
      </tr>
      <tr>
          <td>\e</td>
          <td style="text-align: left">Escape</td>
      </tr>
      <tr>
          <td>\007</td>
          <td style="text-align: left">Zeichen mit dem oktalen Zahlencode 7</td>
      </tr>
      <tr>
          <td>0x7f</td>
          <td style="text-align: left">Zeichen mit dem hex Zahlencode 0x7f</td>
      </tr>
      <tr>
          <td>\cC</td>
          <td style="text-align: left">Controlzeichen, hier Control-C</td>
      </tr>
      <tr>
          <td>\</td>
          <td style="text-align: left">Backslash</td>
      </tr>
      <tr>
          <td>\l</td>
          <td style="text-align: left">Folgendes Zeichen in Kleinschrift wandeln</td>
      </tr>
      <tr>
          <td>\L</td>
          <td style="text-align: left">Alle folgenden Zeichen bis \E in Kleinschrift wandeln</td>
      </tr>
      <tr>
          <td>\u</td>
          <td style="text-align: left">Folgendes Zeichen in Großschrift wandeln</td>
      </tr>
      <tr>
          <td>\U</td>
          <td style="text-align: left">Alle folgenden Zeichen bis \E in Großschrift wandeln</td>
      </tr>
      <tr>
          <td>\E</td>
          <td style="text-align: left">Beende \L oder \U</td>
      </tr>
  </tbody>
</table>
<p><em>Controlzeichen in Perl.</em></p>
<h3 id="operationen-mit-skalaren">
    <a href="#operationen-mit-skalaren">
	Operationen mit Skalaren
    </a>
</h3>
<p>Perl kennt dieselben numerischen Operationen auf Skalaren, die C auch kennt: <code>+, -, *, /</code> und <code>%</code>.
Außerdem ist noch eine Potenzoperation <code>**</code> definiert.
Numerische Vergleiche werden mit den Operatoren <code>&lt;, &lt;=, ==, &gt;=, &gt;</code> und <code>!=</code> vorgenommen.</p>
<p>Außerdem ist auf Strings die Konkatenation definiert; dazu
wird der Operator Punkt (<code>.</code>) verwendet. Strings können
mit dem Operator <code>x</code> auch vervielfacht werden. Strings
werden alphabetisch verglichen, dafür stehen die Operatoren
<code>lt, le, eq, ge, gt</code> und <code>ne</code> zur Verfügung. Die
numerischen Operatoren würden <code>7 &lt; 30</code> als wahr
bewerten, aber <code>7 lt 30</code> ist falsch.</p>
<p>Skalare können einfach zugewiesen werden, Perl verhält
sich dabei im Wesentlichen wie C. Der einzige Unterschied ist,
daß Variablen nicht deklariert werden müssen, sondern
nach Bedarf ins Leben gerufen werden. Wie in C existiert zu jedem
arithmetischen Operator auch ein zugehöriger rechnender
Zuweisungsoperator, d.h. man kann <code>+=, -=, *=, /=</code> und so
weiter verwenden. Ebenso wie in C sind <code>++</code> und <code>-</code>
als Pre- und Postoperatoren erlaubt.</p>
<p>Wird ein Skalar benutzt, bevor er einen Wert zugewiesen bekommen
hat, liefert Perl den speziellen Wert <em>undef</em>. Dieser Wert
sieht aus wie der Leerstring oder wie eine numerische Null, je
nachdem, in welchem Kontext er verwendet wird. <em>undef</em> kann
jedoch mit dem Prädikat <code>defined()</code> abgefragt werden.
Das ist nützlich im Zusammenhang mit Dateien, die am Dateiende
<em>undef</em> zurückliefern.</p>
<h3 id="arrays">
    <a href="#arrays">
	Arrays
    </a>
</h3>
<p>Außer skalaren Werten kann Perl noch Felder und
assoziative Felder bearbeiten. Genau wie bei Strings gibt es auch
bei diesen Datentypen keine Größenbegrenzungen, und
genau wie gewöhnliche Variablen müssen auch die beiden
Arten von Feldern in Perl nicht deklariert werden, sondern
können einfach benutzt werden.</p>
<p>So wie skalare Variable durch ein <code>$</code> bezeichnet werden,
kennzeichnet Perl Felder mit einem <code>@</code> und Hashlisten mit
einem <code>%</code>-Zeichen. Demnach bezeichnet <code>$name</code> einen
Skalar mit dem Namen <code>name</code> und <code>@name</code> ein Feld
desselben Namens. Perl unterhält unterschiedliche
Namensräume für alle drei Sorten von Objekten, so
daß <code>$name</code>, <code>@name</code> und <code>%name</code>
unterschiedliche Objekte bezeichnen.</p>
<p>Ebenso wie skalare Konstanten in Perl notiert werden
können, existieren auch Notationen für Felder:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>   <span class="c1"># Ein Feld mit dem drei Werten 1, 2 und 3.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="s">&#34;huhu&#34;</span><span class="p">,</span> <span class="s">&#34;du&#34;</span><span class="p">,</span> <span class="s">&#34;da&#34;</span><span class="p">)</span> <span class="c1"># Ein Feld mit drei Strings.</span>
</span></span></code></pre></div><p>Es ist auch möglich, gemischte Felder zu notieren, und die
Feldelemente brauchen keine Konstanten zu sein:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>  <span class="c1"># Der Wert von $name und 42.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">$vorname</span> <span class="o">.</span> <span class="nv">$nachname</span><span class="p">,</span> <span class="nv">$strasse</span> <span class="o">.</span> <span class="nv">$hausnr</span><span class="p">)</span> <span class="c1"># Zwei Werte.</span>
</span></span><span class="line"><span class="cl"><span class="p">()</span> <span class="c1"># Das leere (nullelementige) Feld.</span>
</span></span></code></pre></div><p>Um große Listen von aufzählenden Zahlenwerten zu
notieren, existiert in Perl außerdem noch eine
Abkürzung:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span>      <span class="c1"># Die ganzen Zahlen von 1 bis 10.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="mf">11.9</span><span class="o">..</span><span class="mf">15.9</span><span class="p">)</span> <span class="c1"># Die Zahlen 11.9, 12.9, .., 15.9.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="o">..</span><span class="mi">9</span><span class="p">)</span> <span class="c1"># Die Zahlen 2, 3, 5, 6, 7, 8 und 9.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">$start</span><span class="o">..</span><span class="nv">$stop</span><span class="p">)</span> <span class="c1"># Der Bereich von $start bis $stop.</span>
</span></span></code></pre></div><p>Solche Listen zählen immer nur aufsteigend. Wenn der rechte
Wert kleiner ist als der linke Wert, entsteht die leere Liste. Der
Operator <code>print</code> kann ebenfalls Listen drucken; die Ausgabe
erfolgt ohne Leerzeichen zwischen den Listenelementen:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">print</span> <span class="p">(</span><span class="s">&#34;Der Name ist &#34;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">,</span><span class="s">&#34;\n&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="p">(</span><span class="s">&#34;Der Name ist $name\n&#34;</span><span class="p">);</span> <span class="c1"># schöner</span>
</span></span></code></pre></div><h3 id="operationen-mit-arrays">
    <a href="#operationen-mit-arrays">
	Operationen mit Arrays
    </a>
</h3>
<p>Arrays werden in Perl genauso zugewiesen wie Skalare,
nämlich mit <code>=</code>. Perl erkennt, ob es sich um eine
Zuweisung von Arrays oder Skalaren handelt, indem es die linke
Seite der Zuweisung analysiert und feststellt, ob es sich dabei um
einen skalaren oder um einen Arraykontext handelt.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="nv">@lall</span>  <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">);</span> <span class="c1"># Das Feld @lall besteht jetzt aus 3 Elementen.</span>
</span></span><span class="line"><span class="cl"><span class="nv">@bla</span>   <span class="o">=</span> <span class="nv">@lall</span><span class="p">;</span>  <span class="c1"># In Perl können ganze Felder zugewiesen werden.</span>
</span></span><span class="line"><span class="cl"><span class="nv">@fasel</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>      <span class="c1"># 1 wird zu (1) und dann zugewiesen.</span>
</span></span></code></pre></div><p>In der Elementliste auf der rechten Seite der Zuweisung
können auch wieder Arrays als Elemente auftauchen. Sie werden
bei der Zuweisung durch ihre Elemente ersetzt. Auf diese Weise ist
es möglich, vorne und hinten in das Feld Elemente
einzufügen.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="nv">@lall</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nv">@bla</span>  <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">@lall</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="c1"># wird zu (0..4).</span>
</span></span></code></pre></div><p>Enthält eine Liste nur Variablen, kann sie auch als linke
Seite einer Zuweisung verwendet werden. Auf diese Weise kann man
bequem beliebig viele Elemente eines Feldes permutieren. Wenn die
linke Liste einer Zuweisung weniger Elemente hat als das Feld auf
der rechten Seite, werden die überzähligen Elemente
verworfen. Es ist aber auch möglich, als letztes Element der
linken Seite ein Feld zu verwenden, das diese Elemente dann
aufnimmt:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">$b</span><span class="p">,</span> <span class="nv">$a</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">);</span> <span class="c1"># $a und $b vertauschen.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nv">$d</span><span class="p">,</span> <span class="nv">$e</span><span class="p">);</span> <span class="c1"># $b ist $d, $e ist verloren.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">@b</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nv">$d</span><span class="p">,</span> <span class="nv">$e</span><span class="p">);</span> <span class="c1"># $b[0] ist $d, $b[1] ist $e.</span>
</span></span></code></pre></div><p>Wird ein Feld in einem skalaren Kontext verwendet, wird die
Länge des Feldes für das Feld eingesetzt. Die Länge
eines Feldes <code>@name</code> kann aber auch mit der Variablen
<code>$#name</code> abgefragt werden.</p>
<p>Auf die Elemente eines Feldes <code>@name</code> kann durch
Indizierung wie in C zugegriffen werden. Die Elemente eines Feldes
sind Skalare, daher sind sie mit dem Prefix <code>$</code> zu versehen.
Es ist möglich, beliebigen einzelnen Feldelementen Werte
zuzuweisen. Perl vergrößert das Feld nach Bedarf,
eventuell vorhandene Lücken werden mit <em>undef</em>
aufgefüllt.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">print</span> <span class="nv">$name</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="c1"># das erste Element des Feldes @name.</span>
</span></span><span class="line"><span class="cl"><span class="nv">$name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">17</span><span class="p">;</span>
</span></span></code></pre></div><p>Anders als in C kann in Perl auch auf eine Liste von
Arrayelementen zugegriffen werden. Dies wird als eine
<em>array slice</em> bezeichnet. In diesem Fall handelt es sich um einen
Arraykontext, daher also das Prefix <code>@</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="nv">@fasel</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span> <span class="c1"># entspricht ($fasel[0], $fasel[1])</span>
</span></span><span class="line"><span class="cl"><span class="nv">@fasel</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nv">@fasel</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span> <span class="c1"># Feldelemente tauschen.</span>
</span></span><span class="line"><span class="cl"><span class="nv">@fasel</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nv">@fasel</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nv">@fasel</span><span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</span></span></code></pre></div><p>Mit den Operatoren <code>push</code> und <code>pop</code> kann Perl ein
Array wie einen Stack verwenden. Es ist möglich, mehrere Werte
(oder ganze Felder) auf einmal zu pushen.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="nb">push</span><span class="p">(</span><span class="nv">@einStack</span><span class="p">,</span> <span class="nv">$einWert</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nb">push</span><span class="p">(</span><span class="nv">@einStack</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nv">$einWert</span> <span class="o">=</span> <span class="nb">pop</span><span class="p">(</span><span class="nv">@einStack</span><span class="p">);</span>
</span></span></code></pre></div><p>Während <code>push</code> und <code>pop</code> die rechte Seite
eines Arrays bearbeiten (d.h. an den hohen Indizes manipulieren),
verändern <code>shift</code> und <code>unshift</code> die linke Seite
des Feldes. <code>shift</code> entspricht dabei dem gleichnamigen
Shell-Operator, und <code>unshift</code> ist seine Umkehrung.</p>
<p><code>reverse</code> liefert die Elemente eines Feldes in
umgekehrter Reihenfolge, <code>sort</code> liefert sie alphabetisch
sortiert, und <code>chop</code> ist auch auf alle Elemente eines Feldes anwendbar.</p>
<p>Dateihandles wie <code>&lt;STDIN&gt;</code> können auch Arrays
zugewiesen werden. Sie lesen dann die ganze Datei auf einmal ein
und weisen jede Zeile einem Feldelement zu.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="ch">#! /usr/bin/perl --</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">@lines</span> <span class="o">=</span> <span class="sr">&lt;STDIN&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">@reverselines</span> <span class="o">=</span> <span class="nb">reverse</span><span class="p">(</span><span class="nv">@lines</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nv">@sortlines</span> <span class="o">=</span> <span class="nb">sort</span><span class="p">(</span><span class="nv">@lines</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="nv">@sortlines</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="nv">@reverselines</span><span class="p">;</span>
</span></span></code></pre></div><h2 id="kontrollstrukturen">
    <a href="#kontrollstrukturen">
	Kontrollstrukturen
    </a>
</h2>
<p>In Perl werden wie in C Blöcke von Anweisungen gebildet,
indem man die Anweisungen in geschweifte Klammern
einschließt. Diese Anweisungen werden linear
ausgeführt.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">anweisung_1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">anweisung_2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="n">anweisung_n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Wie in C ist es möglich, Bedingungen zu formulieren. Anders
als in C <strong>müssen</strong> die geschweiften Klammern immer
vorhanden sein, auch dann, wenn nur eine Anweisung von der
Bedingung abhängig ist. Der <code>else</code>-Block kann
weggelassen werden. Mit Hilfe von <code>elsif</code> können
Entscheidungen kaskadiert werden, ohne daß sich die
Einrücktiefe bis ins Unendliche steigert.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">bedingung</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">anweisungen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">elsif</span> <span class="p">(</span><span class="n">neue_bedingung</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">anweisungen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">anweisungen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>In Perl werden Bedingungen als Strings berechnet. Bedingungen
sind genau dann falsch, wenn sie entweder genau den String
<code>0</code> oder den leeren String ergeben. Alle anderen Werte (1, 17,
0.000, 00) sind wahr.</p>
<p>Eine etwas seltsame Konstruktion in Perl ist die
<code>unless</code>-Anweisung, die im Prinzip ein <code>if</code> ohne
<code>then</code> darstellt (Die Anweisung <code>die</code> beendet ein
Perl-Programm mit einer Fehlermeldung).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">print</span> <span class="s">&#34;Wie ist Dein Name? &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$name</span> <span class="o">=</span> <span class="sr">&lt;STDIN&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">unless</span> <span class="p">(</span><span class="nv">$name</span> <span class="ow">eq</span> <span class="s">&#34;Kristian&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">die</span> <span class="s">&#34;Zugriff verweigert.\n&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Eine andere seltsame Konstruktion ist das einzelnen Anweisungen
nachgestellte <code>if</code> oder <code>unless</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="nb">die</span> <span class="s">&#34;Zugriff verweigert.\n&#34;</span> <span class="k">unless</span> <span class="p">(</span><span class="nv">$name</span> <span class="ow">eq</span> <span class="err">&#34;</span><span class="n">Kristian</span><span class="p">);</span>
</span></span></code></pre></div><p>Perl ist in der Lage, einen Block von Anweisungen zu
wiederholen, solange eine Bedingung wahr (<code>while</code>) oder
falsch (<code>until</code>) ist. Ebenso ist eine zu C analoge
<code>for</code>-Anweisung zum Zählen vorhanden. Die Syntax ist in
allen Fällen wie in C, nur daß die geschweiften Klammern
nicht entfallen dürfen.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="n">bedingung</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">anweisungen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">until</span> <span class="p">(</span><span class="n">bedingung</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">anweisungen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="n">start_anweisungen</span><span class="p">;</span> <span class="n">test_anweisungen</span><span class="p">;</span> <span class="n">zählanweisungen</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">arbeits_anweisungen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Zusätzlich ist Perl in der Lage, einen Block für jedes
Element eines Feldes auszuführen. Das ist bequemer, als erst
die Länge eines Feldes zu bestimmen und es dann
durchzuzählen.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">foreach</span> <span class="nv">$zähler</span> <span class="p">(</span><span class="nv">@eineListe</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">anweisungen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Schleifen können mit <code>last</code> und <code>next</code>
vorwärts und rückwärts kurzgeschlossen werden, d.h.
<code>last</code> entspricht dem <code>break</code> in C und <code>next</code>
entspricht dem <code>continue</code> von C.</p>
<p>Blöcke können in Perl mit einem Label markiert werden.
<code>last</code> und <code>next</code> können mithilfe dieser Labels
mehrere Ebenen auf einmal verlassen oder kurzschließen.</p>
<h2 id="assoziative-arrays">
    <a href="#assoziative-arrays">
	Assoziative Arrays
    </a>
</h2>
<p><em>Assoziative Arrays</em> oder <em>Hashlisten</em> sind
programmtechnisch eine Verallgemeinerung von Arrays. Statt
ganzzahliger Ausdrücke kann in einer Hashliste ein beliebiger
String als Index verwendet werden. Über diesen String kann
jederzeit auf dem mit dem String assoziierten Wert zugegriffen
werden. Man kann sich eine solche Hashliste auch als Tabelle mit
zwei Spalten vorstellen: Jedem String aus der linken Spalte (den
<em>Schlüsseln</em>) ist der zugehörige String auf der
rechten Seite (ein <em>Wert</em>) zugeordnet. Anders als in einer
richtigen Tabelle oder in einem Array haben die Elemente in einer
Hashliste aber keine vorgegebene Ordnung. Würde man sie
aufzählen (z.B. in einer <code>foreach</code>-Schleife),
bekäme man irgendeine Reihenfolge.</p>
<p>In Perl werden assoziative Felder durch ein Prozentzeichen
(<code>%</code>) markiert. In einem Arraykontext werden sie wie ein
normales Array mit einer geraden Anzahl von Feldern behandelt. Die
geraden Positionen dieses Arrays beginnend bei 0 sind mit
Schlüsseln belegt, die ungeraden Positionen mit den zu diesen
Schlüsseln gehörenden Werten. Die Funktion
<code>keys()</code> liefert die Schlüssel eines solchen Feldes und die
Funktion <code>values()</code> die Werte.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="nv">%vorname_von</span> <span class="o">=</span> <span class="p">(</span> <span class="s">&#34;Köhntopp&#34;</span><span class="p">,</span> <span class="s">&#34;Kristian&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;Seeger&#34;</span><span class="p">,</span> <span class="s">&#34;Martin&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;Rump&#34;</span><span class="p">,</span> <span class="s">&#34;Birgit&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Reihenfolge ist zufällig!</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="nb">keys</span><span class="p">(</span><span class="nv">%vorname_von</span><span class="p">);</span>   <span class="c1"># Köhntopp, Seeger, Rump</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="nb">values</span><span class="p">(</span><span class="nv">%vorname_von</span><span class="p">);</span> <span class="c1"># Kristian, Martin, Birgit</span>
</span></span></code></pre></div><p>Der Zugriff auf einzelne Elemente erfolgt wie bei Feldern durch
Indizierung, aber der Indexoperator besteht hier aus den
geschweiften Klammern.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="c1"># Reihenfolge ist zufällig</span>
</span></span><span class="line"><span class="cl"><span class="k">foreach</span> <span class="nv">$i</span> <span class="p">(</span><span class="nb">keys</span><span class="p">(</span><span class="nv">%vorname_von</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">print</span> <span class="s">&#34;Der Vorname von $i ist $vorname_von{$i}.\n&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">foreach</span> <span class="nv">$i</span> <span class="p">(</span><span class="nb">sort</span> <span class="nb">keys</span> <span class="nv">%vorname_von</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">print</span> <span class="s">&#34;Der Vorname von $i ist $vorname_von{$i}.\n&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Einzelne Elemente lassen sich mit dem Operator <code>delete</code>
aus dem Feld löschen (man kann auch das ganze Feld
löschen).</p>
<h2 id="eingabe-und-ausgabe">
    <a href="#eingabe-und-ausgabe">
	Eingabe und Ausgabe
    </a>
</h2>
<h3 id="standardeingabe">
    <a href="#standardeingabe">
	Standardeingabe
    </a>
</h3>
<p>Wie bereits gezeigt, kann man eine Zeile der Eingabe einlesen,
indem man das Filehandle der Eingabe an eine skalare Variable
zuweist. Wenn keine Eingabezeile mehr verfügbar ist, wird der
Wert <em>undef</em> zugewiesen. Weist man ein Filehandle stattdessen
an ein Array zu, wird die gesamte Datei bis zum Dateiende
zugewiesen und jedem Arrayelement eine Zeile zugeordnet.</p>
<p>Oft möchte man eine Datei zeilenweise durchlesen und
für jede Zeile einer Operation ausführen. Für die
Standardeingabe sieht das so aus:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="sr">&lt;STDIN&gt;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">print</span> <span class="nv">$i</span><span class="p">;</span> <span class="c1"># Zeile drucken</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Die Schleife beendet sich am Dateiende, da der Wert <em>undef</em>
zum Leerstring expandiert und dieser String als false-Wert gilt.
Leere Eingabezeilen bestehen aber immerhin noch aus einem
Newline-Zeichen, sind also keine Leerstrings.</p>
<p>In Perl ist es so, daß für viele Operatoren die
Variable <code>$_</code> als Defaultvariable angenommen wird, wenn
keine Variable angegeben wird. Tatsächlich kann man das
Beispiel auch so schreiben:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="sr">&lt;STDIN&gt;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">print</span><span class="p">;</span> <span class="c1"># Zeile drucken</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>In diesem Fall wird statt der Variablen <code>$i</code> die
Standardvariable <code>$_</code> verwendet.</p>
<h3 id="argv-und-env">
    <a href="#argv-und-env">
	<code>@ARGV</code> und <code>%ENV</code>
    </a>
</h3>
<p>Die Kommandozeilenparameter eines Perlprogrammes stehen in der
vordefinierten Arrayvariablen <code>@ARGV</code> zur Verfügung.
Das spezielle Dateihandle <code>&lt;&gt;</code> interpretiert diese
Namen der Reihe nach als Dateinamen und liest alle diese Dateien
durch. Das Programm</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="ch">#! /usr/bin/perl --</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="o">&lt;&gt;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">print</span><span class="p">;</span> <span class="c1"># Zeile drucken</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>entspricht also dem UNIX-Kommando <code>cat</code>. Es kann
<code>perlcat a b c</code> aufgerufen werden und gibt nacheinander die
Inhalte aller drei Dateien als eine Datei auf der Standardausgabe
aus.</p>
<p>Im assoziativen Array <code>%ENV</code> stellt Perl alle
Umgebungsvariablen zur Verfühgung. Die Schlüssel sind
jeweils der Name, die Werte sind die Werte der
Umgebungsvariablen.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="ch">#! /usr/bin/perl --</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Finde den Pfad des Homeverzeichnisses</span>
</span></span><span class="line"><span class="cl"><span class="c1"># des Benutzers.</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="nv">$ENV</span><span class="p">{</span><span class="s">&#39;HOME&#39;</span><span class="p">};</span>
</span></span></code></pre></div><h3 id="printf">
    <a href="#printf">
	<code>printf</code>
    </a>
</h3>
<p>Wem die Ausgabe von Variablen mit <code>print</code> zu langweilig
oder zu umständlich ist, der kann statt dessen <code>printf</code>
verwendet. Diese Anweisung akzeptiert einen Formatstring wie die
gleichnamige C-Funktion und eine Liste von Variablen, die
entsprechend dem Formatstring formatiert werden.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">printf &#34;%10s %05d %7.2f\n&#34;, $s, $i, $f;
</span></span></span></code></pre></div><h2 id="reguläre-ausdrücke">
    <a href="#regul%c3%a4re-ausdr%c3%bccke">
	Reguläre Ausdrücke
    </a>
</h2>
<p>Viele Perl-Anweisungen und Funktionen machen von regulären
Ausdrücken Gebrauch. Ein regulärer Ausdruck ist ein
Suchmuster, das gegen eine Zeichenkette verglichen wird und
entweder paßt oder nicht. Oft kommt es nur darauf an, ob der
Ausdruck paßt oder nicht, manchmal möchte man auch noch
wissen, welcher Teil der Zeichenkette genau gepasst hat, etwa
um ihn zu ersetzen.</p>
<p>Reguläre Ausdrücke werden von vielen UNIX-Programmen
verwendet, darunter <code>grep</code>, <code>sed</code>, <code>awk</code>,
<code>ed</code>, <code>vi</code>, <code>emacs</code> und die verschiedenen Shells.
Jedes dieser Programme hat eine leicht unterschiedliche Art der
Notation für reguläre Ausdrücke, und auch die
Leistungsfähigkeit unterscheidet sich gelegentlich etwas.
Perls reguläre Ausdrücke sind eine Obermenge aller dieser
Verfahren: Jeder reguläre Ausdruck, der in einem der genannten
Werkzeuge formuliert werden kann, kann auch in Perl formuliert
werden, muss aber evtl. leicht umformuliert werden.</p>
<p>In Perl werden reguläre Ausdrücke notiert, indem sie
in Schrägstriche (<em>slashes</em>) eingeschlossen werden. Die
einfachste Form von regulären Ausdrücken sieht so
aus:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="sr">/abc/</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">print</span> <span class="s">&#34;$_&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Im Beispiel wird die Einbauvariable <code>$_</code> gegen den
regulären Ausdruck getestet und wenn eine Übereinstimmung
erzielt wird, wird der String gedruckt. Die volle Syntax des <i>
match</i>-Operators lautet</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="nv">$variable</span> <span class="o">=~</span> <span class="sr">m/regexp/o</span><span class="n">ptionen</span><span class="p">;</span>
</span></span></code></pre></div><p>Dieser Ausdruck vergleicht den Inhalt der Variablen
<code>$variable</code> gegen den regulären Ausdruck <code>regexp</code>.
Dabei kann der Ablauf des Matchvorgangs mit einigen einbuchstabigen
Operationen beeinflusst werden (die wichtigste Option ist
<code>i</code>, ignore case). Auch die Trennzeichen (Slashes) können
durch andere, frei gewählte Trennzeichen ersetzt werden. Der
Match selbst ergibt einen Wahrheitswert, ,,1`` oder den
Leerstring.</p>
<p>Perl kennt die folgenden Regeln zur Konstruktion von
regulären Ausdrücken:</p>
<ul>
<li>
<p>Alle Zeichen, denen im folgenden keine besondere Bedeutung
zugewiesen wird, stehen in einem regulären Ausdruck für
sich selbst. Der reguläre Ausdruck <code>a</code> paßt also
auf einen String, der <code>a</code> enthält.</p>
</li>
<li>
<p>Das Zeichen Punkt steht für ein einzelnes, beliebiges
Zeichen außer Newline. Der reguläre Ausdruck <code>.</code>
paßt also auf alle Strings, die mindestens ein beliebiges
Zeichen außer Newline enthalten.</p>
</li>
<li>
<p>Eine in eckige Klammern eingeschlossene Zeichenmenge steht
für ein einzelnes Zeichen aus dieser Menge. Beginnt die Menge
mit einem Dach, steht die Menge für ein einzelnes Zeichen, das
nicht in der Menge ist. Der Ausdruck <code>[abc]</code> paßt also
entweder auf das Zeichen <code>a</code> oder das Zeichen <code>b</code>
oder das Zeichen <code>c</code>.</p>
</li>
<li>
<p>Perl kennt einige vordefinierte Zeichenklassen (und deren
Negationen), die oft benötigt werden:</p>
<table>
  <thead>
      <tr>
          <th>Kürzel</th>
          <th>Bedeutung</th>
          <th>Kürzel</th>
          <th>Bedeutung</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>\d (digits)</td>
          <td>[0-9]</td>
          <td>\D (not digits)</td>
          <td>[^0-9]</td>
      </tr>
      <tr>
          <td>\w (words)</td>
          <td>[a-zA-Z0-9_]</td>
          <td>\W (not words)</td>
          <td>[^a-zA-Z0-9_]</td>
      </tr>
      <tr>
          <td>\s (space)</td>
          <td>[ \r\t\n\f]</td>
          <td>\S (not space)</td>
          <td>[^ \r\n\t\f]</td>
      </tr>
  </tbody>
</table>
</li>
<li>
<p>Mehrere Teilausdrücke können einfach
aneinandergereiht werden. Der resultierende Ausdruck paßt
dann auf eine Folge von Zeichen, auf die jeweils die
Teilausdrücke passen würden. Im Klartext bedeutet das,
daß etwa <code>abc</code> auf ein <code>a</code> gefolgt von einem
<code>b</code> gefolgt von einem <code>c</code> paßt, und daß
etwa <code>a.c</code> auf ein <code>a</code> gefolgt von einem beliebigen
Zeichen außer Newline gefolgt von <code>c</code> paßt.</p>
</li>
<li>
<p>Der Stern <code>*</code> paßt auf null oder mehr
Wiederholungen des folgenden Zeichens. Der Ausdruck <code>ab*c</code>
paßt also auf <code>ac</code>, <code>abc</code>, <code>abbc</code> und so
weiter.</p>
</li>
<li>
<p>Das Pluszeichen <code>+</code> paßt auf eine oder mehr
Wiederholungen des folgenden Zeichens. Der Ausdruck <code>ab+c</code>
paßt also auf <code>abc</code>, <code>abbc</code> und so weiter.</p>
</li>
<li>
<p>Das Fragezeichen <code>?</code> paßt auf eine oder eine
Wiederholung des folgenden Zeichens. Der Ausdruck <code>ab?c</code>
paßt also auf <code>ac</code> oder <code>abc</code>.</p>
</li>
<li>
<p>Hinter einem Zeichen kann in geschweiften Klammer ein
genereller Multiplikator <code>{n.m}</code> angegeben werden. Der Ausdruck paßt
dann auf <code>n</code> bis <code>m</code> Wiederholungen dieses Zeichens.
Wird nur eine Zahl angegeben, paßt der Ausdruck auf genau
<code>n</code> Wiederholungen des Zeichens. Wird die zweite Grenze
<code>m</code> weggelassen, wird für sie unendlich eingesetzt.</p>
<p>Der Stern ist also ein Kürzel für <code>{0,}</code>, das Pluszeichen
steht für <code>{1,}</code> und das Fragezeichen für <code>{0,1}</code></p>
</li>
<li>
<p>Mit runden Klammern <code>()</code> können Teile eines Ausdruckes markiert werden. Diese Markierungen stehen im selben
Ausdruck unter den Namen <code>\1</code>, <code>\2</code> und so weiter zur
Verfügung. Der reguläre Ausdruck <code>a(.+)b\1c</code> paßt also auf einen String, der ein
<code>a</code> gefolgt von einer Anzahl beliebiger Zeichen, gefolgt von
einem <code>b</code> gefolgt von exakt demselben String wie zwischen
<code>a</code> und <code>b</code> gefolgt von einem <code>c</code>
enthält. Passend wäre also <code>addbddc</code> oder
<code>ahallobhalloc</code>, aber nicht <code>addbhalloc</code>. Letzterer
String würde aber auf den Ausdruck <code>a.+b.+c</code> passen.</p>
<p>Nach einem Match (und bis zum nächsten Gebrauch des
Match-Operators) stehen die markierten Teilstrings in den
besonderen Perl-Variablen <code>$1</code>, <code>$2</code> und so weiter
zur Verfügung.</p>
<p>Außerdem binden die Klammern Teilausdrücke zusammen:
<code>abc*</code> paßt auf <code>ab</code>, <code>abc</code>,
<code>abcc</code> und so weiter, während <code>(abc)*</code> auf den
leeren String, <code>abc</code>, <code>abcabc</code> und so weiter
paßt.</p>
</li>
<li>
<p>Und schließlich lassen sich mit dem Pipelinezeichen noch
Alternativen deklarieren. Der Ausdruck <code>lall|laber</code>
paßt entweder auf den String <code>lall</code> oder auf den
String <code>laber</code>.</p>
</li>
<li>
<p>Ein Dach markiert den Anfang eines Strings und ein
Dollarzeichen das Ende eines Strings. Der Ausdruck
<code>^x$</code> paßt also auf einen String, der genau nur
aus dem Zeichen <code>x</code> besteht.</p>
</li>
</ul>
<p>Außer dem m-Operator zum Matchen kennt Perl auch noch
einen s-Operator zum Suchen und Ersetzen in einem String:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span><span class="nv">variable</span> <span class="o">=</span>~ s/alt/neu/optionen<span class="p">;</span>
</span></span></code></pre></div><p>Diese Operation ersetzt in der Variablen <code>$variable</code> alle
Vorkommen des regulären Ausdrucks <code>alt</code> durch
<code>neu</code>. Der Ausdruck <code>neu</code> darf dabei ebenfalls
Klammermarkierungen enthalten. So würde <code>s/a(.+)b/x\1y/</code>
in einem String ein Vorkommen von paarigen
<code>a</code> und <code>b</code> durch passende <code>x</code> und <code>y</code>
ersetzen, ohne daß der Text dazwischen irgendwie
beeinflusst wäre.</p>
<p>Außer der Option <code>i</code> (ignore case) kennt der
s-Operator auch noch die Option <code>g</code> (global search and
replace), die nicht nur ein einzelnes Vorkommen von <code>alt</code>
ersetzt, sondern alle.</p>
<h3 id="split-und-join">
    <a href="#split-und-join">
	<code>split()</code> und <code>join()</code>
    </a>
</h3>
<p>Die Perlfunktion <code>split()</code> kann dazu verwendet werden,
einen Skalar mit Hilfe eines regulären Ausdrucks in ein Feld
zu zerlegen. <code>split()</code> nimmt dazu den String und wendet den
regulären Ausdruck wiederholt auf den String an. Alle Teile
des Strings, die auf den regulären Ausdruck passen, werden zu
Trennzeichen, und die Teile des Strings, die nicht auf den Ausdruck
passen, werden zu Feldelementen.</p>
<p>Eine Zeile der Paßwortdatei in UNIX sieht zum Beispiel so
aus:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="nv">$line</span> <span class="o">=</span> <span class="s">&#34;kris:_:100:20:Kristian Köhntopp:/home/kris:/bin/bash&#34;</span><span class="p">;</span>
</span></span></code></pre></div><p>Mit dem Aufruf <code>split(/:/, $line);</code> wendet Perl den
regulären Ausdruck <code>/:/</code> auf diese Zeile an. Der
Ausdruck paßt auf alle Doppelpunkte, diese werden also
Trennzeichen. Die Worte <code>kris</code>, <code>x</code>, <code>100</code>,
<code>20</code>, <code>Kristian Köhntopp</code>, <code>/home/kris</code>
und <code>/bin/bash</code> werden die Feldelemente 0 bis 6 des
Ergebnisfeldes von <code>split</code>.</p>
<p>Wendet man <code>split()</code> in einem Arraykontext an, bekommt
man das gesamte Feld als Ergebnis (und kann seine Länge mit
<code>$#feld</code> feststellen). In einem skalaren Kontext bekommt man
von <code>split()</code> die Länge des Feldes als Ergebnis.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="nv">$laenge</span> <span class="o">=</span> <span class="nb">split</span><span class="p">(</span><span class="sr">/:/</span><span class="p">,</span> <span class="nv">$line</span><span class="p">);</span> <span class="c1"># ergibt 6</span>
</span></span><span class="line"><span class="cl"><span class="nv">@feld</span>   <span class="o">=</span> <span class="nb">split</span><span class="p">(</span><span class="sr">/:/</span><span class="p">,</span> <span class="nv">$line</span><span class="p">);</span> <span class="c1"># ergibt $feld[0] = &#34;kris&#34; usw.</span>
</span></span><span class="line"><span class="cl">                             <span class="c1"># $#feld ist auch 6.</span>
</span></span></code></pre></div><p>Andererseits kann man mit <code>join()</code> ein Feld mit
beliebigen Trennzeichen zu einem Skalar zusammenfügen.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="nv">$line</span> <span class="o">=</span> <span class="nb">join</span><span class="p">(</span><span class="s">&#34;:&#34;</span><span class="p">,</span> <span class="nv">@feld</span><span class="p">);</span>
</span></span></code></pre></div><p>würde das zerlegte Paßwortfeld von oben wieder
zusammensetzen.</p>
<h2 id="funktionen">
    <a href="#funktionen">
	Funktionen
    </a>
</h2>
<p>Es ist möglich, in Perl eigene Funktionen zu definieren.
Die Syntax ist folgendermaßen:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">anweisungen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">$wert</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Diese Anweisungen definieren eine Funktion mit dem Namen
<code>name</code>, die einen Rückgabewert in <code>$wert</code> berechnet.
Die Namen von Funktionen sind von den Namen von Skalaren, Arrays
und Hashlisten unabhängig. Funktionen werden mit einem
Undzeichen aufgerufen. Die Funktion <code>name</code> kann also so
aufgerufen werden:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="o">&amp;</span><span class="n">name</span><span class="p">;</span>        <span class="c1"># name aufrufen und das Ergebnis verwerfen.</span>
</span></span><span class="line"><span class="cl"><span class="nv">$var</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">;</span> <span class="c1"># name aufrufen und das Ergebnis nutzen.</span>
</span></span></code></pre></div><p>Funktionen können mit Argumenten aufgerufen werden. Diese
Argumente stehen im Feld <code>@_</code> zur Verfügung. Sie
können also mit <code>$_[0]</code> und so weiter angesprochen
werden.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">add</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$summe</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">foreach</span> <span class="nv">$i</span> <span class="p">(</span><span class="nv">@_</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$summe</span> <span class="o">+=</span> <span class="nv">$i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">$summe</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="o">&amp;</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="o">&amp;</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">);</span>
</span></span></code></pre></div><p>Variablen in Funktionen sind global. Die Variable
<code>$summe</code> in der Funktion oben würde also eine gleichnamige
Variable anderswo im Programm überschreiben. Mit Hilfe des
Operators <code>local()</code> ist es möglich, lokale Variablen zu
deklarieren:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">add</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span><span class="p">(</span><span class="nv">$summe</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">foreach</span> <span class="nv">$i</span> <span class="p">(</span><span class="nv">@_</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$summe</span> <span class="o">+=</span> <span class="nv">$i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">$summe</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Auf diese Weise kann man auch die Funktionsparameter in ein
bekanntes Feld umkopieren:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">add</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span><span class="p">(</span><span class="nv">@werte</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span><span class="p">(</span><span class="nv">$summe</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">foreach</span> <span class="nv">$i</span> <span class="p">(</span><span class="nv">@werte</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$summe</span> <span class="o">+=</span> <span class="nv">$i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">$summe</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h1 id="cgi-programme-in-perl">
    <a href="#cgi-programme-in-perl">
	CGI-Programme in Perl
    </a>
</h1>
<h2 id="cgi-libpl-und-testcgipl">
    <a href="#cgi-libpl-und-testcgipl">
	<code>cgi-lib.pl</code> und <code>testcgi.pl</code>
    </a>
</h2>
<p>Zur CGI-Programmierung stehen in Perl eine ganze Reihe von
Funktionspaketen zur Verfügung. Ein sehr einfaches
Funktionspaket ist die <code>cgi-lib.pl</code> von Steven E. Brenner. Dieses Paket kann die
Eingabedaten von GET und POST-Methoden einlesen und decodieren. Es
stellt die Werte der einzelnen Eingabevariablen dann in dem
assoziativen Feld <code>%in</code> zur Verfügung. Neben dieser
Grundfunktionalität sind zusätzlich noch einige
Hilfsfunktionen zum Debugging vorhanden.</p>
<p>Der Gebrauch des Paketes ist wie folgt: Im
Bibliotheksverzeichnis von Perl muss die Datei <code>cgi-lib.pl</code> installiert sein. Das eigene Perlscript muss
dann so anfangen:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="ch">#! /usr/bin/perl --</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Paket aktivieren.</span>
</span></span><span class="line"><span class="cl"><span class="k">require</span> <span class="s">&#34;cgi-lib.pl&#34;</span> <span class="o">||</span> <span class="nb">die</span> <span class="s">&#34;cgi-lib.pl nicht gefunden.&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Einlesen und Zerlegen der GET/POST-Variablen.</span>
</span></span><span class="line"><span class="cl"><span class="o">&amp;</span><span class="n">ReadParse</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># html-Header erzeugen.</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="o">&amp;</span><span class="n">PrintHeader</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Debugausgabe</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="s">&#34;&lt;html&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;head&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;title&gt;Test CGI&lt;/title&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;/head&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;body&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;h1&gt;Test CGI&lt;/h1&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;h2&gt;Eingabevariablen:&lt;/h2&gt;\n&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="o">&amp;</span><span class="n">PrintVariables</span><span class="p">(</span><span class="nv">%in</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="s">&#34;\n&lt;h2&gt;Umgebungsvariablen&lt;/h2&gt;\n&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="o">&amp;</span><span class="n">PrintVariables</span><span class="p">(</span><span class="nv">%ENV</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="s">&#34;&lt;hr&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">Erzeugt von test-cgi.pl
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;/body&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;/html&gt;\n&#34;</span><span class="p">;</span>
</span></span></code></pre></div><p>Das Script muss ausführbar gemacht werden und dann
unter einer passenden URL aufgerufen werden (zum Beispiel: <code>http://white/cgi-bin/testcgi.pl</code>). Ihm können von einem
Formular oder manuell beliebige Parameter mitgegeben werden. Seine
Ausgabe sieht dann zum Beispiel so aus (mit einigen Parametern
aufgerufen):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">Test CGI
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">Eingabevariablen:
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">lall
</span></span></span><span class="line"><span class="cl"><span class="go">    laber
</span></span></span><span class="line"><span class="cl"><span class="go">probe
</span></span></span><span class="line"><span class="cl"><span class="go">    hallo
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">Umgebungsvariablen
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">DOCUMENT_ROOT
</span></span></span><span class="line"><span class="cl"><span class="go">    /home/www
</span></span></span><span class="line"><span class="cl"><span class="go">GATEWAY_INTERFACE
</span></span></span><span class="line"><span class="cl"><span class="go">    CGI/1.1
</span></span></span><span class="line"><span class="cl"><span class="go">... gekürzt ...
</span></span></span><span class="line"><span class="cl"><span class="go">SERVER_SOFTWARE
</span></span></span><span class="line"><span class="cl"><span class="go">    Apache/1.0.3
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">----------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="go">Erzeugt von test-cgi.pl
</span></span></span></code></pre></div><p>Das Script funktioniert wie folgt:</p>
<ul>
<li>
<p>Die Anweisung <code>require</code> aktiviert das Perl
Funktionspaket <code>cgi-lib.pl</code>. Schlägt das fehl, beendet
die <code>die</code>-Anweisung das Script mit einer Fehlermeldung.</p>
</li>
<li>
<p>Der Aufruf der im Paket definierten Unterfunktion <code>&amp;ReadParse</code> liest die Eingaben der GET- und POST-Methoden
ein und decodiert sie. Die einzelnen Variablenwerte werden im
assoziativen Feld <code>%in</code> hinterlegt.</p>
</li>
<li>
<p>Die Funktion <code>&amp;PrintHeader</code> liefert den
benötigten Content-Type-String zurück, der dann mit <code>print</code> gedruckt wird.</p>
</li>
<li>
<p>Mit einem einfachen, mehrzeiligen <code>print</code> wird der
Header eines HTML-Dokumentes erzeugt.</p>
</li>
<li>
<p>Die Funktion <code>&amp;PrintVariables</code> druckt das ihr
übergebene assoziative Array <code>%in</code> zu Debugzwecken
aus.</p>
</li>
<li>
<p>Nach einem Zwischenheader wird dann auch noch das assoziative
Array <code>%ENV</code> ausgedruckt. Dieses enthält alle
Umgebungsvariablen des Programms.</p>
</li>
<li>
<p>Ein Abspann-<code>print</code> druckt den Seitenfuß.</p>
</li>
</ul>
<h2 id="ein-einfacher-zähler">
    <a href="#ein-einfacher-z%c3%a4hler">
	Ein einfacher Zähler
    </a>
</h2>
<p>CGI-Scripte können und sollen nicht gecached werden. Es ist
daher möglich, auf diese Weise einen einfachen
Seitenzähler zu realisieren. Das Script muss dazu an
einem geeigneten Ort eine Datei hinterlegen, in der es seine
Aufrufe mitzählt. Die Ausgabe des Scriptes kann eine beliebige
HTML-Seite sein, in der der Zählerstand eingebaut wird.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="ch">#! /usr/bin/perl --</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Paket aktivieren.</span>
</span></span><span class="line"><span class="cl"><span class="k">require</span> <span class="s">&#34;cgi-lib.pl&#34;</span> <span class="o">||</span> <span class="nb">die</span> <span class="s">&#34;cgi-lib.pl nicht gefunden.&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Einlesen und Zerlegen der GET/POST-Variablen.</span>
</span></span><span class="line"><span class="cl"><span class="o">&amp;</span><span class="n">ReadParse</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># html-Header erzeugen.</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="o">&amp;</span><span class="n">PrintHeader</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Zählerstand einlesen.</span>
</span></span><span class="line"><span class="cl"><span class="nb">open</span><span class="p">(</span><span class="n">COUNTER</span><span class="p">,</span> <span class="s">&#34;&lt;/tmp/counter&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nv">$counter</span> <span class="o">=</span> <span class="sr">&lt;COUNTER&gt;</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">close</span><span class="p">(</span><span class="n">COUNTER</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Zählerstand merken.</span>
</span></span><span class="line"><span class="cl"><span class="nb">open</span><span class="p">(</span><span class="n">COUNTER</span><span class="p">,</span> <span class="s">&#34;&gt;/tmp/counter&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="n">COUNTER</span> <span class="s">&#34;$counter\n&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">close</span><span class="p">(</span><span class="n">COUNTER</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Seite ausgeben.</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="s">&#34;&lt;html&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;head&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;title&gt;Test CGI&lt;/title&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;/head&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;body&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;h1&gt;Z&amp;auml;hlerseite&lt;/h1&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">Diese Seite wurde $counter mal aufgerufen.
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;/body&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;/html&gt;\n&#34;</span><span class="p">;</span>
</span></span></code></pre></div><p>Das Script funktioniert so:</p>
<ul>
<li>
<p>Wie üblich werden die Eingabeparameter eingelesen. Sie
werden in dieser Version des Zählscriptes aber noch nicht
verwendet.</p>
</li>
<li>
<p>Es wird ein Dateihandle <code>&lt;COUNTER&gt;</code> zum Lesen
geöffnet und eine Zeile mit einer Zahl eingelesen. Diese Zahl
wird um eins erhöht. Die Datei wird wieder geschlossen.</p>
</li>
<li>
<p>Dasselbe Dateihandle wird noch einmal geöffnet, aber zum
Schreiben. Der aktuelle Zählerstand wird in die Datei
hineingedruckt. Beachte, daß beim Drucken in Filehandles
zwischen dem Filehandle und dem eigentlichen Drucktext <strong>kein</strong>
Komma gesetzt wird!</p>
</li>
<li>
<p>Der Seitentext wird ausgegeben.</p>
</li>
</ul>
<p><strong>Aufgaben:</strong> Erweitere das Script so, daß es mehrere
verschiedene Seiten und Zähler zu diesen Seiten bearbeiten
kann. Die Seitenbezeichnung wird dem Script in der Variablen <code>cn</code> übergeben.
Beachte die sich ergebenden
Sicherheitsprobleme, wenn Pfadnamen aus Variablen direkt
übernommen werden! Wie können diese vermieden werden?</p>

			</div>
		</div>

		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
				
				<a href="/tags/#lang_de" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				lang_de
				</a>
				
				<a href="/tags/#web" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				web
				</a>
				
				<a href="/tags/#development" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				development
				</a>
				
			</div>
		</div>

		
		
		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<a href="https://github.com/isotopp/isotopp.github.io/edit/main/content/posts/1996-11-27-cgi-programmierung.md"
				   rel="noopener noreferrer" target="_blank">
					<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Suggest Changes</span>
				</a>
			</div>
		</div>
		

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/1996/03/23/lu-ser.html">Lu Ser</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/1997/01/01/kryptographie-toetet.html">Kryptographie tötet - na und?</a>
				</div>
				
			</div>
		</div>


		
	</article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff.
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#rss-fill'/>
          </svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#envelope'/>
          </svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#github'/>
          </svg>
        </a>

        <a rel="me" href="https://infosec.exchange/@isotopp" title='Follow on Mastodon' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#mastodon'/>
          </svg>
        </a>

        
        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#steam'/>
          </svg>
        </a>

        

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#youtube'/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
