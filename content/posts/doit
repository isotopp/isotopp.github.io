#!/usr/bin/env bash
set -euo pipefail

# Fix aliases ending in .md.html in all index.md files under content/posts.
# This expects the aliases block to be in YAML front matter.

perl -0777 -i -pe 's{(^aliases:\s*\n(?:[ \t]*-\s+/[0-9]{4}/[0-9]{2}/[0-9]{2}/[^\s]+)?)\.md\.html(\s*)}{$1.html$2}mg' /Users/kris/Source/blog/isotopp.github.io/content/posts/*/index.md
