<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Zero Tests and Testing in Production | Die wunderbare Welt von Isotopp</title>
<meta name="description" content="Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">
<link rel="canonical" href="https://blog.koehntopp.info/2017/05/29/zero-tests-and-testing-in-production.html">

<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">


<meta name="generator" content="Hugo 0.145.0">
<meta property="og:title" content='Zero Tests and Testing in Production | Die wunderbare Welt von Isotopp' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />
<meta property="og:locale" content="en_US" />
<meta name="description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:url" content="https://blog.koehntopp.info/2017/05/29/zero-tests-and-testing-in-production.html" />
<meta property="og:type" content="article" />
<meta name="article:published_time" content='2017-05-29T05:11:51Z' />
<meta name="fediverse:creator" content="@isotopp@infosec.exchange">
<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content='@isotopp@infosec.exchange' />
<meta property="twitter:title" content='Zero Tests and Testing in Production' />
<meta property="twitter:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />


    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.dd9d518fe6cac55191b6af874e18327dff051055754ffc7e106131baf826e6d3.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info/" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/avatars/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            









<div class="page">
	<article class="zero-tests-and-testing-in-production-page">
		<div class='row  justify-content-center text-center my-4 mx-0'>
			<header class="headerbanner">
				<div class='col'>
					<h1 class="title mb-lg-4 text-white">
						Zero Tests and Testing in Production
					</h1>
					<div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
						<img alt='@isotopp@infosec.exchange image' src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0'
						     style='width: 1.9rem; border-radius: 1rem;'>
						<a href="https://infosec.exchange/@isotopp" class='text-light text-decoration-none'>
							Kristian Köhntopp
						</a>
						
						<span class='d-none d-lg-inline'>-</span>
						<div class='d-block d-lg-inline'>May 29, 2017</div>
						
					</div>
				</div>
				
				<img alt='a featured image' src="/assets/img/background/rijksmuseum.jpg">
				
			</header>
		</div>

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2017/05/26/the-measles-vs-your-immune-system.html">The Measles vs your immune system</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2017/05/31/good-riddance-to-the-query-cache.html">Good Riddance to the Query Cache</a>
				</div>
				
			</div>
		</div>

		<div class='row justify-content-center mx-0 mt-3 mb-5'>
			<div class="col-lg-8 mb-3">
				
			</div>
			<div class='col-lg-8'>
				<p>There is a pretty cool Twitter thread by Sarah Mei, starting at</p>
<p><p class="md__image">
  <img src="/uploads/2017/05/Bildschirmfoto-2017-05-29-um-05.49.22.png" alt=""  />
</p>

</p>
<p><a href="https://twitter.com/sarahmei/status/868928631157870592" target="_blank" rel="noopener">Thread</a>

</p>
<p>I spammed into this at <a href="https://twitter.com/isotopp/status/869030484935835648" target="_blank" rel="noopener">/14</a>

.</p>
<p><a href="https://twitter.com/samphippen/status/868918641189949442" target="_blank" rel="noopener">@samphippen</a>

:</p>
<blockquote>
<p>Big secret: there exist vast tranches of business contexts in which having
literally zero tests is fine.</p></blockquote>
<p><a href="https://twitter.com/sarahmei/status/868928631157870592" target="_blank" rel="noopener">@sarahmei</a>

:</p>
<blockquote>
<p>Been thinking about this. Conventional wisdom says you need a
comprehensive set of regression tests to go green before you release code.
/1</p>
<p>You want to know that your changes didn&rsquo;t break something elsewhere in the
app. But there are ways to tell other than a regression suite. 2/</p>
<p>Especially with the rise of more sophisticated monitoring and better
understanding of error rates (vs uptime) on the operational side. 3/</p>
<p>With sufficiently advanced monitoring &amp; enough scale, it&rsquo;s a realistic
strategy to write code, push it to prod, &amp; watch the error rates. 4/</p>
<p>If something in another part of the app breaks, it&rsquo;ll be apparent very
quickly in your error rates. You can either fix or roll back. 5/</p>
<p>You&rsquo;re basically letting your monitoring system play the role that a
regression suite &amp; continuous integration play on other teams. 6/</p>
<p>This strategy assumes a lot of things, starting with an operational
sophistication that most dev teams don&rsquo;t have. There&rsquo;s more, as well. 7/</p>
<p>It assumes the ability to segment users, show each dev&rsquo;s
change-in-progress to a different segment, &amp; allocate error rates per
segment. 8/</p>
<p>It assumes sufficient scale that variations in a segment&rsquo;s error rates
will be statistically significant. 9/</p>
<p>And perhaps most unusually, it assumes a product organization that&rsquo;s
comfortable experimenting on live traffic. 10/</p>
<p>Then again, if they already do A/B testing for product changes on live
traffic, this is just extending that idea to dev changes. 11/</p>
<p>But if you can make it work, getting live feedback on changes you _just_
made is amazing. 12/</p>
<p>This is one of the reasons why it&rsquo;s critical for operations &amp; development
folks in an organization to work reeeeally closely together. 13/</p>
<p>An adversarial relationship between dev &amp; ops kills this. You can&rsquo;t even
start if responsibility for &lsquo;quality&rsquo; is siloed on one side. 14/</p>
<p>Certainly hybrid approaches are possible, where there&rsquo;s a small, fast test
suite hitting critical code, &amp; the rest is monitored in prod. 15/</p>
<p>There are reasons beyond correctness &amp; regressions for writing tests, as I
wrote about a few weeks ago.
<a href="https://www.devmynd.com/blog/five-factor-testing/" target="_blank" rel="noopener">https://www.devmynd.com/blog/five-factor-testing/</a>


16/</p>
<p>I described the five reasons we write tests: correctness, regressions, as
design support, as documentation, and as refactoring support. 17/</p>
<p>Even in a world where you delegate correction &amp; regressions to production
monitoring, there are still reasons to write tests. 18/</p>
<p>But you could start to imagine a world in which we get all 5 of those
benefits via mechanisms <em>other</em> than automated tests. ? 19/</p>
<p>The writing and running of tests is not a goal in and of itself - EVER. We
do it to get some benefit for our team, or the business. 20/</p>
<p>If you can find a more efficient way to get those benefits that works for
your team &amp; larger org, you should <em>absolutely</em> take it. 21/</p>
<p>Because your competitor probably is. 22/</p>
<p>One final note: delegating regressions to production monitoring is what
&ldquo;move fast and break things&rdquo; means, if you take it seriously. 23/</p>
<p>For a long time I dismissed MFaBT as a silly brogrammer slogan. Move fast
= no tests, break things = how would they even know? CHAOS! 24/</p>
<p>Paying attention to the ops community, though, radically shifted my frame
of reference. Now I get it. It&rsquo;s doesn&rsquo;t have to be chaos. 25/</p>
<p>Yet <a href="https://twitter.com/__apf__/status/867751153026482177" target="_blank" rel="noopener">another example</a>


Maybe someday I&rsquo;ll outgrow it&hellip; 26/fin</p></blockquote>
<p>I spammed this at her /14, thanks
<a href="https://twitter.com/s0enke/status/868935676993130496" target="_blank" rel="noopener">@s0enke</a>

 and Harald
Wagener.</p>
<blockquote>
<p>Dev and Ops have conflicting goals, success metrics, even if their tools
are the same. Dev is successful if there are new features, new /1</p>
<p>best cases. Ops is an infrastructure job. They are successful if there are
few outages, and recovery is quickly, success is measured by /2</p>
<p>how worst cases are handled. Conflict between Dev and Ops heavy orgs comes
from conflict in these metrics. Ways around that exist, /3</p>
<p>and they relate to making testing in production safe, and to the two
questions before each rollout. /4</p>
<ol>
<li>&ldquo;If you break it, will you even notice?&rdquo; What are the metrics relevant
here? What are your consumers, to whom are you a provider? /5</li>
</ol>
<p>The answers should resolve to people, not subsystems. Because it&rsquo;s people
you need to speak to to get answers. /6</p>
<p>and 2. &ldquo;If you break it, can you fix it?&rdquo; That is, of course not, not in
all cases. So who needs to be available when you roll out? Again,/7</p>
<p>this resolves to people. It&rsquo;s a mind hack: these are worst-case related
questions, but you want the dev doing a rollout asking them. /8</p>
<p>Testing in production: Making failure survivable.
<a href="https://www.slideshare.net/isotopp/go-away-of-i-will-replace-you-with-a-little-shell-script-english" target="_blank" rel="noopener">https://www.slideshare.net/isotopp/go-away-of-i-will-replace-you-with-a-little-shell-script-english</a>


…, slide 19: Separation of rollout and activation, a/b testing /9</p>
<p>Experiment framework = running old and new code side by side. Requires
ways to deal with persistent data changes (old/new). /10</p>
<p>Also requires fast monitoring, SLO for monitoring lag, monitoring lag
<em>shown</em> on the screens, and no rollout if monitoring actually lags./11</p>
<p>Because if it breaks you wouldn&rsquo;t notice. Also, people. So chat needs to
be up and running, because if it breaks <em>you</em> can&rsquo;t fix it. /12</p>
<p>Testing in production = fast rollouts = small changes. Small changes =
fast debug = safe rollouts = making testing in production safe./13</p>
<p>(slide 32) It&rsquo;s kind of a lock-in. To test safely in production you need
to test in production, a lot. /14</p>
<p>Management is scared. How to deal with that? Give them controls. Predict
biz behavior, measure outage, track delta. /15</p>
<p>TheN create a budget for downtime, (slide 34). When outage &gt; budget, too
much risk. Need to check process. /16 When outage &lt; budget, &ldquo;are we
moving fast enough?&rdquo; Are we becoming complacent? Are we taking enough
risk? /17</p>
<p>Also, blameless postmortem - if you break production, I did not teach you
properly, they did not have your back. It&rsquo;s not you, /18</p>
<p>it&rsquo;s the process. We need to fix the process, not take it out on a person
(slides 32, 34, 35). /19</p>
<p>Testing in production is a good thing, not just for new things, but
always. Never shut anything down cleanly (slide 46). You need to be/20</p>
<p>able to trust your safeties. Exercise them. Moves understanding from
head (knowledge) to heart (experience) to guts (intuition) /21</p>
<p>Design principles are affected, too. Simplicity is a value (slide 51). If
you can&rsquo;t be simple, be obvious. See
<a href="https://www.slideshare.net/isotopp/boring-dot-com-the-virtues-of-boring-technology" target="_blank" rel="noopener">https://www.slideshare.net/isotopp/boring-dot-com-the-virtues-of-boring-technology</a>

,
/22</p>
<p>and
<a href="https://www.slideshare.net/isotopp/boring-dot-com-the-virtues-of-boring-technology" target="_blank" rel="noopener">https://www.slideshare.net/isotopp/boring-dot-com-the-virtues-of-boring-technology</a>


for simple, boring, obvious. Stickers available. :-) /23</p>
<p>That&rsquo;s an engineering/developer strain of qualifications that matches
feature dev. Hence me calling them Infrastructure Devs, /24</p>
<p>Google calling them SREs instead of Operations people. Operations is not
dead, it became an engineering discipline. /25</p>
<p>It matches feature dev, and will always somewhat clash with feature
development. Devops helps, SRE helps, but conflict fundamental./26</p>
<p>end Addendum: 2012 version of this in
<a href="https://www.slideshare.net/isotopp/8-rollouts-a-day" target="_blank" rel="noopener">https://www.slideshare.net/isotopp/8-rollouts-a-day</a>


and
<a href="https://www.youtube.com/watch?v=rzU1UtUpyTI" target="_blank" rel="noopener">https://www.youtube.com/watch?v=rzU1UtUpyTI</a>


/27, really the end</p></blockquote>
<p>Both Testing in Production and Test Driven Development, have a similar goal -
they want to make failure survivable. One by building structure around
failure that allows fast and low-loss recovery, the other by trying to avoid
failure.</p>
<p>Testing in Production is more agile, and way faster, if you can pull it off.
That is, finding a way to make failure survivable and low-cost.</p>
<p>If you manage this, payoff is manifold - not you do you save the overhead of
formal TDD, you also gain a culture in which recovery procedures are
exercised, well known, understood to be working and in which the difference
between an slight Oops and a critical situation is understood at the
experience/intuition level. This creates much more fluid, resilient and
un-excited operations.</p>
<p>There are things and pieces where Testing in Production cannot be made safe.
In such an environment (or such parts of an environment) not failing in the
first place is crucial. Nobody understands that better than Ops persons with
an intuitive grasp of critical failures.</p>

			</div>
		</div>

		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
				
				<a href="/tags/#computer" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				computer
				</a>
				
				<a href="/tags/#testing" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				testing
				</a>
				
				<a href="/tags/#lang_en" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				lang_en
				</a>
				
			</div>
		</div>

		
		
		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<a href="https://github.com/isotopp/isotopp.github.io/edit/main/content/posts/2017-05-29-zero-tests-and-testing-in-production.md"
				   rel="noopener noreferrer" target="_blank">
					<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Suggest Changes</span>
				</a>
			</div>
		</div>
		

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2017/05/26/the-measles-vs-your-immune-system.html">The Measles vs your immune system</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2017/05/31/good-riddance-to-the-query-cache.html">Good Riddance to the Query Cache</a>
				</div>
				
			</div>
		</div>


		
	</article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff.
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#rss-fill'/>
          </svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#envelope'/>
          </svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#github'/>
          </svg>
        </a>

        <a rel="me" href="https://infosec.exchange/@isotopp" title='Follow on Mastodon' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#mastodon'/>
          </svg>
        </a>

        
        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#steam'/>
          </svg>
        </a>

        

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#youtube'/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
