<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Enterprise Mail: große Mailsysteme, kleine Schmerzen | Die wunderbare Welt von Isotopp</title>
<meta name="description" content="Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">
<link rel="canonical" href="https://blog.koehntopp.info/2002/02/01/enterprise-mail.html">

<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">


<meta name="generator" content="Hugo 0.145.0">
<meta property="og:title" content='Enterprise Mail: große Mailsysteme, kleine Schmerzen | Die wunderbare Welt von Isotopp' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />
<meta property="og:locale" content="de_DE" />
<meta name="description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="og:url" content="https://blog.koehntopp.info/2002/02/01/enterprise-mail.html" />
<meta property="og:type" content="article" />
<meta name="article:published_time" content='2002-02-01T09:00:00Z' />
<meta name="fediverse:creator" content="@isotopp@infosec.exchange">
<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content='@isotopp@infosec.exchange' />
<meta property="twitter:title" content='Enterprise Mail: große Mailsysteme, kleine Schmerzen' />
<meta property="twitter:description" content='Kris Köhntopp&#39;s blog (Fedi: @isotoppinfosec.exchange)' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />


    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.dd9d518fe6cac55191b6af874e18327dff051055754ffc7e106131baf826e6d3.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info/" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/avatars/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            









<div class="page">
	<article class="enterprise-mail-gro%C3%9Fe-mailsysteme-kleine-schmerzen-page">
		<div class='row  justify-content-center text-center my-4 mx-0'>
			<header class="headerbanner">
				<div class='col'>
					<h1 class="title mb-lg-4 text-white">
						Enterprise Mail: große Mailsysteme, kleine Schmerzen
					</h1>
					<div class='text-uppercase text-light' style='letter-spacing: 0.1rem;'>
						<img alt='@isotopp@infosec.exchange image' src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0'
						     style='width: 1.9rem; border-radius: 1rem;'>
						<a href="https://infosec.exchange/@isotopp" class='text-light text-decoration-none'>
							Kristian Köhntopp
						</a>
						
						<span class='d-none d-lg-inline'>-</span>
						<div class='d-block d-lg-inline'>February 1, 2002</div>
						
					</div>
				</div>
				
				<img alt='a featured image' src="/assets/img/background/rijksmuseum.jpg">
				
			</header>
		</div>

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2002/01/31/ldap-vs-sql.html">LDAP vs. SQL</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2002/03/04/mysql-3.html">MySQL 3.23</a>
				</div>
				
			</div>
		</div>

		<div class='row justify-content-center mx-0 mt-3 mb-5'>
			<div class="col-lg-8 mb-3">
				
			</div>
			<div class='col-lg-8'>
				<h1 id="enterprise-mail">
    <a href="#enterprise-mail">
	Enterprise Mail
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2002/02/enterprise-mail.001.jpg" alt=""  />
</p>

</p>
<p>Folien für eine interne Mitarbeiterschulung: Umzug und Erweiterung des Mailsystems bei mobilcom.de; für die evangelische Landeskirche Schleswig-Holstein; für Ver.di.</p>
<h1 id="was-ist-enterprise-level">
    <a href="#was-ist-enterprise-level">
	Was ist Enterprise Level?
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2002/02/enterprise-mail.002.jpg" alt=""  />
</p>

</p>
<p>Ausfallsicher</p>
<ul>
<li>bei Hardwareschaden</li>
<li>bei Mailwellen</li>
</ul>
<p>Skalierbar</p>
<ul>
<li>über alle User</li>
<li>pro User
<ul>
<li>Mails pro Ordner</li>
<li>Order pro User</li>
</ul>
</li>
<li>pro Standort</li>
<li>pro Domain</li>
</ul>
<p>Integrierbar</p>
<ul>
<li>keine Firma ab einer bestimmten Größe hat ein homogenes Mailsystem</li>
<li>unterschiedliche Zugänge
<ul>
<li>für Anwender: POP3/IMAP4, mit SSL?, über Web?</li>
<li>Für Anwendungen: Virus-Scanner? Mailinglisten? Pflegeinterfaces?</li>
</ul>
</li>
</ul>
<p>Mail ist missionskritisch, inhomogen, Lock-In unbedingt vermeiden.
Offene Software, offene Protokolle -&gt; freie Wahl der Clients, freie Wahl der Serverkomponenten (Soft- und Hardware)</p>
<p>bessere Skalierbarkeit, bessere Erweiterbarkeit, bessere Integrierbarkeit ins Backend</p>
<h1 id="hardwarekonzept">
    <a href="#hardwarekonzept">
	Hardwarekonzept
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2002/02/enterprise-mail.003.jpg" alt=""  />
</p>

</p>
<p>Mailserver doppelt</p>
<ul>
<li>Jede Maschine kann für beide übernehmen</li>
</ul>
<p>Storage doppelt</p>
<ul>
<li>jedes Array hat alle Daten
Multipathing</li>
<li>Mehrere NICs</li>
<li>Mehrere Kabelwege</li>
</ul>
<p>Sehr zufrieden mit dem Hardware-Range von Sun:
Hardware für jede Größe von der kleinen X1 bis zur E15K, Software ist portabel über den gesamten Range.</p>
<p>Großer Schwerpunkt auf ausfallsichere Hardware:</p>
<ul>
<li>Monitoring</li>
<li>Multipathing</li>
<li>Hot Plug</li>
</ul>
<p>Ausfallszenarien:</p>
<ul>
<li>Kiste fällt aus
<ul>
<li>Migration der IP</li>
<li>Migration der Platten</li>
</ul>
</li>
<li>Platte fällt aus
<ul>
<li>RAID 1 (Veritas)</li>
</ul>
</li>
</ul>
<h1 id="softwarekonzept">
    <a href="#softwarekonzept">
	Softwarekonzept
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2002/02/enterprise-mail.004.jpg" alt=""  />
</p>

</p>
<p>Einsatz von Standardprotokollen</p>
<ul>
<li>POP3, IMAP4, LMTP, SMTP, LDAP</li>
</ul>
<p>Einsatz von Standardsoftware</p>
<ul>
<li>sendmail 8.12.1, Cyrus IMAP, perdition Proxy, Veritas (VM, FS, CS), iPlanet Directory 4.x, Interscan Viruswall</li>
</ul>
<p>iPlanet war vorgegeben, da das führende LDAP iPlanet war.</p>
<p>Veritas war vorgegeben, hat sich als sehr gute Wahl herausgestellt: Entwicklung von failover-Scripten harmlos.</p>
<p>Viruscheck vorgegeben: InterScan im Einsatz bei NetUSE, Kunden arbeiten auch mit Amavis und NAI oder anderen Systemen.</p>
<p>eigentliche Arbeitstiere sind freie Software:</p>
<ul>
<li>sendmail 8.12.1 hat bessere LDAP-Integration
<ul>
<li>sendmail ist eigentlich ein MTA-SDK :-)</li>
</ul>
</li>
<li>perdition ist ein sehr leistungsfähiger Proxy
<ul>
<li>Plugin-Architektur</li>
<li>extrem gutmütig im Deployment</li>
<li>übersichtlicher Code</li>
</ul>
</li>
<li>cyrus ist ein sehr skalierbarer POP/IMAP-Server
<ul>
<li>schlecht dokumentiert</li>
<li>eigenwillige Authentisierungsbibliothek SASL (Exkurs)</li>
<li>ordentliche Architektur</li>
</ul>
</li>
</ul>
<h1 id="skalierbarkeit">
    <a href="#skalierbarkeit">
	Skalierbarkeit
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2002/02/enterprise-mail.005.jpg" alt=""  />
</p>

</p>
<p>Sizing</p>
<ul>
<li>per User: 1 MB RAM, 2 MB Swap, 1 MHz</li>
<li>IMAP braucht mehr</li>
<li>SSL braucht mehr!</li>
<li>angemessen Plattenplatz</li>
</ul>
<p>Wieviel Plattenplatz ist angemessen?</p>
<ul>
<li>3 Kategorien
<ul>
<li>2 MB, 20 MB, 200 MB</li>
</ul>
</li>
<li>Jede Kategorie ist
<ul>
<li>(großes Modell) 5 mal seltener als die vorhergehende</li>
<li>(kleines Modell) 10 mal seltener als die vorhergehende</li>
</ul>
</li>
</ul>
<h1 id="skalierbarkeit-ii">
    <a href="#skalierbarkeit-ii">
	Skalierbarkeit II
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2002/02/enterprise-mail.006.jpg" alt=""  />
</p>

</p>
<p>Anwendungsbeispiel: ~5000 User</p>
<ul>
<li>700 zugleich verbunden, 100 davon mit IMAP
ergeben:</li>
<li>1400 MB RAM, 3800 MB Swap, 700+ MHz</li>
</ul>
<p>27 oder 63 GB Mailstore</p>
<ul>
<li>kleines Modell (27 GB)
<ul>
<li>4500<em>2 MB + 450</em>20 MB + 45*200 MB</li>
</ul>
</li>
<li>großes Modell (63 GB)</li>
<li>4500<em>2 MB + 900</em>20 MB + 180*200 MB</li>
</ul>
<p>Zahlen wurden auf Linux/Intel ermittelt, und an eigener Cyrus-Installation validiert. Zahlen an der Ist-Installation des Kunden validiert. Skalierbarkeit weitgehend linear. Problem ist partitionierbar.</p>
<h1 id="migration">
    <a href="#migration">
	Migration
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2002/02/enterprise-mail.007.jpg" alt=""  />
</p>

</p>
<p>Konvertierung</p>
<ul>
<li>des vorhandenen Mailstore, der vorhandenen Aliases, der vorhandenen Listeninfrastruktur, der vorhandenen Routingstruktur</li>
</ul>
<p>Nahtlose Migration durch &ldquo;Rückzug&rdquo;:</p>
<ul>
<li>&ldquo;Wechsel von Kopfsteinpflaster auf Autobahn während der Hauptreisezeit&rdquo;</li>
<li>Vorbereitung der Konvertierung</li>
<li>Umstellung auf das neue System</li>
<li>Durchrouten auf das alte System</li>
<li>Während der Konvertierung &ldquo;Rückzug&rdquo; auf das neue System</li>
</ul>
<p>Konvertierung des Ist-Bestandes ist aufwendiger, fehleranfälliger als geplant.</p>
<p>System ist grundsätzlich funktionsfähig; Umstellung ist wesentlich holperiger gewesen als intendiert; Umstellungsaufwand auch bei den Anwendern</p>
<h1 id="migration-ii">
    <a href="#migration-ii">
	Migration II
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2002/02/enterprise-mail.008.jpg" alt=""  />
</p>

</p>
<p>Typische Probleme:</p>
<ul>
<li>lustige Ordernamen (IMAP)</li>
<li>defekte Aliasdaten</li>
<li>Datenbestand nicht komplett</li>
<li>wechselndes Mailrouting
<ul>
<li>Hosts liefern mit unerwarteten Namen ein</li>
<li>LDAP-Routing verhält sich anders als statisches Routing</li>
</ul>
</li>
</ul>
<p>Umstellung für IMAP-Clients nicht transparent</p>
<ul>
<li>CAPABILITY</li>
<li>IMAP Subscriptions</li>
<li>Ordnernamen</li>
<li>Lage des Sent-Folders</li>
</ul>
<p>Umstellung für POP3-Clients weitgehend transparent</p>
<ul>
<li>triviales Protokoll</li>
<li>nicht erweiterbar</li>
<li>finaler Mailstore auf dem Client</li>
</ul>
<p>IMAP ist ein modulares Protokoll: Extensions sind nicht kompatibel, Normung ist nicht rigide genug.
Propietäre Erweiterungen machen den Wechsel schwer
Unterschätze niemals den Einfallsreichtum von Anwendern bei der Vergabe von Ordnernamen.
Unterschätze niemals die tägliche Zielverschiebung durch das Tagesgeschäft.</p>
<h1 id="weitere-szenarien">
    <a href="#weitere-szenarien">
	Weitere Szenarien
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2002/02/enterprise-mail.009.jpg" alt=""  />
</p>

</p>
<p>Verteiltes Setup: 50+ Standorte, Workgroup-Size pro Standort, zentrale Administration, Begrenzte Hardwarekapazität</p>
<p>Großes Setup</p>
<ul>
<li>70 000+ Anwender
<ul>
<li>Mailstore im TB-Bereich</li>
</ul>
</li>
<li>Virenscan
<ul>
<li>muß skalierbar sein</li>
</ul>
</li>
<li>Quota</li>
<li>Webmail Zugang
<ul>
<li>muß skalierbar sein</li>
</ul>
</li>
<li>zentrale Bulk-Administration
<ul>
<li>Integration in existierende Stammdatenverwaltung</li>
</ul>
</li>
</ul>
<h1 id="weitere-szenarien-ii">
    <a href="#weitere-szenarien-ii">
	Weitere Szenarien II
    </a>
</h1>
<p><p class="md__image">
  <img src="/uploads/2002/02/enterprise-mail.010.jpg" alt=""  />
</p>

</p>
<p>Zu erwartende Ausbaumöglichkeiten:</p>
<ul>
<li>Calendaring
<ul>
<li>lokaler Client</li>
<li>Web Access</li>
</ul>
</li>
<li>mehr Verschlüsselung
<ul>
<li>Key Management</li>
</ul>
</li>
<li>Storage Management
<ul>
<li>Migration alter Mail in Hintergrundspeicher</li>
<li>Retrieval alter Mail</li>
<li>Sichere Löschung alter Mail</li>
<li>Mailtracking</li>
</ul>
</li>
</ul>

			</div>
		</div>

		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Tags</span>
				
				<a href="/tags/#lang_de" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				lang_de
				</a>
				
				<a href="/tags/#talk" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				talk
				</a>
				
				<a href="/tags/#publication" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				publication
				</a>
				
				<a href="/tags/#internet" class='btn btn-sm btn-outline-primary mb-1'>
				<svg class="bi" width="1rem" height="1rem" fill="currentColor">
					<use xlink:href="/bootstrap-icons.svg#tag-fill"></use>
				</svg>
				internet
				</a>
				
			</div>
		</div>

		
		
		
		
		<div class='row justify-content-center py-3 mb-3 mx-0'>
			<div class='col-lg-8 text-center'>
				<a href="https://github.com/isotopp/isotopp.github.io/edit/main/content/posts/2002-02-01-enterprise-mail.md"
				   rel="noopener noreferrer" target="_blank">
					<span class='letter-spacing-01 text-uppercase text-secondary me-2'>Suggest Changes</span>
				</a>
			</div>
		</div>
		

		<div class='row justify-content-center mx-0'>
			<div class='col-lg-4 text-center text-lg-start'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Previous Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2002/01/31/ldap-vs-sql.html">LDAP vs. SQL</a>
				</div>
				
			</div>

			<div class='col-lg-4 text-lg-end mt-5 mt-lg-0 text-center'>
				
				<div>
					<div class='letter-spacing-01 text-uppercase text-secondary'>
						Next Post
					</div>
					<a class='text-decoration-none' href="https://blog.koehntopp.info/2002/03/04/mysql-3.html">MySQL 3.23</a>
				</div>
				
			</div>
		</div>


		
	</article>
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff.
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#rss-fill'/>
          </svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#envelope'/>
          </svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#github'/>
          </svg>
        </a>

        <a rel="me" href="https://infosec.exchange/@isotopp" title='Follow on Mastodon' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#mastodon'/>
          </svg>
        </a>

        
        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#steam'/>
          </svg>
        </a>

        

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'>
            <use xlink:href='/bootstrap-icons.svg#youtube'/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
